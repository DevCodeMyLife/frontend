{"ast":null,"code":"import _objectSpread from\"/Users/andrejsmelev-sampanov/Documents/org_devcodemylife/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/Users/andrejsmelev-sampanov/Documents/org_devcodemylife/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _classCallCheck from\"/Users/andrejsmelev-sampanov/Documents/org_devcodemylife/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/andrejsmelev-sampanov/Documents/org_devcodemylife/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/andrejsmelev-sampanov/Documents/org_devcodemylife/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/andrejsmelev-sampanov/Documents/org_devcodemylife/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";var _excluded=[\"node\",\"inline\",\"className\",\"children\"];import React,{Component}from\"react\";import ReactMarkdown from'react-markdown';import{Prism as SyntaxHighlighter}from'react-syntax-highlighter';import{tomorrow}from\"react-syntax-highlighter/dist/esm/styles/prism\";import TextareaAutosize from'react-textarea-autosize';import like from\"../icon/like.png\";import look from\"../icon/look.png\";import open from\"../icon/open.png\";import close from\"../icon/close.png\";import Head from\"./Header\";import home from\"../icon/home.png\";import notes from\"../icon/notes.png\";import messages from\"../icon/messages.png\";import notification from\"../icon/notification.png\";import about from\"../icon/about.png\";import Footer from\"./Footer\";import{Link}from\"react-navi\";import user from\"../icon/user.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var gfm=require('remark-gfm');var MainUsers=/*#__PURE__*/function(_Component){_inherits(MainUsers,_Component);var _super=_createSuper(MainUsers);function MainUsers(_props){var _this;_classCallCheck(this,MainUsers);_this=_super.call(this,_props);_this.components={code:function code(_ref){var node=_ref.node,inline=_ref.inline,className=_ref.className,children=_ref.children,props=_objectWithoutProperties(_ref,_excluded);var match=/language-(\\w+)/.exec(className||'');return!inline&&match?/*#__PURE__*/_jsx(SyntaxHighlighter,_objectSpread({style:tomorrow,language:match[1],PreTag:\"div\",children:String(children).replace(/\\n$/,'')},props)):/*#__PURE__*/_jsx(\"code\",_objectSpread(_objectSpread({className:className},props),{},{children:children}));}};_this.handleChangeTextarea=function(event){if(event.target.value===\"\"){_this.setState({textNews:\"Текст статьи\"});}else{_this.setState({textNews:event.target.value});}};_this.handleChangeInput=function(event){if(event.target.value===\"\"){_this.setState({heading:\"Текст заголовка\"});}else{_this.setState({heading:event.target.value});}};_this.newInputText=function(event){_this.setState({clicked_new_post:true,show_textarea:true});// event.target\n// a.innerHTML = `\n//   <textarea onChange={this.handleChangeTextarea} placeholder=\"Что у Вас нового?\" id=\"text_news\">\n//\n//   </textarea>\n// `\n};_this.createChat=function(event){var data={to_uid:Number(_this.state.id)};fetch(\"/api/create_chats\",{method:\"POST\",body:JSON.stringify(data)}).then(function(response){return response.json();}).then(function(res){console.log(res);if(res.status.code===0){window.location.href=\"/messages?cid=\".concat(res.data);}}).catch(function(error){console.log(error);});};_this.onKeyDown=function(event){// 'event.key' will return the key as a string: 'Tab'\n// 'event.keyCode' will return the key code as a number: Tab = '9'\n// You can use either of them\nif(event.keyCode===9){// Prevent the default action to not lose focus when tab\nevent.preventDefault();// Get the cursor position\nvar _event$target=event.target,selectionStart=_event$target.selectionStart,selectionEnd=_event$target.selectionEnd;// update the state\n_this.setState(function(prevState){return{lyrics:prevState.lyrics.substring(0,selectionStart)+\"\\t\"+// '\\t' = tab, size can be change by CSS\nprevState.lyrics.substring(selectionEnd)};},// update the cursor position after the state is updated\nfunction(){_this.textAreaRef.current.selectionStart=_this.textAreaRef.current.selectionEnd=selectionStart+1;});}};_this.state={name:\"React\"};_this.state={error:false,isLoaded:false,result:null,mainFeed:null,textNews:\"...\",heading:\"Текст заголовка\",prevState:null,clicked_new_post:false,show_textarea:false,id:0,data:[],notUser:false,close:true,load:false};return _this;}_createClass(MainUsers,[{key:\"like\",value:function like(uuid){var data={feeds_uuid:uuid};fetch(\"/api/like\",{method:\"POST\",body:JSON.stringify(data)}).then(function(response){return response.json();}).then(function(res){if(res.status.code===0){console.log(res);document.getElementById(uuid).innerHTML=res.data.count;}console.log(res);// this.setState({\n//     isLoaded: \"access\",\n//     result: res.data\n// });\n// if (!result.ok) {\n//     throw new Error(\"Network response was not ok\");\n// }\n// return result.blob();\n}).catch(function(error){console.log(error);});}},{key:\"previewClick\",value:function previewClick(className){var preview=document.getElementsByClassName(className)[0];console.log(preview);preview.classList.toggle(\"preview_swap\");}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"/api/authentication\",{method:\"POST\",body:JSON.stringify({\"finger\":window.localStorage.getItem(\"finger\")})}).then(function(response){return response.json();}).then(function(res){if(res.status.code===0){_this2.setState({auth:true,data:res.data,feed:res.feed,load:true,notification_count:res.notification_count,notification:res.notification,token:res.token,messagesCount:res.count_message});}else{_this2.sendLogs(res.status.message);_this2.delete_cookie(\"access_token\");}var urlParams=new URLSearchParams(window.location.search);var id=urlParams.get('id');console.log(id);var path=\"/api/user/\".concat(id);fetch(path,{method:\"GET\"}).then(function(response){return response.json();}).then(function(res){if(res.status.code===0&&res.data.length>0){_this2.setState({isLoaded:true,id:id,result:res.data,mainFeed:res.feed,notUser:false});}else{_this2.setState({isLoaded:false,result:{},notUser:true,error:true});}}).catch(function(error){_this2.setState({isLoaded:false,error:true,result:{},notUser:true});console.log(error);});}).catch(function(error){_this2.setState({auth:false,load:true});});}},{key:\"feedNew\",value:function feedNew(){var data={title:\"\",value:document.getElementById(\"text_news\").value,close:this.state.close};if(data.value.length>3){fetch(\"/api/feed\",{method:\"POST\",body:JSON.stringify(data)}).then(function(response){return response.json();}).then(function(res){console.log(res);if(res.status.code===0){window.location.reload();}}).catch(function(error){console.log(error);});}}},{key:\"unixToDateTime\",value:function unixToDateTime(unixTimestamp){var milliseconds=unixTimestamp*1000;var dateObject=new Date(milliseconds);return dateObject.toLocaleString();}},{key:\"render\",value:function render(){var _result$,_result$2,_result$3,_result$4,_result$5,_this3=this;var _this$state=this.state,isLoaded=_this$state.isLoaded,textNews=_this$state.textNews,mainFeed=_this$state.mainFeed,result=_this$state.result,clicked_new_post=_this$state.clicked_new_post;return/*#__PURE__*/_jsx(\"div\",{className:\"wrapper-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"vertical_menu\",className:\"reviews-menu\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-vertical-nav\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nav-item\",children:/*#__PURE__*/_jsxs(Link,{className:\"nav-value\",href:\"/feeds\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon-image\",children:/*#__PURE__*/_jsx(\"img\",{src:notes,alt:\"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0438\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-value\",children:\"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0438\"})]})}),!this.state.load?/*#__PURE__*/_jsx(\"div\",{className:\"loader-flex\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loader-small\"})}):this.state.auth?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"nav-item\",children:/*#__PURE__*/_jsxs(Link,{className:\"nav-value\",href:\"/user?id=\".concat(this.state.data[0].id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon-image\",children:/*#__PURE__*/_jsx(\"img\",{src:user,alt:\"messages\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-value\",children:\"\\u0412\\u0430\\u0448\\u0430 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-item\",children:[this.state.messagesCount?/*#__PURE__*/_jsx(\"div\",{className:\"counter-notification\",id:\"counter_notification\",path:\"/messages\",children:this.state.messagesCount>10?\"10+\":this.state.messagesCount}):null,/*#__PURE__*/_jsxs(Link,{className:\"nav-value\",href:\"/messages\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon-image\",children:/*#__PURE__*/_jsx(\"img\",{src:messages,alt:\"messages\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-value\",children:\"\\u041C\\u0435\\u0441\\u0441\\u0435\\u043D\\u0434\\u0436\\u0435\\u0440\"})]})]})]}):null]})}),/*#__PURE__*/_jsx(\"div\",{className:\"content-wall-views\",children:isLoaded?/*#__PURE__*/_jsxs(\"div\",{className:\"feed-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main-place-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"main-place-photo-column child\",children:/*#__PURE__*/_jsx(\"img\",{src:result[0].avatar_url,alt:(_result$=result[0])===null||_result$===void 0?void 0:_result$.login})}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-place-info-column child\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"main-place name\",children:((_result$2=result[0])===null||_result$2===void 0?void 0:_result$2.name)?\" \"+result[0].name:\" \"+result[0].login}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-place\",children:[\"Email:\",Number(this.state.id)===this.state.data[0].id?((_result$3=result[0])===null||_result$3===void 0?void 0:_result$3.email)?\" \"+result[0].email:\" не указан\":\" Скрыт либо не задан\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-place\",children:[\"\\u041A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u044F:\",((_result$4=result[0])===null||_result$4===void 0?void 0:_result$4.company)?\" \"+result[0].company:\" не указана\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-place\",children:[\"\\u041B\\u043E\\u043A\\u0430\\u0446\\u0438\\u044F:\",((_result$5=result[0])===null||_result$5===void 0?void 0:_result$5.location)?\" \"+result[0].location:\" не указана\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"main-place\",children:Number(this.state.id)!==this.state.data[0].id?/*#__PURE__*/_jsx(\"div\",{className:\"button-default\",onClick:this.createChat,children:\"\\u041D\\u0430\\u0447\\u0430\\u0442\\u044C \\u0434\\u0438\\u0430\\u043B\\u043E\\u0433\"}):null})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"feed-wrapper-item background-white\",children:Number(this.state.id)===this.state.data[0].id?result===null||result===void 0?void 0:result.map(function(res){return/*#__PURE__*/_jsxs(\"div\",{className:\"feed-item-value\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-data\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"photo-wrapper\",children:/*#__PURE__*/_jsx(\"img\",{src:res===null||res===void 0?void 0:res.avatar_url,alt:res===null||res===void 0?void 0:res.login},\"asdmmmmasd\")},\"aksdlkasd\"),/*#__PURE__*/_jsx(\"div\",{className:\"value-post placeholder-main-feed\",id:\"main_input\",onClick:!clicked_new_post?_this3.newInputText:null,children:_this3.state.clicked_new_post?/*#__PURE__*/_jsx(\"div\",{className:\"textarea-hide\",children:/*#__PURE__*/_jsx(TextareaAutosize,{className:\"feed-textarea\",onChange:_this3.handleChangeTextarea,autoFocus:true,placeholder:\"\\u0427\\u0442\\u043E \\u0443 \\u0412\\u0430\\u0441 \\u043D\\u043E\\u0432\\u043E\\u0433\\u043E?\",id:\"text_news\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"fake-textarea\",children:\"\\u0427\\u0442\\u043E \\u0443 \\u0412\\u0430\\u0441 \\u043D\\u043E\\u0432\\u043E\\u0433\\u043E?\"})})]},res.avatar_url),_this3.state.clicked_new_post?/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-flex-end create-feed-wrapper-button\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"button-default-icon\",onClick:function onClick(){_this3.setState(function(prevState){return{close:!prevState.close};});},children:_this3.state.close?/*#__PURE__*/_jsx(\"img\",{src:close,alt:\"close\"}):/*#__PURE__*/_jsx(\"img\",{src:open,alt:\"open\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"button-default\",onClick:function onClick(){return _this3.previewClick(\"preview-news\");},children:\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u0447\\u0442\\u043E \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u043B\\u043E\\u0441\\u044C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"button-default\",onClick:function onClick(){return _this3.feedNew();},children:\"\\u041E\\u043F\\u0443\\u0431\\u043B\\u0438\\u043A\\u043E\\u0432\\u0430\\u0442\\u044C\"})]}):/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-news\",children:/*#__PURE__*/_jsx(\"div\",{className:\"feed-wrapper-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"feed-item-value\",children:/*#__PURE__*/_jsx(\"div\",{className:\"wrapper-data\",children:/*#__PURE__*/_jsx(ReactMarkdown,{className:\"value-post\",remarkPlugins:[gfm],components:_this3.components,children:textNews})})})})})]});}):null}),mainFeed===null||mainFeed===void 0?void 0:mainFeed.map(function(data){var _data$value;return/*#__PURE__*/_jsxs(\"div\",{className:\"feed-wrapper-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"feed-item-value\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-data\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"photo-wrapper\",children:/*#__PURE__*/_jsx(\"img\",{src:data===null||data===void 0?void 0:data.photo,alt:data===null||data===void 0?void 0:data.user},\"asdmmmmasd\")},\"aksdlkasd\"),/*#__PURE__*/_jsx(\"div\",{className:\"value-post\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"feed-item-title\",children:[data===null||data===void 0?void 0:data.user,/*#__PURE__*/_jsx(\"div\",{className:\"feed-item-datetime\",children:_this3.unixToDateTime(data===null||data===void 0?void 0:data.date_time)})]})})]},\"asldk\"),/*#__PURE__*/_jsx(\"div\",{className:\"wrapper-data\",children:/*#__PURE__*/_jsx(ReactMarkdown,{className:\"value-post\",remarkPlugins:[gfm],components:_this3.components,children:(data===null||data===void 0?void 0:(_data$value=data.value)===null||_data$value===void 0?void 0:_data$value.substring(0,200))+\"...\"})},\"asldk\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-flex-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"button-default\",onClick:function onClick(e){e.preventDefault();window.location.href=\"/post?uuid=\".concat(data===null||data===void 0?void 0:data.ID);},children:\"\\u041F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u0435\\u0435\"}),/*#__PURE__*/_jsx(\"div\",{className:\"button-default-icon-disable\",children:(data===null||data===void 0?void 0:data.close)?/*#__PURE__*/_jsx(\"img\",{src:close,alt:\"close\"}):/*#__PURE__*/_jsx(\"img\",{src:open,alt:\"open\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"like_wrapper wrapper-flex-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"like\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"like-item\",children:/*#__PURE__*/_jsx(\"img\",{src:look,alt:\"like\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"like-item\",children:/*#__PURE__*/_jsx(\"span\",{className:\"like-count\",children:data===null||data===void 0?void 0:data.look_count})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"like\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"like-item\",onClick:function onClick(){return _this3.like(data===null||data===void 0?void 0:data.ID);},children:/*#__PURE__*/_jsx(\"img\",{src:like,alt:\"like\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"like-item\",children:/*#__PURE__*/_jsx(\"span\",{className:\"like-count\",id:data===null||data===void 0?void 0:data.ID,children:data===null||data===void 0?void 0:data.count_like})})]})]})]})]},data===null||data===void 0?void 0:data.ID);})]}):this.state.notUser&&this.state.auth?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{\"background\":\"#FF9898\"},className:\"title-page\",children:\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{className:\"error-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error-page\",children:\"\\u0422\\u0430\\u043A\\u043E\\u0433\\u043E \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F \\u043D\\u0435 \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442\"})})]}):this.state.error?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"error-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error-page\",children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0443\\u0439\\u0442\\u0435\\u0441\\u044C \\u0447\\u0442\\u043E\\u0431\\u044B \\u043F\\u0440\\u043E\\u0441\\u043C\\u0430\\u0442\\u0440\\u0438\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u0438 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439.\"})})}):/*#__PURE__*/_jsx(\"div\",{className:\"feed-wrapper\",style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"loader\"})})})]})});}}]);return MainUsers;}(Component);export default MainUsers;","map":{"version":3,"sources":["/Users/andrejsmelev-sampanov/Documents/org_devcodemylife/frontend/src/components/MainUser.js"],"names":["React","Component","ReactMarkdown","Prism","SyntaxHighlighter","tomorrow","TextareaAutosize","like","look","open","close","Head","home","notes","messages","notification","about","Footer","Link","user","gfm","require","MainUsers","props","components","code","node","inline","className","children","match","exec","String","replace","handleChangeTextarea","event","target","value","setState","textNews","handleChangeInput","heading","newInputText","clicked_new_post","show_textarea","createChat","data","to_uid","Number","state","id","fetch","method","body","JSON","stringify","then","response","json","res","console","log","status","window","location","href","catch","error","onKeyDown","keyCode","preventDefault","selectionStart","selectionEnd","prevState","lyrics","substring","textAreaRef","current","name","isLoaded","result","mainFeed","notUser","load","uuid","feeds_uuid","document","getElementById","innerHTML","count","preview","getElementsByClassName","classList","toggle","localStorage","getItem","auth","feed","notification_count","token","messagesCount","count_message","sendLogs","message","delete_cookie","urlParams","URLSearchParams","search","get","path","length","title","reload","unixTimestamp","milliseconds","dateObject","Date","toLocaleString","avatar_url","login","email","company","map","previewClick","feedNew","photo","unixToDateTime","date_time","e","ID","look_count","count_like","display","justifyContent","alignItems"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport ReactMarkdown from 'react-markdown'\nimport {Prism as SyntaxHighlighter} from 'react-syntax-highlighter'\nimport {tomorrow} from \"react-syntax-highlighter/dist/esm/styles/prism\"\nimport TextareaAutosize from 'react-textarea-autosize';\nimport like from \"../icon/like.png\";\nimport look from \"../icon/look.png\";\nimport open from \"../icon/open.png\"\nimport close from \"../icon/close.png\"\nimport Head from \"./Header\";\nimport home from \"../icon/home.png\";\nimport notes from \"../icon/notes.png\";\nimport messages from \"../icon/messages.png\";\nimport notification from \"../icon/notification.png\";\nimport about from \"../icon/about.png\";\nimport Footer from \"./Footer\";\nimport {Link} from \"react-navi\";\nimport user from \"../icon/user.png\";\n\n\nconst gfm = require('remark-gfm')\n\n\n\nclass MainUsers extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: \"React\"\n    };\n    this.state = {\n      error: false,\n      isLoaded: false,\n      result: null,\n      mainFeed: null,\n      textNews: \"...\",\n      heading: \"Текст заголовка\",\n      prevState: null,\n      clicked_new_post: false,\n      show_textarea: false,\n      id: 0,\n      data: [],\n      notUser: false,\n      close: true,\n      load: false,\n    }\n  }\n\n  like(uuid) {\n    let data = {\n      feeds_uuid: uuid\n    }\n    fetch(\"/api/like\", {\n      method: \"POST\",\n      body: JSON.stringify(data)\n    })\n        .then(response => response.json())\n        .then(res => {\n          if (res.status.code === 0){\n            console.log(res)\n\n            document.getElementById(uuid).innerHTML = res.data.count\n          }\n          console.log(res)\n          // this.setState({\n          //     isLoaded: \"access\",\n          //     result: res.data\n          // });\n          // if (!result.ok) {\n          //     throw new Error(\"Network response was not ok\");\n          // }\n          // return result.blob();\n        })\n        .catch(error => {\n          console.log(error)\n        });\n  }\n\n  previewClick (className){\n    const preview = document.getElementsByClassName(className)[0]\n    console.log(preview)\n    preview.classList.toggle(\"preview_swap\")\n  }\n\n\n  componentDidMount() {\n\n    fetch(\"/api/authentication\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        \"finger\": window.localStorage.getItem(\"finger\")\n      })\n    })\n        .then(response => response.json())\n        .then(res => {\n          if (res.status.code === 0){\n            this.setState({\n              auth: true,\n              data: res.data,\n              feed: res.feed,\n              load: true,\n              notification_count: res.notification_count,\n              notification: res.notification,\n              token: res.token,\n              messagesCount: res.count_message\n            });\n\n\n          }else{\n            this.sendLogs(res.status.message)\n            this.delete_cookie(\"access_token\")\n          }\n\n          const urlParams = new URLSearchParams(window.location.search);\n          const id = urlParams.get('id');\n          console.log(id)\n          let path = `/api/user/${id}`\n\n          fetch(path, {\n            method: \"GET\"\n          })\n              .then(response => response.json())\n              .then(res => {\n                if (res.status.code === 0 && res.data.length > 0){\n                  this.setState({\n                    isLoaded: true,\n                    id: id,\n                    result: res.data,\n                    mainFeed: res.feed,\n                    notUser: false\n                  });\n                }else{\n                  this.setState({\n                    isLoaded: false,\n                    result: {},\n                    notUser: true,\n                    error: true\n                  });\n                }\n              })\n              .catch(error => {\n                this.setState({\n                  isLoaded: false,\n                  error: true,\n                  result: {},\n                  notUser: true\n                });\n                console.log(error)\n              });\n\n        })\n        .catch(error => {\n          this.setState({\n            auth: false,\n            load: true,\n          });\n        });\n\n\n\n  }\n\n  components = {\n    code({node, inline, className, children, ...props}) {\n      const match = /language-(\\w+)/.exec(className || '')\n      return !inline && match ? (\n          <SyntaxHighlighter style={tomorrow} language={match[1]} PreTag=\"div\" children={String(children).replace(/\\n$/, '')} {...props} />\n      ) : (\n          <code className={className} {...props}>\n            {children}\n          </code>\n      )\n    }\n  }\n\n  feedNew() {\n    let data = {\n      title: \"\",\n      value: document.getElementById(\"text_news\").value,\n      close: this.state.close\n    }\n\n    if (data.value.length > 3) {\n      fetch(\"/api/feed\", {\n        method: \"POST\",\n        body: JSON.stringify(data)\n      })\n          .then(response => response.json())\n          .then(res => {\n            console.log(res)\n            if (res.status.code === 0) {\n              window.location.reload()\n            }\n\n          })\n          .catch(error => {\n            console.log(error)\n          });\n    }\n  }\n\n  unixToDateTime(unixTimestamp) {\n    const milliseconds = unixTimestamp * 1000\n    const dateObject = new Date(milliseconds)\n\n    return dateObject.toLocaleString()\n  }\n\n  handleChangeTextarea = (event) => {\n    if (event.target.value === \"\"){\n      this.setState({textNews: \"Текст статьи\"})\n    }else{\n      this.setState({textNews: event.target.value})\n    }\n  }\n\n  handleChangeInput = (event) => {\n    if (event.target.value === \"\") {\n      this.setState({heading: \"Текст заголовка\"})\n    }else{\n      this.setState({heading: event.target.value})\n    }\n\n  }\n\n\n\n  newInputText = (event) => {\n    this.setState({clicked_new_post: true, show_textarea: true})\n\n\n    // event.target\n    // a.innerHTML = `\n    //   <textarea onChange={this.handleChangeTextarea} placeholder=\"Что у Вас нового?\" id=\"text_news\">\n    //\n    //   </textarea>\n    // `\n  }\n\n  createChat = event => {\n    let data = {\n      to_uid: Number(this.state.id)\n    }\n\n\n    fetch(\"/api/create_chats\", {\n      method: \"POST\",\n      body: JSON.stringify(data)\n    })\n        .then(response => response.json())\n        .then(res => {\n          console.log(res)\n          if (res.status.code === 0) {\n            window.location.href = `/messages?cid=${res.data}`\n          }\n\n        })\n        .catch(error => {\n          console.log(error)\n        });\n\n  }\n\n  onKeyDown = event => {\n    // 'event.key' will return the key as a string: 'Tab'\n    // 'event.keyCode' will return the key code as a number: Tab = '9'\n    // You can use either of them\n    if (event.keyCode === 9) {\n      // Prevent the default action to not lose focus when tab\n      event.preventDefault();\n\n      // Get the cursor position\n      const { selectionStart, selectionEnd } = event.target;\n      // update the state\n      this.setState(\n          prevState => ({\n            lyrics:\n                prevState.lyrics.substring(0, selectionStart) +\n                \"\\t\" + // '\\t' = tab, size can be change by CSS\n                prevState.lyrics.substring(selectionEnd)\n          }),\n          // update the cursor position after the state is updated\n          () => {\n            this.textAreaRef.current.selectionStart = this.textAreaRef.current.selectionEnd =\n                selectionStart + 1;\n          }\n      );\n    }\n  };\n\n\n\n  render(){\n    let { isLoaded, textNews, mainFeed, result, clicked_new_post } = this.state;\n    return (\n        <div className=\"wrapper-content\">\n          <div className=\"content\">\n            <div id=\"vertical_menu\" className=\"reviews-menu\">\n              <div className=\"wrapper-vertical-nav\" >\n                <div\n                    className=\"nav-item\"\n\n                >\n                  <Link className=\"nav-value\" href=\"/feeds\">\n                    <div  className=\"icon-image\" >\n                      <img  src={notes} alt=\"Новости\" />\n                    </div>\n                    <div className=\"nav-value\">\n                      Новости\n                    </div>\n                  </Link>\n                </div>\n                {\n                  !this.state.load ?\n                      <div className=\"loader-flex\">\n                        <div className=\"loader-small\" />\n                      </div>\n                      :\n                      this.state.auth ?\n                          <div>\n                            <div\n                                className=\"nav-item\"\n\n                            >\n                              <Link className=\"nav-value\" href={`/user?id=${this.state.data[0].id}`}>\n                                <div  className=\"icon-image\" >\n                                  <img src={user} alt=\"messages\" />\n                                </div>\n                                <div className=\"nav-value\">\n                                  Ваша страница\n                                </div>\n                              </Link>\n                            </div>\n                            <div\n                                className=\"nav-item\"\n\n                            >\n                              {\n                                this.state.messagesCount ?\n                                    <div className=\"counter-notification\" id=\"counter_notification\" path=\"/messages\" >\n                                      {\n                                        this.state.messagesCount > 10 ?\n                                            \"10+\"\n                                            :\n                                            this.state.messagesCount\n                                      }\n                                    </div>\n                                    :\n                                    null\n                              }\n                              <Link className=\"nav-value\" href=\"/messages\">\n                                <div  className=\"icon-image\" >\n                                  <img src={messages} alt=\"messages\" />\n                                </div>\n                                <div className=\"nav-value\">\n                                  Мессенджер\n                                </div>\n                              </Link>\n                            </div>\n                          </div>\n                          : null\n                }\n                {/*<div*/}\n                {/*    className=\"nav-item\"*/}\n\n\n                {/*>*/}\n                {/*  <Link href=\"/about\" className=\"nav-value\">*/}\n                {/*    <div  className=\"icon-image\">*/}\n                {/*      <img path=\"/about\" src={about}/>*/}\n                {/*    </div>*/}\n                {/*    <div className=\"nav-value\">*/}\n                {/*      Поддержка*/}\n                {/*    </div>*/}\n                {/*  </Link>*/}\n\n                {/*</div>*/}\n              </div>\n            </div>\n            <div className=\"content-wall-views\">\n              {\n                isLoaded ?\n                    <div className=\"feed-wrapper\">\n                      <div className=\"main-place-wrapper\">\n                        <div className=\"main-place-photo-column child\">\n                          <img src={result[0].avatar_url} alt={result[0]?.login}/>\n                        </div>\n                        <div className=\"main-place-info-column child\">\n                          <div className=\"main-place name\">\n                            {\n                              result[0]?.name ?\n                                  \" \"+result[0].name\n                                  :\n                                  \" \"+result[0].login\n                            }\n                          </div>\n                          <div className=\"main-place\">\n                            Email:\n                            {\n                              Number(this.state.id) === this.state.data[0].id ?\n                                  result[0]?.email ?\n                                      \" \"+result[0].email\n                                      :\n                                      \" не указан\"\n                                  :\n                                  \" Скрыт либо не задан\"\n\n                            }\n                          </div>\n                          <div className=\"main-place\">\n                            Компания:\n                            {\n                              result[0]?.company ?\n                                  \" \"+result[0].company\n                                  :\n                                  \" не указана\"\n                            }\n                          </div>\n                          <div className=\"main-place\">\n                            Локация:\n                            {\n                              result[0]?.location ?\n                                  \" \"+result[0].location\n                                  :\n                                  \" не указана\"\n                            }\n                          </div>\n                          <div className=\"main-place\">\n\n                            {\n                              Number(this.state.id) !== this.state.data[0].id ?\n                                  <div className=\"button-default\" onClick={this.createChat}>\n                                    Начать диалог\n                                  </div>\n                                  :\n                                  null\n                            }\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"feed-wrapper-item background-white\">\n\n                        {\n                          Number(this.state.id)  === this.state.data[0].id ?\n                              result?.map(res =>\n                                  <div className=\"feed-item-value\">\n\n                                    <div key={res.avatar_url} className=\"wrapper-data\">\n                                      <div key=\"aksdlkasd\" className=\"photo-wrapper\">\n                                        <img key=\"asdmmmmasd\" src={res?.avatar_url} alt={res?.login}/>\n                                      </div>\n\n                                      <div className=\"value-post placeholder-main-feed\" id=\"main_input\" onClick={\n                                        !clicked_new_post ? this.newInputText : null\n                                      }>\n\n                                        {\n                                          this.state.clicked_new_post ?\n                                              <div className=\"textarea-hide\">\n                                                <TextareaAutosize className=\"feed-textarea\" onChange={this.handleChangeTextarea}\n                                                                  autoFocus={true} placeholder=\"Что у Вас нового?\" id=\"text_news\">\n\n                                                </TextareaAutosize>\n                                              </div>\n\n                                              :\n                                              <div className=\"fake-textarea\">Что у Вас нового?</div>\n                                        }\n                                      </div>\n                                    </div>\n\n                                    {\n                                      this.state.clicked_new_post ?\n                                          <div className=\"wrapper-flex-end create-feed-wrapper-button\">\n                                            <div className=\"button-default-icon\" onClick={() => {\n                                              this.setState(prevState => ({\n                                                close: !prevState.close\n                                              }));\n                                            }}>\n                                              {\n                                                this.state.close ?\n                                                    <img src={close} alt=\"close\"/>\n                                                    :\n                                                    <img src={open} alt=\"open\"/>\n                                              }\n\n                                            </div>\n                                            <div className=\"button-default\" onClick={() => this.previewClick(\"preview-news\")}>Показать что получилось</div>\n                                            <div className=\"button-default\" onClick={() => this.feedNew()}>Опубликовать</div>\n                                          </div>\n                                          :\n                                          <div />\n                                    }\n                                    <div className=\"preview-news\">\n\n                                      <div className=\"feed-wrapper-item\">\n                                        <div className=\"feed-item-value\">\n                                          <div className=\"wrapper-data\">\n                                            <ReactMarkdown className=\"value-post\" remarkPlugins={[gfm]} components={this.components}>\n                                              {textNews}\n                                            </ReactMarkdown>\n                                          </div>\n                                        </div>\n                                      </div>\n\n                                    </div>\n                                  </div>\n                              )\n                              :\n                              null\n                        }\n\n\n                      </div>\n                      {mainFeed?.map(data =>\n                          <div key={data?.ID}  className=\"feed-wrapper-item\">\n                            {/*<div className=\"feed-item-title\">*/}\n                            {/*  <div className=\"wrapper-flex-start\">{data?.title}</div>*/}\n                            {/*  <div key=\"mamdmkamasdasd\" className=\"author-name wrapper-flex-end unselectable\" onClick={(e) => {*/}\n                            {/*    e.preventDefault();*/}\n                            {/*    window.open('https://github.com/' + data?.user, \"_blank\");*/}\n                            {/*  }}>*/}\n                            {/*    {data?.user}*/}\n                            {/*  </div>*/}\n                            {/*</div>*/}\n                            {/*<div className=\"feed-item-datetime\">*/}\n                            {/*  {this.unixToDateTime(data?.date_time)}*/}\n                            {/*</div>*/}\n                            <div className=\"feed-item-value\">\n                              <div key=\"asldk\" className=\"wrapper-data\">\n                                <div key=\"aksdlkasd\"  className=\"photo-wrapper\">\n                                  <img key=\"asdmmmmasd\" src={data?.photo} alt={data?.user} />\n                                </div>\n                                <div className=\"value-post\">\n                                  <div className=\"feed-item-title\">\n                                    {data?.user}\n                                    <div className=\"feed-item-datetime\">\n                                      {this.unixToDateTime(data?.date_time)}\n                                    </div>\n                                  </div>\n                                </div>\n                              </div>\n                              <div key=\"asldk\" className=\"wrapper-data\">\n                                {/*<div key=\"aksdlkasd\"  className=\"photo-wrapper\">*/}\n\n                                {/*</div>*/}\n                                <ReactMarkdown className=\"value-post\" remarkPlugins={[gfm]} components={this.components}>\n                                  {data?.value?.substring(0, 200) + \"...\"}\n                                </ReactMarkdown>\n                              </div>\n                            </div>\n                            <div className=\"wrapper-bottom\">\n                              <div className=\"wrapper-flex-start\">\n                                <div className=\"button-default\" onClick={(e) => {\n                                  e.preventDefault();\n                                  window.location.href = `/post?uuid=${data?.ID}`\n                                }}>Подробнее</div>\n                                <div className=\"button-default-icon-disable\" >\n                                  {\n                                    data?.close ?\n                                        <img src={close} alt=\"close\"/>\n                                        :\n                                        <img src={open} alt=\"open\"/>\n                                  }\n\n                                </div>\n                              </div>\n                              <div className=\"like_wrapper wrapper-flex-end\">\n                                <div className=\"like\">\n                                  <div className=\"like-item\">\n                                    <img src={look}  alt=\"like\"/>\n                                  </div>\n                                  <div className=\"like-item\">\n                                            <span className=\"like-count\">\n                                                {data?.look_count}\n                                            </span>\n                                  </div>\n                                </div>\n                                <div className=\"like\">\n\n                                  <div className=\"like-item\" onClick={() => this.like(data?.ID)}>\n                                    <img src={like}  alt=\"like\"/>\n                                  </div>\n                                  <div className=\"like-item\">\n                              <span className=\"like-count\" id={data?.ID}>\n                                  {data?.count_like}\n                              </span>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                      )}\n\n                    </div>\n                  :\n                    this.state.notUser && this.state.auth ?\n                        <div>\n                          <div style={{\"background\": \"#FF9898\"}} className=\"title-page\">\n                            Ошибка\n                          </div>\n                          <div className=\"error-wrapper\">\n\n                            <div className=\"error-page\">\n                              Такого пользователя не существует\n                            </div>\n                          </div>\n                        </div>\n                      :\n                        this.state.error ?\n                            <div>\n                              {/*<div style={{\"background\": \"#FF9898\"}} className=\"title-page\">*/}\n                              {/*  Ошибка*/}\n                              {/*</div>*/}\n                              <div className=\"error-wrapper\">\n\n                                <div className=\"error-page\">\n                                  Авторизуйтесь чтобы просматривать профили пользователей.\n                                </div>\n                              </div>\n                            </div>\n                          :\n                            <div className=\"feed-wrapper\" style={{\n                              display: \"flex\",\n                              justifyContent: \"center\",\n                              alignItems: \"center\"\n                            }}>\n                              <div className=\"loader\" />\n                            </div>\n              }\n            </div>\n          </div>\n        </div>\n    )\n  }\n}\n\nexport default MainUsers;\n"]},"metadata":{},"sourceType":"module"}