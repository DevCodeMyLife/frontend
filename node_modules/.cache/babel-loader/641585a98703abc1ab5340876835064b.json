{"ast":null,"code":"import _classCallCheck from\"/Users/andrejsmelev-sampanov/Documents/org_devcodemylife/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/andrejsmelev-sampanov/Documents/org_devcodemylife/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/andrejsmelev-sampanov/Documents/org_devcodemylife/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/andrejsmelev-sampanov/Documents/org_devcodemylife/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/andrejsmelev-sampanov/Documents/org_devcodemylife/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import TextareaAutosize from\"react-textarea-autosize\";import send from\"../icon/send.png\";import k from\"../icon/k.png\";import song from\"../sound/pop.mp3\";import home from\"../icon/home.png\";import notes from\"../icon/notes.png\";import messages from\"../icon/messages.png\";import notification from\"../icon/notification.png\";import about from\"../icon/about.png\";import Footer from\"./Footer\";import{Link}from\"react-navi\";import Centrifuge from\"centrifuge\";import Head from\"./Header\";import user from\"../icon/user.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CONFIG={url:document.location.host===\"localhost\"?\"ws://\".concat(document.location.host,\"/cent/connection/websocket\"):\"wss://\".concat(document.location.host,\"/cent/connection/websocket\")};var Messages=/*#__PURE__*/function(_Component){_inherits(Messages,_Component);var _super=_createSuper(Messages);function Messages(props){var _this2;_classCallCheck(this,Messages);_this2=_super.call(this,props);_this2.createMessage=function(event){_this2.setState({_createMessage:true});};_this2.allMessage=function(event){_this2.setState({_createMessage:false});if(_this2.state.cent_channel&&_this2.state.cid){_this2.state.cent_channel.unsubscribe(_this2.state.cid);}console.log(window.location.pathname);if(event)window.history.pushState({urlPath:\"/messages\"},\"\",\"/messages\");fetch(\"/api/messages\",{method:\"GET\"}).then(function(response){return response.json();}).then(function(res){var _res$status;if((res===null||res===void 0?void 0:(_res$status=res.status)===null||_res$status===void 0?void 0:_res$status.code)===0){_this2.setState({chats:res===null||res===void 0?void 0:res.data,dialog:false,messages:[]});}}).catch(function(error){console.log(error);});};_this2.sendMessageButton=function(event){var _this=_assertThisInitialized(_this2);var data={value:document.getElementById(\"message_chat\").value,c_id:_this2.state.cid};_this.clearInput(document.getElementById(\"message_chat\"));if(data.value.length>0){fetch(\"/api/messages\",{method:\"POST\",body:JSON.stringify(data)}).then(function(response){return response.json();}).then(function(res){}).catch(function(error){console.log(error);});}};_this2.sendMessage=function(event){var _this=_assertThisInitialized(_this2);var data={value:event.target.value,c_id:_this2.state.cid};if(_this2.state.cent_channel){_this2.state.cent_channel.publish({\"input\":{\"typing\":_this2.state.user[0].login}}).then(function(){// success ack from Centrifugo received\n},function(err){// publish call failed with error\n});}if(event.keyCode===13){event.preventDefault();_this.clearInput(event.target);if(data.value.length>0){fetch(\"/api/messages\",{method:\"POST\",body:JSON.stringify(data)}).then(function(response){return response.json();}).then(function(res){_this.clearInput(event.target);}).catch(function(error){console.log(error);});}}};_this2.changerPage=function(){var urlParams=new URLSearchParams(window.location.search);var cid=urlParams.get('cid');if(cid){_this2.setState({cid:cid,chats:[1]});_this2.openDialog(cid);}else{_this2.allMessage();}};_this2.state={auth:_this2.props.auth,cent:{},_createMessage:false,chats:[],messages:[],dialog:false,cid:null,user:_this2.props.user,cent_channel:null,typing:null,context:new AudioContext(),audio:new Audio(song),loadCent:false,messagesCount:0,load:false,data:null};return _this2;}_createClass(Messages,[{key:\"unixToDateTime\",value:function unixToDateTime(unixTimestamp){var milliseconds=unixTimestamp*1000;var dateObject=new Date(milliseconds);return dateObject.toLocaleString();}},{key:\"clearInput\",value:function clearInput(target){target.value=target.value.replace(/[\\n\\r]/g,'');target.value='';target.style.height=\"50px\";}},{key:\"openDialog\",value:function openDialog(cid){var _this3=this;var _this=this;var path=\"/api/messages/\".concat(cid);window.history.pushState({urlPath:\"/messages?cid=\".concat(cid)},\"\",\"/messages?cid=\".concat(cid));var cent_channel=_this.state.cent.subscribe(cid,function(message){var _message$data,_message$data$input,_message$data4;console.log(\"sub :\"+cid);var data=_this.state.messages;// console.log(message?.data.login, _this.state.user[0].login)\n// if (message?.data.login !== _this.state.user[0].login){\n//     // let notification = new Notification(message.data.login,\n//     //     { body: message.data.value.substring(0, 40) + \"...\", dir: 'auto', icon: message.data.avatar_url}\n//     // );\n//     // console.log(notification)\n//     _this.state.context.resume().then(() => {\n//         _this.state.audio.play();\n//         console.log('Playback resumed successfully');\n//     });\n//\n//\n// }\nif(((_message$data=message.data)===null||_message$data===void 0?void 0:(_message$data$input=_message$data.input)===null||_message$data$input===void 0?void 0:_message$data$input.typing)!==_this.state.user[0].login){var _message$data2,_message$data2$input;if((_message$data2=message.data)===null||_message$data2===void 0?void 0:(_message$data2$input=_message$data2.input)===null||_message$data2$input===void 0?void 0:_message$data2$input.typing){var _message$data3,_message$data3$input;_this.setState({typing:\"\".concat(message===null||message===void 0?void 0:(_message$data3=message.data)===null||_message$data3===void 0?void 0:(_message$data3$input=_message$data3.input)===null||_message$data3$input===void 0?void 0:_message$data3$input.typing,\" \\u043D\\u0430\\u0431\\u0438\\u0440\\u0430\\u0435\\u0442 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435.\")});document.getElementById(\"hide-typing\").style.display=\"block\";setTimeout(function(){document.getElementById(\"hide-typing\").style.display=\"none\";},5000);}}if(message===null||message===void 0?void 0:(_message$data4=message.data)===null||_message$data4===void 0?void 0:_message$data4.login){var _message$data5,_message$data6;console.log(message===null||message===void 0?void 0:(_message$data5=message.data)===null||_message$data5===void 0?void 0:_message$data5.login,_this.state.user[0].login);if((message===null||message===void 0?void 0:(_message$data6=message.data)===null||_message$data6===void 0?void 0:_message$data6.login)!==_this.state.user[0].login){_this.state.context.resume().then(function(){_this.state.audio.play();console.log('Playback resumed successfully');});}data.push(message===null||message===void 0?void 0:message.data);_this.setState({messages:data});if(document.getElementById('messages'))document.getElementById('messages').scrollTo({top:document.getElementById('messages').scrollHeight,left:0,behavior:'smooth'});}// document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight\n});this.setState({cent_channel:cent_channel});fetch(path,{method:\"GET\"}).then(function(response){return response.json();}).then(function(res){var _res$status2;if((res===null||res===void 0?void 0:(_res$status2=res.status)===null||_res$status2===void 0?void 0:_res$status2.code)===0){_this3.setState({messages:res===null||res===void 0?void 0:res.data,dialog:true,cid:cid});document.getElementById('messages').scrollTo({top:document.getElementById('messages').scrollHeight,left:0,behavior:'smooth'});}}).catch(function(error){console.log(error);});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this4=this;fetch(\"/api/authentication\",{method:\"POST\",body:JSON.stringify({\"finger\":window.localStorage.getItem(\"finger\")})}).then(function(response){return response.json();}).then(function(res){if(res.status.code===0){_this4.setState({auth:true,load:true,data:res.data,user:res.data,notification_count:res.notification_count,notification:res.notification,token:res.token,messagesCount:res.count_message});}else{_this4.sendLogs(res.status.message);_this4.delete_cookie(\"access_token\");}}).catch(function(error){_this4.setState({auth:false,load:true});});this.centrifuge=new Centrifuge(CONFIG.url);this.centrifuge.setToken(\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJPbmxpbmUgSldUIEJ1aWxkZXIiLCJpYXQiOjE2MjYwMzI0MzEsImV4cCI6MTc4Mzc5ODgzMSwiYXVkIjoid3d3LmV4YW1wbGUuY29tIiwic3ViIjoianJvY2tldEBleGFtcGxlLmNvbSIsIkdpdmVuTmFtZSI6IkpvaG5ueSIsIlN1cm5hbWUiOiJSb2NrZXQiLCJFbWFpbCI6Impyb2NrZXRAZXhhbXBsZS5jb20iLCJSb2xlIjpbIk1hbmFnZXIiLCJQcm9qZWN0IEFkbWluaXN0cmF0b3IiXX0.meN08YC99TeOJZWLbMKCwxhtOA_s3RaZ1QH-YARC6CM\");var _this=this;this.centrifuge.on('connect',function(){_this.changerPage();console.log(\"[ centrifuge connected ]\");});this.centrifuge.on('disconnect',function(){console.log(\"[ centrifuge disconnected ]\");});this.centrifuge.connect();this.centrifuge.subscribe(\"public\",function(message){console.log(message);});this.setState({cent:this.centrifuge,loadCent:true});}},{key:\"render\",value:function render(){var _this5=this;if(this.state.loadCent){var _this$state$messages;return/*#__PURE__*/_jsx(\"div\",{className:\"wrapper-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"vertical_menu\",className:\"reviews-menu\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-vertical-nav\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nav-item\",children:/*#__PURE__*/_jsxs(Link,{className:\"nav-value\",href:\"/feeds\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon-image\",children:/*#__PURE__*/_jsx(\"img\",{src:notes,alt:\"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0438\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-value\",children:\"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0438\"})]})}),!this.state.load?/*#__PURE__*/_jsx(\"div\",{className:\"loader-flex\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loader-small\"})}):this.state.auth?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"nav-item\",children:/*#__PURE__*/_jsxs(Link,{className:\"nav-value\",href:\"/user?id=\".concat(this.state.data[0].id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon-image\",children:/*#__PURE__*/_jsx(\"img\",{src:user,alt:\"messages\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-value\",children:\"\\u0412\\u0430\\u0448\\u0430 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-item\",children:[this.state.messagesCount?/*#__PURE__*/_jsx(\"div\",{className:\"counter-notification\",id:\"counter_notification\",path:\"/messages\",children:this.state.messagesCount>10?\"10+\":this.state.messagesCount}):null,/*#__PURE__*/_jsxs(Link,{className:\"nav-value\",href:\"/messages\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon-image\",children:/*#__PURE__*/_jsx(\"img\",{src:messages,alt:\"messages\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-value\",children:\"\\u041C\\u0435\\u0441\\u0441\\u0435\\u043D\\u0434\\u0436\\u0435\\u0440\"})]})]})]}):null]})}),/*#__PURE__*/_jsx(\"div\",{className:\"content-wall-views\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-content-default\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"messages-control-nav\",children:/*#__PURE__*/_jsx(\"div\",{className:\"messages-control-nav-item\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button-default\",onClick:this.allMessage,children:\"\\u0412\\u0441\\u0435 \\u0434\\u0438\\u0430\\u043B\\u043E\\u0433\\u0438\"})})}),this.state._createMessage?/*#__PURE__*/_jsx(\"div\",{className:\"wrapper-maker-message\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"maker-message\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"wrapper-maker-message-input\",children:/*#__PURE__*/_jsx(\"input\",{className:\"in\",placeholder:\"\\u041A\\u043E\\u043C\\u0443\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"wrapper-maker-message-input\",children:/*#__PURE__*/_jsx(TextareaAutosize,{placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0412\\u0430\\u0448\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",minRows:15})}),/*#__PURE__*/_jsx(\"div\",{className:\"wrapper-flex-end\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button-default\",children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"})})]})}):this.state.chats.length<1?/*#__PURE__*/_jsx(\"div\",{className:\"error-page\",children:\"\\u0412\\u044B \\u043D\\u0435 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043B\\u0438 \\u0435\\u0449\\u0435 \\u043D\\u0438 \\u043E\\u0434\\u043D\\u043E\\u0433\\u043E \\u0434\\u0438\\u0430\\u043B\\u043E\\u0433\\u0430, \\u043B\\u0438\\u0431\\u043E \\u0412\\u0430\\u043C \\u043D\\u0438\\u043A\\u0442\\u043E \\u043D\\u0435 \\u043D\\u0430\\u043F\\u0438\\u0441\\u0430\\u043B.\"}):this.state.dialog?/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-chat\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-items\",id:\"messages\",style:{background:\"#fff\"},children:[(_this$state$messages=this.state.messages)===null||_this$state$messages===void 0?void 0:_this$state$messages.map(function(message){return _this5.state.user[0].id===message.uid?/*#__PURE__*/_jsx(\"div\",{className:\"message-item flex-end\",style:{// display: \"flex\",\nboxShadow:\"none\"// flexFlow: \"column wrap\"\n},children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-data\",style:{flexDirection:\"row\",borderRadius:\"10px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"photo-wrapper\",children:/*#__PURE__*/_jsx(\"img\",{src:message.avatar_url,alt:message.login,onClick:function onClick(e){e.preventDefault();window.location.href=\"/user?id=\".concat(message.uid);}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"value-post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"feed-item-title\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"link-user\",onClick:function onClick(e){e.preventDefault();window.location.href=\"/user?id=\".concat(message===null||message===void 0?void 0:message.uid);},children:message===null||message===void 0?void 0:message.login}),/*#__PURE__*/_jsx(\"div\",{className:\"feed-item-datetime\",children:_this5.unixToDateTime(message===null||message===void 0?void 0:message.date_time)})]}),/*#__PURE__*/_jsx(\"p\",{children:message.value})]})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"message-item flex-start\",style:{// display: \"flex\",\nboxShadow:\"none\"// flexFlow: \"column wrap\"\n},children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-data\",style:{flexDirection:\"row\",borderRadius:\"10px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"photo-wrapper\",children:/*#__PURE__*/_jsx(\"img\",{src:message.avatar_url,alt:message.login,onClick:function onClick(e){e.preventDefault();window.location.href=\"/user?id=\".concat(message.uid);}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"value-post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"feed-item-title\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"link-user\",onClick:function onClick(e){e.preventDefault();window.location.href=\"/user?id=\".concat(message===null||message===void 0?void 0:message.uid);},children:message===null||message===void 0?void 0:message.login}),/*#__PURE__*/_jsx(\"div\",{className:\"feed-item-datetime\",children:_this5.unixToDateTime(message===null||message===void 0?void 0:message.date_time)})]}),/*#__PURE__*/_jsx(\"p\",{children:message.value})]})]})});}),/*#__PURE__*/_jsx(\"div\",{className:\"typing_user\",id:\"typing_user\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"hide-typing\",id:\"hide-typing\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-icon-typing\",children:/*#__PURE__*/_jsx(\"img\",{src:k,alt:\"typing\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"typing-text\",children:this.state.typing})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-input\",children:[/*#__PURE__*/_jsx(TextareaAutosize,{onKeyDown:this.sendMessage,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",autoFocus:true,maxRows:15,id:\"message_chat\",style:{borderRadius:\"30px\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"send-button\",onClick:this.sendMessageButton,children:/*#__PURE__*/_jsx(\"img\",{src:send,alt:\"send\"})})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"wrapper-chats-main\",children:this.state.chats.map(function(chat){var _chat$last_message,_chat$last_message2;return chat.no_read_count?/*#__PURE__*/_jsxs(\"div\",{className:\"feed-wrapper-item-chat chat-flex-row\",style:{marginBottom:0,background:\"#d7e4fc\"},onClick:function onClick(){return _this5.openDialog(chat.c_id);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"photo-wrapper-chat\",children:/*#__PURE__*/_jsx(\"img\",{src:chat.avatar_url,alt:chat.avatar_url})}),/*#__PURE__*/_jsxs(\"div\",{className:\"feed-item-title\",style:{padding:\"13px\"},children:[chat.login,/*#__PURE__*/_jsx(\"div\",{className:\"feed-item-datetime\",children:((_chat$last_message=chat.last_message)===null||_chat$last_message===void 0?void 0:_chat$last_message.substring(0,40))+\"...\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"feed-wrapper-item-chat chat-flex-row\",style:{marginBottom:0},onClick:function onClick(){return _this5.openDialog(chat.c_id);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"photo-wrapper-chat\",children:/*#__PURE__*/_jsx(\"img\",{src:chat.avatar_url,alt:chat.avatar_url})}),/*#__PURE__*/_jsxs(\"div\",{className:\"feed-item-title\",style:{padding:\"13px\"},children:[chat.login,/*#__PURE__*/_jsx(\"div\",{className:\"feed-item-datetime\",children:((_chat$last_message2=chat.last_message)===null||_chat$last_message2===void 0?void 0:_chat$last_message2.substring(0,40))+\"...\"})]})]});})})]})})]})});}else{return null;}}}]);return Messages;}(Component);export default Messages;","map":{"version":3,"sources":["/Users/andrejsmelev-sampanov/Documents/org_devcodemylife/frontend/src/components/Messages.js"],"names":["React","Component","TextareaAutosize","send","k","song","home","notes","messages","notification","about","Footer","Link","Centrifuge","Head","user","CONFIG","url","document","location","host","Messages","props","createMessage","event","setState","_createMessage","allMessage","state","cent_channel","cid","unsubscribe","console","log","window","pathname","history","pushState","urlPath","fetch","method","then","response","json","res","status","code","chats","data","dialog","catch","error","sendMessageButton","_this","value","getElementById","c_id","clearInput","length","body","JSON","stringify","sendMessage","target","publish","login","err","keyCode","preventDefault","changerPage","urlParams","URLSearchParams","search","get","openDialog","auth","cent","typing","context","AudioContext","audio","Audio","loadCent","messagesCount","load","unixTimestamp","milliseconds","dateObject","Date","toLocaleString","replace","style","height","path","subscribe","message","input","display","setTimeout","resume","play","push","scrollTo","top","scrollHeight","left","behavior","localStorage","getItem","notification_count","token","count_message","sendLogs","delete_cookie","centrifuge","setToken","on","connect","id","background","map","uid","boxShadow","flexDirection","borderRadius","avatar_url","e","href","unixToDateTime","date_time","chat","no_read_count","marginBottom","padding","last_message","substring"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport send from \"../icon/send.png\"\nimport k from \"../icon/k.png\"\nimport song from \"../sound/pop.mp3\"\nimport home from \"../icon/home.png\";\nimport notes from \"../icon/notes.png\";\nimport messages from \"../icon/messages.png\";\nimport notification from \"../icon/notification.png\";\nimport about from \"../icon/about.png\";\nimport Footer from \"./Footer\";\nimport {Link} from \"react-navi\";\nimport Centrifuge from \"centrifuge\";\nimport Head from \"./Header\";\nimport user from \"../icon/user.png\";\n\nconst CONFIG = {\n    url: document.location.host === \"localhost\" ? `ws://${document.location.host}/cent/connection/websocket` : `wss://${document.location.host}/cent/connection/websocket`\n};\n\n\nclass Messages extends Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            auth: this.props.auth,\n            cent: {},\n            _createMessage: false,\n            chats: [],\n            messages: [],\n            dialog: false,\n            cid: null,\n            user: this.props.user,\n            cent_channel: null,\n            typing: null,\n            context: new AudioContext(),\n            audio: new Audio(song),\n            loadCent: false,\n            messagesCount: 0,\n            load: false,\n            data: null\n        }\n    }\n\n    createMessage = (event) => {\n        this.setState({\n            _createMessage: true\n        })\n    }\n\n    allMessage = (event) => {\n        this.setState({\n            _createMessage: false\n        })\n\n        if (this.state.cent_channel && this.state.cid) {\n            this.state.cent_channel.unsubscribe(this.state.cid)\n        }\n\n        console.log(window.location.pathname)\n        if (event)\n            window.history.pushState({urlPath:`/messages`},\"\",`/messages`)\n\n        fetch(\"/api/messages\", {\n            method: \"GET\"\n        })\n            .then(response => response.json())\n            .then(res => {\n                if (res?.status?.code === 0){\n                    this.setState({\n                        chats: res?.data,\n                        dialog: false,\n                        messages: []\n                    })\n                }\n            })\n            .catch(error => {\n                console.log(error)\n            });\n    }\n\n\n\n    unixToDateTime(unixTimestamp) {\n        const milliseconds = unixTimestamp * 1000\n        const dateObject = new Date(milliseconds)\n\n        return dateObject.toLocaleString()\n    }\n\n    sendMessageButton = (event) => {\n        let _this = this\n        let data = {\n            value: document.getElementById(\"message_chat\").value,\n            c_id: this.state.cid\n        }\n\n        _this.clearInput(document.getElementById(\"message_chat\"))\n\n        if (data.value.length > 0) {\n            fetch(\"/api/messages\", {\n                method: \"POST\",\n                body: JSON.stringify(data)\n            })\n                .then(response => response.json())\n                .then(res => {})\n                .catch(error => {\n                    console.log(error)\n                });\n        }\n\n    }\n\n    sendMessage = (event) => {\n        let _this = this\n        let data = {\n            value: event.target.value,\n            c_id: this.state.cid\n        }\n\n\n\n        if (this.state.cent_channel){\n            this.state.cent_channel.publish(\n                {\n                    \"input\": {\n                        \"typing\": this.state.user[0].login\n                    }\n                }).then(\n                function() {\n                    // success ack from Centrifugo received\n                }, function(err) {\n                    // publish call failed with error\n                }\n            );\n        }\n\n        if (event.keyCode===13){\n            event.preventDefault();\n            _this.clearInput(event.target)\n\n            if (data.value.length > 0) {\n                fetch(\"/api/messages\", {\n                    method: \"POST\",\n                    body: JSON.stringify(data)\n                })\n                    .then(response => response.json())\n                    .then(res => {\n                        _this.clearInput(event.target)\n                    })\n                    .catch(error => {\n                        console.log(error)\n                    });\n            }\n\n        }\n    }\n\n    clearInput(target) {\n        target.value = target.value.replace(/[\\n\\r]/g, '')\n        target.value = ''\n        target.style.height = \"50px\"\n    }\n\n    openDialog(cid) {\n        let _this = this\n        let path = `/api/messages/${cid}`\n\n        window.history.pushState({urlPath:`/messages?cid=${cid}`},\"\",`/messages?cid=${cid}`)\n\n        let cent_channel = _this.state.cent.subscribe(cid, function (message) {\n            console.log(\"sub :\" + cid)\n            let data = _this.state.messages\n\n            // console.log(message?.data.login, _this.state.user[0].login)\n            // if (message?.data.login !== _this.state.user[0].login){\n            //     // let notification = new Notification(message.data.login,\n            //     //     { body: message.data.value.substring(0, 40) + \"...\", dir: 'auto', icon: message.data.avatar_url}\n            //     // );\n            //     // console.log(notification)\n            //     _this.state.context.resume().then(() => {\n            //         _this.state.audio.play();\n            //         console.log('Playback resumed successfully');\n            //     });\n            //\n            //\n            // }\n\n\n            if (message.data?.input?.typing !== _this.state.user[0].login){\n                if (message.data?.input?.typing){\n                    _this.setState({\n                        typing: `${message?.data?.input?.typing} набирает сообщение.`\n                    })\n                    document.getElementById(\"hide-typing\").style.display = \"block\"\n                    setTimeout(() => {\n                        document.getElementById(\"hide-typing\").style.display = \"none\"\n                    }, 5000)\n\n                }\n            }\n\n            if (message?.data?.login){\n                console.log(message?.data?.login, _this.state.user[0].login)\n                if (message?.data?.login !== _this.state.user[0].login){\n                    _this.state.context.resume().then(() => {\n                        _this.state.audio.play();\n                        console.log('Playback resumed successfully');\n                    });\n                }\n                data.push(message?.data)\n                _this.setState({messages: data})\n                if (document.getElementById('messages'))\n                    document.getElementById('messages').scrollTo({top: document.getElementById('messages').scrollHeight, left: 0, behavior: 'smooth' });\n            }\n\n\n\n            // document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight\n        });\n\n        this.setState({\n            cent_channel: cent_channel\n        })\n\n        fetch(path, {\n            method: \"GET\"\n        })\n            .then(response => response.json())\n            .then(res => {\n                if (res?.status?.code === 0){\n                    this.setState({\n                        messages: res?.data,\n                        dialog: true,\n                        cid: cid\n                    })\n\n                    document.getElementById('messages').scrollTo({top: document.getElementById('messages').scrollHeight, left: 0, behavior: 'smooth' });\n\n\n                }\n            })\n            .catch(error => {\n                console.log(error)\n            });\n    }\n\n    changerPage = () => {\n        const urlParams = new URLSearchParams(window.location.search);\n        const cid = urlParams.get('cid');\n\n        if (cid){\n            this.setState({\n                cid: cid,\n                chats: [1]\n            })\n\n            this.openDialog(cid)\n        }else{\n            this.allMessage()\n        }\n    }\n\n    componentDidMount() {\n\n        fetch(\"/api/authentication\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                \"finger\": window.localStorage.getItem(\"finger\")\n            })\n        })\n            .then(response => response.json())\n            .then(res => {\n                if (res.status.code === 0){\n\n                    this.setState({\n                        auth: true,\n                        load: true,\n                        data: res.data,\n                        user: res.data,\n                        notification_count: res.notification_count,\n                        notification: res.notification,\n                        token: res.token,\n                        messagesCount: res.count_message\n                    });\n                }else{\n                    this.sendLogs(res.status.message)\n                    this.delete_cookie(\"access_token\")\n                }\n\n\n\n\n\n            })\n            .catch(error => {\n                this.setState({\n                    auth: false,\n                    load: true\n                });\n            });\n\n        this.centrifuge = new Centrifuge(CONFIG.url);\n        this.centrifuge.setToken(\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJPbmxpbmUgSldUIEJ1aWxkZXIiLCJpYXQiOjE2MjYwMzI0MzEsImV4cCI6MTc4Mzc5ODgzMSwiYXVkIjoid3d3LmV4YW1wbGUuY29tIiwic3ViIjoianJvY2tldEBleGFtcGxlLmNvbSIsIkdpdmVuTmFtZSI6IkpvaG5ueSIsIlN1cm5hbWUiOiJSb2NrZXQiLCJFbWFpbCI6Impyb2NrZXRAZXhhbXBsZS5jb20iLCJSb2xlIjpbIk1hbmFnZXIiLCJQcm9qZWN0IEFkbWluaXN0cmF0b3IiXX0.meN08YC99TeOJZWLbMKCwxhtOA_s3RaZ1QH-YARC6CM\");\n\n\n        let _this = this\n        this.centrifuge.on('connect', function() {\n            _this.changerPage()\n            console.log(\"[ centrifuge connected ]\")\n        });\n        this.centrifuge.on('disconnect', function(){\n            console.log(\"[ centrifuge disconnected ]\")\n        });\n        this.centrifuge.connect();\n\n\n        this.centrifuge.subscribe(\"public\", function(message) {\n            console.log(message);\n        });\n\n\n        this.setState({\n            cent: this.centrifuge,\n            loadCent: true\n        })\n\n    }\n\n    render() {\n\n        if (this.state.loadCent) {\n            return (\n                <div className=\"wrapper-content\">\n                    <div className=\"content\">\n                        <div id=\"vertical_menu\" className=\"reviews-menu\">\n                            <div className=\"wrapper-vertical-nav\" >\n                                <div\n                                    className=\"nav-item\"\n\n                                >\n                                    <Link className=\"nav-value\" href=\"/feeds\">\n                                        <div  className=\"icon-image\" >\n                                            <img  src={notes} alt=\"Новости\" />\n                                        </div>\n                                        <div className=\"nav-value\">\n                                            Новости\n                                        </div>\n                                    </Link>\n                                </div>\n                                {\n                                    !this.state.load ?\n                                        <div className=\"loader-flex\">\n                                            <div className=\"loader-small\" />\n                                        </div>\n                                        :\n                                        this.state.auth ?\n                                            <div>\n                                                <div\n                                                    className=\"nav-item\"\n\n                                                >\n                                                    <Link className=\"nav-value\" href={`/user?id=${this.state.data[0].id}`}>\n                                                        <div  className=\"icon-image\" >\n                                                            <img src={user} alt=\"messages\" />\n                                                        </div>\n                                                        <div className=\"nav-value\">\n                                                            Ваша страница\n                                                        </div>\n                                                    </Link>\n                                                </div>\n                                                <div\n                                                    className=\"nav-item\"\n\n                                                >\n                                                    {\n                                                        this.state.messagesCount ?\n                                                            <div className=\"counter-notification\" id=\"counter_notification\" path=\"/messages\" >\n                                                                {\n                                                                    this.state.messagesCount > 10 ?\n                                                                        \"10+\"\n                                                                        :\n                                                                        this.state.messagesCount\n                                                                }\n                                                            </div>\n                                                            :\n                                                            null\n                                                    }\n                                                    <Link className=\"nav-value\" href=\"/messages\">\n                                                        <div  className=\"icon-image\" >\n                                                            <img src={messages} alt=\"messages\" />\n                                                        </div>\n                                                        <div className=\"nav-value\">\n                                                            Мессенджер\n                                                        </div>\n                                                    </Link>\n                                                </div>\n                                            </div>\n                                            : null\n                                }\n                                {/*<div*/}\n                                {/*    className=\"nav-item\"*/}\n\n\n                                {/*>*/}\n                                {/*    <Link href=\"/about\" className=\"nav-value\">*/}\n                                {/*        <div  className=\"icon-image\">*/}\n                                {/*            <img path=\"/about\" src={about}/>*/}\n                                {/*        </div>*/}\n                                {/*        <div className=\"nav-value\">*/}\n                                {/*            Поддержка*/}\n                                {/*        </div>*/}\n                                {/*    </Link>*/}\n\n                                {/*</div>*/}\n                            </div>\n                        </div>\n                        <div className=\"content-wall-views\">\n                            <div className=\"wrapper-content-default\">\n                                <div className=\"messages-control-nav\">\n                                    <div className=\"messages-control-nav-item\">\n                                        <div className=\"button-default\" onClick={this.allMessage}>\n                                            Все диалоги\n                                        </div>\n                                        {/*<div className=\"button-default\" onClick={this.createMessage}>*/}\n                                        {/*    Написать*/}\n                                        {/*</div>*/}\n                                    </div>\n                                </div>\n                                {\n                                    this.state._createMessage ?\n                                        <div className=\"wrapper-maker-message\">\n                                            <div className=\"maker-message\">\n                                                <div className=\"wrapper-maker-message-input\">\n                                                    <input className=\"in\" placeholder=\"Кому\"/>\n                                                </div>\n                                                <div className=\"wrapper-maker-message-input\">\n                                                    <TextareaAutosize\n                                                        placeholder=\"Введите Ваше сообщение\"\n                                                        minRows={15}\n                                                    >\n\n                                                    </TextareaAutosize>\n                                                </div>\n\n                                                <div className=\"wrapper-flex-end\">\n                                                    <div className=\"button-default\">\n                                                        Отправить\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        :\n                                        this.state.chats.length < 1 ?\n                                            <div className=\"error-page\">\n                                                Вы не создали еще ни одного диалога, либо Вам никто не написал.\n                                            </div>\n                                            :\n                                            this.state.dialog ?\n                                                <div className=\"wrapper-chat\">\n                                                    <div className=\"wrapper-items\" id=\"messages\" style={{\n                                                        background: \"#fff\"\n                                                    }}>\n                                                        {\n\n                                                            this.state.messages?.map(message =>\n                                                                this.state.user[0].id === message.uid ?\n                                                                    <div className=\"message-item flex-end\" style={{\n                                                                        // display: \"flex\",\n                                                                        boxShadow: \"none\",\n                                                                        // flexFlow: \"column wrap\"\n                                                                    }}>\n                                                                        <div className=\"wrapper-data\" style={{\n                                                                            flexDirection: \"row\",\n                                                                            borderRadius: \"10px\"\n                                                                        }}>\n                                                                            <div className=\"photo-wrapper\">\n                                                                                <img src={message.avatar_url} alt={message.login}\n                                                                                     onClick={(e) => {\n                                                                                         e.preventDefault();\n                                                                                         window.location.href = `/user?id=${message.uid}`\n                                                                                     }}/>\n                                                                            </div>\n                                                                            <div className=\"value-post\">\n                                                                                <div className=\"feed-item-title\">\n                                                                                    <div className=\"link-user\" onClick={(e) => {\n                                                                                        e.preventDefault();\n                                                                                        window.location.href = `/user?id=${message?.uid}`\n                                                                                    }}>\n                                                                                        {message?.login}\n                                                                                    </div>\n                                                                                    <div className=\"feed-item-datetime\">\n                                                                                        {this.unixToDateTime(message?.date_time)}\n                                                                                    </div>\n                                                                                </div>\n                                                                                <p>\n                                                                                    {message.value}\n                                                                                </p>\n                                                                            </div>\n                                                                        </div>\n                                                                    </div>\n                                                                    :\n                                                                    <div className=\"message-item flex-start\" style={{\n                                                                        // display: \"flex\",\n                                                                        boxShadow: \"none\",\n                                                                        // flexFlow: \"column wrap\"\n                                                                    }}>\n                                                                        <div className=\"wrapper-data\" style={{\n                                                                            flexDirection: \"row\",\n                                                                            borderRadius: \"10px\"\n                                                                        }}>\n                                                                            <div className=\"photo-wrapper\">\n                                                                                <img src={message.avatar_url} alt={message.login}\n                                                                                     onClick={(e) => {\n                                                                                         e.preventDefault();\n                                                                                         window.location.href = `/user?id=${message.uid}`\n                                                                                     }}/>\n                                                                            </div>\n                                                                            <div className=\"value-post\">\n                                                                                <div className=\"feed-item-title\">\n                                                                                    <div className=\"link-user\" onClick={(e) => {\n                                                                                        e.preventDefault();\n                                                                                        window.location.href = `/user?id=${message?.uid}`\n                                                                                    }}>\n                                                                                        {message?.login}\n                                                                                    </div>\n                                                                                    <div className=\"feed-item-datetime\">\n                                                                                        {this.unixToDateTime(message?.date_time)}\n                                                                                    </div>\n                                                                                </div>\n                                                                                <p>\n                                                                                    {message.value}\n                                                                                </p>\n                                                                            </div>\n                                                                        </div>\n                                                                    </div>\n                                                            )\n                                                        }\n                                                        <div className=\"typing_user\" id=\"typing_user\">\n                                                            <div className=\"hide-typing\" id=\"hide-typing\">\n                                                                <div className=\"image-icon-typing\">\n                                                                    <img src={k} alt=\"typing\"/>\n                                                                </div>\n                                                                <div className=\"typing-text\">\n                                                                    {this.state.typing}\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                    <div className=\"wrapper-input\">\n                                                        <TextareaAutosize\n                                                            onKeyDown={this.sendMessage}\n                                                            placeholder=\"Введите сообщение\"\n                                                            autoFocus={true}\n                                                            maxRows={15}\n                                                            id=\"message_chat\"\n                                                            style={{\n                                                                borderRadius: \"30px\"\n                                                            }}\n                                                        >\n\n                                                        </TextareaAutosize>\n                                                        <div className=\"send-button\" onClick={this.sendMessageButton}>\n                                                            <img src={send} alt=\"send\"/>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                :\n                                                <div className=\"wrapper-chats-main\">\n                                                    {\n                                                        this.state.chats.map(chat =>\n                                                            chat.no_read_count ?\n                                                                <div className=\"feed-wrapper-item-chat chat-flex-row\"\n                                                                     style={{marginBottom: 0, background: \"#d7e4fc\"}}\n                                                                     onClick={() => this.openDialog(chat.c_id)}>\n                                                                    <div className=\"photo-wrapper-chat\">\n                                                                        <img src={chat.avatar_url} alt={chat.avatar_url}/>\n                                                                    </div>\n                                                                    <div className=\"feed-item-title\" style={{\n                                                                        padding: \"13px\",\n\n                                                                    }}>\n                                                                        {chat.login}\n                                                                        <div className=\"feed-item-datetime\">\n                                                                            {chat.last_message?.substring(0, 40) + \"...\"}\n                                                                        </div>\n                                                                    </div>\n                                                                    {/*<div className=\"feed-item-title\" style={{*/}\n                                                                    {/*    textAlign: \"center\",*/}\n                                                                    {/*    padding: \"5px\",*/}\n                                                                    {/*    width: \"170px\"*/}\n                                                                    {/*}}>*/}\n                                                                    {/*    <div className=\"last-message\">*/}\n                                                                    {/*        {chat.last_message?.substring(0, 40) + \"...\"}*/}\n                                                                    {/*    </div>*/}\n                                                                    {/*</div>*/}\n                                                                </div>\n                                                                :\n                                                                <div className=\"feed-wrapper-item-chat chat-flex-row\"\n                                                                     style={{marginBottom: 0}}\n                                                                     onClick={() => this.openDialog(chat.c_id)}>\n                                                                    <div className=\"photo-wrapper-chat\">\n                                                                        <img src={chat.avatar_url} alt={chat.avatar_url}/>\n                                                                    </div>\n                                                                    <div className=\"feed-item-title\" style={{\n                                                                        padding: \"13px\",\n                                                                    }}>\n                                                                        {chat.login}\n                                                                        <div className=\"feed-item-datetime\">\n                                                                            {chat.last_message?.substring(0, 40) + \"...\"}\n                                                                        </div>\n                                                                    </div>\n                                                                    {/*<div className=\"feed-item-title\" style={{*/}\n                                                                    {/*    textAlign: \"center\",*/}\n                                                                    {/*    padding: \"5px\",*/}\n                                                                    {/*    width: \"170px\"*/}\n                                                                    {/*}}>*/}\n                                                                    {/*    <div className=\"last-message\">*/}\n                                                                    {/*        {chat.last_message?.substring(0, 40) + \"...\"}*/}\n                                                                    {/*    </div>*/}\n                                                                    {/*</div>*/}\n                                                                </div>\n                                                        )\n                                                    }\n                                                </div>\n\n\n                                }\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        }else{\n            return null\n        }\n    }\n}\n\nexport default Messages;\n"]},"metadata":{},"sourceType":"module"}