(()=>{"use strict";var e={344:e=>{e.exports=require("remark-gfm")}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,a),l.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.p="",(()=>{require("css-ssr");const e=require("path");var t=a.n(e);const n=require("fs");var r=a.n(n);const l=require("react");var o=a.n(l);const i=require("express");var c=a.n(i);const s=require("react-dom/server");var u=a.n(s);const d=require("redux"),m=require("navi"),f=require("react-navi"),p=require("react-toastify"),v=require("react-navi-helmet-async");var h=a.n(v);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}const N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(i,e);var t,a,n,r,l=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(n);if(r){var a=b(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return w(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={store:t.props.store,load:t.props.load,showSettings:!1},t}return t=i,(a=[{key:"render",value:function(){var e=this,t=this.state.store.getState();return o().createElement("header",{className:"head"},o().createElement("div",{className:"rectangle-head"},o().createElement("div",{className:"wrapper-logo unselectable"},o().createElement("div",{className:"place-logo wrapper-inline-block",onClick:function(e){e.preventDefault(),t.auth.user.isAuth?window.location.href="/feeds":window.location.href="/"}},"[ DevCodeMyLife ]")),o().createElement("div",{className:"wrapper-user"},o().createElement("div",{className:"wrapper-auth"},this.state.load?t.auth.user.isAuth?o().createElement("div",{className:"wrapper-auth-photo",style:this.state.showSettings?{background:"#3890FC"}:{}},o().createElement("img",{src:t.auth.user.data.avatar_url,alt:t.auth.user.data.login,onClick:function(){e.setState((function(e){return{showSettings:!e.showSettings}}))}})):null:o().createElement("div",{className:"loader-small"})),this.state.showSettings?o().createElement("div",{className:"settings-user",onMouseLeave:function(){e.setState((function(e){return{showSettings:!e.showSettings}}))},onClick:function(){e.setState((function(e){return{showSettings:!e.showSettings}}))}},o().createElement(f.Link,{href:"/user/".concat(t.auth.user.data.id)},o().createElement("div",{className:"settings-user-item"},t.auth.user.data.login," ",o().createElement("span",{style:{fontSize:"12px",color:"#585858"}}," - Это Вы"))),o().createElement("div",{className:"nav-hidden"},o().createElement("div",{className:"separator"},o().createElement("div",{className:"line-separator"})),o().createElement("div",{className:"settings-user-item",onClick:function(){window.location.href="http://".concat(window.location.host,"/people")}},"Люди"),o().createElement("div",{className:"settings-user-item",onClick:function(){window.location.href="http://".concat(window.location.host,"/feeds")}},"Новости"),o().createElement("div",{className:"settings-user-item",onClick:function(){window.location.href="http://".concat(window.location.host,"/messages")}},"Мессенджер"),o().createElement("div",{className:"settings-user-item",onClick:function(){window.location.href="http://".concat(window.location.host,"/notification")}},"Уведомления")),o().createElement(f.Link,{href:"/settings"},o().createElement("div",{className:"settings-user-item"},"Настройки")),o().createElement("div",{className:"separator"},o().createElement("div",{className:"line-separator"})),o().createElement("div",{className:"settings-user-item",onClick:function(){window.location.href="http://".concat(window.location.host,"/api/logout")}},"Выйти")):null)),o().createElement("div",{className:"to-top",id:"to_top",onClick:function(){(document.body.scrollTop||window.pageYOffset)>0&&window.scroll(0,0)}},"Наверх"))}}])&&y(t.prototype,a),i}(l.Component),k=require("react-syntax-highlighter"),_=a.p+"c3697a9542c4f422024d609419a7bee6.png",S=a.p+"50e8973e803d2efc1cf09498dd5a3119.png",O=a.p+"cc24d62affa1ec8b07cef83739b6cab3.png",C=(a.p,a.p+"b4e7f147d68cb47f2ed9911c9319c536.png");function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}var T=["node","inline","className","children"];function P(){return P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},P.apply(this,arguments)}function j(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return L(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?L(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw l}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function D(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){return R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},R(e,t)}function I(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(i,e);var t,a,n,r,l=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=B(n);if(r){var a=B(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return I(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),A(M(t=l.call(this,e)),"popular",o().createRef()),A(M(t),"getPreferredColorScheme",(function(){var e;null!==(e=window)&&void 0!==e&&e.matchMedia("(prefers-color-scheme: dark)").matches?t.setState({isDark:"dark"}):t.setState({isDark:"light"})})),A(M(t),"handleKeyPress",(function(e){t.setState({isLoaded:"load"});var a=e.target.value;a.length>0?fetch("api/search?"+new URLSearchParams({query:a}),{method:"GET"}).then((function(e){return e.json()})).then((function(e){t.setState({isLoaded:"access",result:e.data.sort((function(e,t){return e.count_like>t.count_like?-1:1}))})})).catch((function(e){t.setState({isLoaded:"error",result:{}})})):fetch("api/feed",{method:"GET"}).then((function(e){return e.json()})).then((function(e){t.setState({isLoaded:"access",result:e.data})})).catch((function(e){t.setState({isLoaded:"error",result:{}})}))})),A(M(t),"handleClickTag",(function(e){var a,n=j(document.getElementById("tags-wrapper-all-tags").parentNode.children);try{for(n.s();!(a=n.n()).done;)a.value.classList.remove("button-select")}catch(e){n.e(e)}finally{n.f()}var r,l=j(document.getElementById("tags-wrapper-default").children);try{for(l.s();!(r=l.n()).done;)r.value.classList.remove("button-select")}catch(e){l.e(e)}finally{l.f()}var o,i=j(e.target.parentNode.children);try{for(i.s();!(o=i.n()).done;)o.value.classList.remove("button-select")}catch(e){i.e(e)}finally{i.f()}t.setState({isLoaded:"load"}),e.target.classList.add("button-select");var c=e.target.getAttribute("action");"top"===c?fetch("api/feed/top",{method:"GET"}).then((function(e){return e.json()})).then((function(e){0===e.status.code&&null!=e.data?t.setState({isLoaded:"access",result:e.data}):t.setState({isLoaded:"access",result:[]})})).catch((function(e){t.setState({isLoaded:"error",result:{}})})):"all"===c?fetch("api/feed",{method:"GET"}).then((function(e){return e.json()})).then((function(e){t.setState({isLoaded:"access",result:e.data.sort((function(e,t){return e.date_time>t.date_time?-1:1}))})})).catch((function(e){t.setState({isLoaded:"error",result:{}})})):fetch("api/feed?params=".concat(c),{method:"GET"}).then((function(e){return e.json()})).then((function(e){t.setState({isLoaded:"access",result:e.data})})).catch((function(e){t.setState({isLoaded:"error",result:{}})}))})),A(M(t),"handlerFocus",(function(e){var a,n=j(document.getElementById("tags-wrapper-all-tags").parentNode.children);try{for(n.s();!(a=n.n()).done;)a.value.classList.remove("button-select")}catch(e){n.e(e)}finally{n.f()}var r,l=j(document.getElementById("tags-wrapper-default").children);try{for(l.s();!(r=l.n()).done;)r.value.classList.remove("button-select")}catch(e){l.e(e)}finally{l.f()}t.setState({isLoaded:"OnFocusSearch"})})),A(M(t),"handlerBlur",(function(e){0===e.target.value.length&&(fetch("api/feed/top",{method:"GET"}).then((function(e){return e.json()})).then((function(e){t.setState({isLoaded:"access",result:e.data})})).catch((function(e){t.setState({isLoaded:"error",result:{}})})),t.popular.current.classList.add("button-select"),t.setState({isLoaded:"access"}))})),A(M(t),"handleHoverOn",(function(e){var t=e.target.querySelector(".descriptions-button");t?t.classList.add("fade-in"):document.querySelector(".descriptions-button").classList.remove("fade-in")})),A(M(t),"handleHoverOff",(function(e){var t=e.target.querySelector(".descriptions-button");t&&t.classList.remove("fade-in"),document.querySelector(".descriptions-button").classList.remove("fade-in")})),A(M(t),"components",{code:function(e){e.node;var t=e.inline,a=e.className,n=e.children,r=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,T),l=/language-(\w+)/.exec(a||"");return!t&&l?o().createElement(k.PrismAsync,P({style,wrapLongLines:!1,language:l[1],showLineNumbers:!1,PreTag:"div",children:String(n).replace(/\n$/,"")},r)):o().createElement("code",P({className:a},r),n)}}),t.state={error:null,isLoaded:"load",result:[],data:null,currentDateTime:(new Date).getTime(),tags:[],isDark:"light",store:t.props.store,likeType:{}},t.state.store.subscribe((function(){t.setState(t.state.store.getState())})),t}return t=i,(a=[{key:"like",value:function(e){var t=this,a={feeds_uuid:e};fetch("api/like",{method:"POST",body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(a){0===a.status.code&&(document.getElementById(e).innerHTML=a.data.count,t.state.likeType[e]=!t.state.likeType[e],t.setState({likeType:t.state.likeType}))})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;this.getPreferredColorScheme(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(t){e.getPreferredColorScheme()})),fetch("api/feed/top",{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:"access",result:t.data})})).catch((function(t){e.setState({isLoaded:"error",result:{}})})),fetch("api/tags",{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.setState({tags:t.data})})).catch((function(t){e.setState({isLoaded:"error",tags:{}})}))}},{key:"unixToDateTime",value:function(e){return new Date(1e3*e).toLocaleString()}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoaded,n=t.result,r=t.tags;return this.state.store.getState().components.settings.feed?o().createElement("div",{style:{display:"flex"}},o().createElement("div",{className:"content-wall-views"},o().createElement("div",{className:"wrapper-feed"},o().createElement("div",{className:"wrapper-search wrapper-inline-block unselectable"},o().createElement("div",null,o().createElement("input",{placeholder:"Например имя автора",onKeyPress:this.handleKeyPress,onFocus:this.handlerFocus,onBlur:this.handlerBlur})),o().createElement("div",{className:"tags-wrapper",id:"tags-wrapper-default"},o().createElement("div",{className:"button-default-tag tags-item unselectable button-select",id:"top",action:"top",onClick:this.handleClickTag,ref:this.popular},"Популярные"),o().createElement("div",{className:"button-default-tag tags-item unselectable",action:"all",onClick:this.handleClickTag},"Новые"))),"load"===a?o().createElement("div",{className:"loader-wrapper feed-wrapper"},o().createElement("div",{className:"loader"})):"error"===a?o().createElement("div",null,o().createElement("div",{className:"not_news"},"Ошибка соединения с сервером. Попробуйте позднее.")):"OnFocusSearch"===a?o().createElement("div",{className:"feed-wrapper"},o().createElement("div",{className:"not_news"},"Начните вводить и мы начнем искать...")):null===n.length?o().createElement("div",{className:"feed-wrapper"},o().createElement("div",{className:"not_news"},"К сожалению показать нечего 🙁")):o().createElement("div",{className:"feed-wrapper"},n.map((function(t){return o().createElement("div",{key:null==t?void 0:t.ID,className:"feed-wrapper-item"},o().createElement(f.Link,{style:{textDecoration:"none"},href:"/post?uuid=".concat(null==t?void 0:t.ID)},""!==(null==t?void 0:t.cover_path)?o().createElement("img",{className:"cover-feed",src:t.cover_path,alt:t.title}):null,o().createElement("div",{className:"feed-item-value"},o().createElement("div",{key:"asldk",className:"wrapper-data"},o().createElement(f.Link,{href:"/user/".concat(null==t?void 0:t.uid)},o().createElement("div",{key:"aksdlkasd",className:"photo-wrapper"},Math.floor((new Date).getTime()/1e3)-Math.floor(new Date(null==t?void 0:t.last_active_at).getTime()/1e3)>120?null:o().createElement("div",{className:"online_user"}),o().createElement("img",{key:"asdmmmmasd",src:null==t?void 0:t.photo,alt:null==t?void 0:t.id}))),o().createElement("div",{className:"value-post"},o().createElement("div",{className:"feed-item-title"},o().createElement(f.Link,{href:"/user/".concat(null==t?void 0:t.uid)},o().createElement("div",{className:"link-user"},null==t?void 0:t.user)),o().createElement("div",{className:"feed-item-datetime"},e.unixToDateTime(null==t?void 0:t.date_time))))),o().createElement("div",{key:"asldkasd",className:"wrapper-data"},o().createElement("div",{className:"title-feed"},null==t?void 0:t.title)))),o().createElement("div",{className:"wrapper-bottom"},o().createElement("div",{className:"like_wrapper wrapper-flex-start"},o().createElement("div",{className:"like",onClick:function(){return e.like(null==t?void 0:t.ID)}},o().createElement("div",{className:"like-item"},"light"===e.state.isDark?o().createElement("img",{src:_,alt:"like"}):o().createElement("img",{src:C,alt:"like"})),o().createElement("div",{className:"like-text"},o().createElement("span",{className:"like-count",id:null==t?void 0:t.ID},null==t?void 0:t.count_like))),o().createElement("div",{className:"like"},o().createElement("div",{className:"like-item"},"light"===e.state.isDark?o().createElement("img",{src:S,alt:"like"}):o().createElement("img",{src:O,alt:"like"})),o().createElement("div",{className:"like-text"},o().createElement("span",{className:"like-count"},null==t?void 0:t.look_count)))),o().createElement("div",{className:"like_wrapper wrapper-flex-end"},null!=t&&t.tag?o().createElement("div",{className:"tags-type"},"#",null==t?void 0:t.tag):null)))}))))),o().createElement("div",{className:"tags-view"},o().createElement("div",{className:"tags-box"},o().createElement("div",{className:"title-box",id:"tags-wrapper-all-tags"},"Теги"),null==r?void 0:r.map((function(t){return o().createElement("div",{className:"button-default-tag tags-item unselectable",action:t.value,onClick:e.handleClickTag},"#",t.value)}))))):o().createElement("div",{className:"content-wall-views"},o().createElement("div",{className:"feed-wrapper"},o().createElement("div",{className:"main-place-wrapper"},o().createElement("p",null,"В разделе Новостей ведутся технические работы."))))}}])&&D(t.prototype,a),i}(l.Component),F=require("react-markdown");var H=a.n(F);const G=require("react-schemaorg"),J=require("react-helmet"),q=require("react-textarea-autosize");var K=a.n(q);const V=a.p+"d7d64c08a52cb40097f32919e8242152.png";function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}var W=["node","inline","className","children"];function $(){return $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},$.apply(this,arguments)}function Y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t){return Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Z(e,t)}function Q(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?X(e):t}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}function te(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ae=a(344),ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(i,e);var t,a,n,r,l=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ee(n);if(r){var a=ee(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return Q(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),te(X(t=l.call(this,e)),"getPreferredColorScheme",(function(){var e;null!==(e=window)&&void 0!==e&&e.matchMedia("(prefers-color-scheme: dark)").matches?t.setState({isDark:"dark"}):t.setState({isDark:"light"})})),te(X(t),"handleKeyPress",(function(){document.getElementById("comments_view").scrollTop=document.getElementById("comments_view").scrollHeight})),te(X(t),"components",{code:function(e){e.node;var t=e.inline,a=e.className,n=e.children,r=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,W),l=/language-(\w+)/.exec(a||"");return!t&&l?o().createElement(k.Prism,$({wrapLongLines:!1,language:l[1],PreTag:"div",children:String(n).replace(/\n$/,"")},r)):o().createElement("code",$({className:a},r),n)}}),t.state={name:"React"},t.state={error:null,isLoaded:!1,result:null,mainFeed:null,feed:null,isLoadedFeed:!1,comments:null,counter:0,auth:!1,load:!1,data:null,notFeed:!1,isDark:"light",user:null},t}return t=i,a=[{key:"like",value:function(e){var t={feeds_uuid:e};fetch("api/like",{method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){0===t.status.code&&(console.log(t),document.getElementById(e).innerHTML=t.data.count+" Нравиться"),console.log(t)})).catch((function(e){console.log(e)}))}},{key:"previewClick",value:function(e){var t=document.getElementsByClassName(e)[0];console.log(t),t.classList.toggle("preview_swap")}},{key:"sendComments",value:function(){var e=this,t={value:document.getElementById("text_comments").value,to_uuid:document.getElementById("place_feed").getAttribute("uuid")};""!==t.value&&fetch("api/comments",{method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){console.log(t),0===t.status.code&&(e.getFeed(),document.getElementById("text_comments").value=""),console.log(t)})).catch((function(e){console.log(e)}))}},{key:"componentWillMount",value:function(){var e=this;this.getPreferredColorScheme(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(t){e.getPreferredColorScheme()})),fetch("api/authentication",{method:"POST"}).then((function(e){return e.json()})).then((function(t){0===t.status.code&&t.data.length>0&&e.setState({isLoaded:!0,auth:!0,result:t.data,data:t.data,mainFeed:t.feed,notification_count:t.notification_count,notification:t.notification,token:t.token,messagesCount:t.count_message})})).catch((function(t){console.log(t),e.setState({isLoaded:!1,result:{}})})),this.getFeed()}},{key:"getFeed",value:function(){var e=this,t=new URL(window.location.href).searchParams.get("uuid"),a="api/feed/".concat(t,"/").concat(window.localStorage.getItem("finger"));""!==t&&fetch(a,{method:"GET"}).then((function(e){return e.json()})).then((function(t){0===t.status.code&&t.data.length>0?e.setState({isLoadedFeed:!0,feed:t.data,comments:t.comments,counter:t.counter,user:t.user,load:!0}):e.setState({isLoadedFeed:!1,feed:t.data,comments:t.comments,counter:t.counter,load:!0,notFeed:!0})})).catch((function(t){console.log(t),e.setState({isLoaded:!1,result:{},load:!0})}))}},{key:"unixToDateTime",value:function(e){return new Date(1e3*e).toLocaleString()}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoadedFeed,n=t.feed,r=t.result,l=t.comments,i=t.counter,c=t.user;return o().createElement("div",{style:{display:"flex"}},o().createElement("div",{className:"content-wall-views"},a?o().createElement("div",{className:"comments-view",id:"comments_view"},o().createElement("div",{className:"rectangle-back"},o().createElement("div",{className:"button-default wrapper-inline-block",onClick:function(){window.history.go(-1)}},"Назад")),n.map((function(t){var a,n;return o().createElement("div",{className:"place-items",id:"place_feed",uuid:null==t?void 0:t.ID},""!==(null==t?void 0:t.cover_path)?o().createElement("img",{className:"cover-feed",src:t.cover_path,alt:t.title}):null,o().createElement(G.JsonLd,{item:{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"DevCodeMyLife",item:"https://devcodemylife.tech"},{"@type":"ListItem",position:2,name:"Все заметки",item:"https://devcodemylife.tech/feed"},{"@type":"ListItem",position:3,name:(null==t?void 0:t.title)||(null==t||null===(a=t.value)||void 0===a?void 0:a.substring(0,30)),item:"https://devcodemylife.tech/post?uuid=".concat(null==t?void 0:t.ID)}]}}),o().createElement(J.Helmet,null,o().createElement("title",null,t.title||(null==t||null===(n=t.value)||void 0===n?void 0:n.substring(0,30))," | DevCodeMyLife"),o().createElement("meta",{name:"Keywords",content:"dev, code, life, messenger, социальная сеть, для разработчиков, "+t.title})),o().createElement("div",{className:"feed-item-value"},o().createElement("div",{key:"asldk",className:"wrapper-data"},o().createElement("div",{key:"aksdlkasd",className:"photo-wrapper"},Math.floor((new Date).getTime()/1e3)-Math.floor(new Date(null==t?void 0:t.last_active_at).getTime()/1e3)>120?null:o().createElement("div",{className:"online_user"}),o().createElement("img",{key:"asdmmmmasd",src:null==t?void 0:t.photo,alt:null==t?void 0:t.user,onClick:function(e){e.preventDefault(),window.location.href="/user/".concat(null==t?void 0:t.uid)}})),o().createElement("div",{className:"value-post"},o().createElement("div",{className:"feed-item-title"},o().createElement("div",{className:"link-user",onClick:function(e){e.preventDefault(),window.location.href="/user/".concat(null==t?void 0:t.uid)}},null==t?void 0:t.user),o().createElement("div",{className:"feed-item-datetime"},e.unixToDateTime(null==t?void 0:t.date_time))))),o().createElement("div",{className:"title-feed"},null==t?void 0:t.title),o().createElement("div",{key:"asldk",className:"wrapper-data"},o().createElement(H(),{className:"value-post",remarkPlugins:[ae],components:e.components},null==t?void 0:t.value))),o().createElement("div",{className:"wrapper-bottom"},o().createElement("div",{className:"like_wrapper wrapper-flex-start"},o().createElement("div",{className:"like",onClick:function(){return e.like(null==t?void 0:t.ID)}},o().createElement("div",{className:"like-item"},"light"===e.state.isDark?o().createElement("img",{src:_,alt:"like"}):o().createElement("img",{src:C,alt:"like"})),o().createElement("div",{className:"like-text"},o().createElement("span",{className:"like-count",id:null==t?void 0:t.ID},null==t?void 0:t.count_like," Нравиться"))),o().createElement("div",{className:"like"},o().createElement("div",{className:"like-item"},"light"===e.state.isDark?o().createElement("img",{src:S,alt:"like"}):o().createElement("img",{src:O,alt:"like"})),o().createElement("div",{className:"like-text"},o().createElement("span",{className:"like-count"},i," Просмотров")))),o().createElement("div",{className:"like_wrapper wrapper-flex-end"},null!=t&&t.tag?o().createElement("div",{className:"tags-type"},"#",null==t?void 0:t.tag):null)),e.state.isLoaded?r.map((function(t){return o().createElement("div",{className:"feed-comments-wrapper-item background-white"},o().createElement("div",{className:"wrapper-comments"},o().createElement("div",{className:"comments-title bottom-line"},"Комментарии"),o().createElement("div",{className:"wall-comments"},e.state.comments.length?l.map((function(t){return o().createElement("div",null,o().createElement("div",{className:"feed-item-value"},o().createElement("div",{className:"feed-item-value"},o().createElement("div",{key:"asldk",className:"wrapper-data"},o().createElement("div",{key:"aksdlkasd",className:"photo-wrapper"},o().createElement("img",{key:"asdmmmmasd",src:null==t?void 0:t.photo,alt:null==t?void 0:t.user,onClick:function(e){e.preventDefault(),window.location.href="/user/".concat(null==t?void 0:t.user_id)}})),o().createElement("div",{className:"value-post"},o().createElement("div",{className:"feed-item-title"},o().createElement("div",{className:"link-user",onClick:function(e){e.preventDefault(),window.location.href="/user/".concat(null==t?void 0:t.user_id)}},null==t?void 0:t.user),o().createElement("div",{className:"feed-item-datetime"},e.unixToDateTime(null==t?void 0:t.date_time)))))),o().createElement("div",{className:"wrapper-data"},o().createElement(H(),{className:"value-post",remarkPlugins:[ae],components:e.components},null==t?void 0:t.value))))})):o().createElement("div",{className:"no-comments"},"Новых комментариев нет.")),o().createElement("div",{className:"wrapper-data"},o().createElement("div",{key:"aksdlkasd",className:"photo-wrapper"},o().createElement("img",{key:"asdmmmmasd",src:null==t?void 0:t.avatar_url,alt:null==t?void 0:t.login})),o().createElement("div",{className:"value-post placeholder-main-feed"},o().createElement(K(),{className:"feed-textarea",onChange:e.handleChangeTextarea,autoFocus:!1,placeholder:"Напишите Ваш комментарий",id:"text_comments",onKeyPress:e.handleKeyPress}))),o().createElement("div",{className:"wrapper-flex-end create-feed-wrapper-button"},o().createElement("div",{className:"button-default",onClick:function(){return e.sendComments()}},"Отправить"))))})):o().createElement("div",{className:"feed-comments-wrapper-item background-white"},o().createElement("div",{className:"wrapper-comments"},o().createElement("div",{className:"comments-title"},"Комментарии"),o().createElement("div",{className:"wall-comments"},e.state.comments.length?l.map((function(t){return o().createElement("div",null,o().createElement("div",{className:"feed-item-value bottom-line"},o().createElement("div",{className:"feed-item-value"},o().createElement("div",{key:"asldk",className:"wrapper-data"},o().createElement("div",{key:"aksdlkasd",className:"photo-wrapper"},o().createElement("img",{key:"asdmmmmasd",src:null==t?void 0:t.photo,alt:null==t?void 0:t.user})),o().createElement("div",{className:"value-post"},o().createElement("div",{className:"feed-item-title"},o().createElement("div",{className:"link-user",onClick:e.copyLogin},null==t?void 0:t.user),o().createElement("div",{className:"feed-item-datetime"},e.unixToDateTime(null==t?void 0:t.date_time)))))),o().createElement("div",{className:"wrapper-data"},o().createElement(H(),{className:"value-post",remarkPlugins:[ae],components:e.components},null==t?void 0:t.value))))})):o().createElement("div",{className:"no-comments"},"Новых комментариев нет.")))))}))):this.state.notFeed?o().createElement("div",null,o().createElement("div",{className:"error-wrapper"},o().createElement("div",{className:"error-page"},"Заметка удалена либо еще не создана."))):o().createElement("div",{className:"loader-wrapper feed-wrapper"},o().createElement("div",{className:"loader"}))),o().createElement("div",{className:"tags-view"},a?o().createElement("div",{className:"tags-box"},o().createElement("div",{className:"wrapper-data"},o().createElement("div",{className:"photo-wrapper"},Math.floor((new Date).getTime()/1e3)-Math.floor(new Date(null==c?void 0:c.last_active_at).getTime()/1e3)>120?null:o().createElement("div",{className:"online_user"}),o().createElement("img",{src:null==c?void 0:c.avatar_url,alt:null==c?void 0:c.login,onClick:function(e){e.preventDefault(),window.location.href="/user/".concat(null==c?void 0:c.id)}})),o().createElement("div",{className:"value-post"},o().createElement("div",{className:"feed-item-title"},o().createElement("div",{className:"link-user",onClick:function(e){e.preventDefault(),window.location.href="/user/".concat(null==c?void 0:c.id)}},null==c?void 0:c.login)))),null!=c&&c.location?o().createElement("div",{className:"main-place"},"Локация:"," "+(null==c?void 0:c.location)):null,null!=c&&c.company?o().createElement("div",{className:"main-place"},"Компания:"," "+(null==c?void 0:c.company)):null,null!=c&&c.count_feeds?o().createElement("div",{className:"main-place"},"Количество постов:"," "+(null==c?void 0:c.count_feeds)):null,null!=c&&c.count_tasks?o().createElement("div",{className:"main-place"},"Создал задач:"," "+(null==c?void 0:c.count_tasks)):null):o().createElement("div",{className:"loader-wrapper feed-wrapper"},o().createElement("div",{className:"loader-small"}))))}}],a&&Y(t.prototype,a),i}(l.Component);const re=ne,le=require("react-router-dom"),oe=require("centrifuge");var ie=a.n(oe);const ce=a.p+"746ec8f0bc97208f903e1a6bfe34c79e.png";function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ue(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function de(e,t){return de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},de(e,t)}function me(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fe(e)}const pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(i,e);var t,a,n,r,l=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fe(n);if(r){var a=fe(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return me(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={countUsers:0,countNotes:0,countUsersToday:0,loadData:!1},t}return t=i,(a=[{key:"auth",value:function(){var e={login:document.getElementById("auth_login").value,password:document.getElementById("auth_password").value};fetch("/api/auth",{method:"POST",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){200===e.status.code?window.location.href=e.data.location:404===e.status.code?document.getElementById("error_auth").innerHTML="Неверный логин или пароль":7182===e.status.code&&(document.getElementById("error_auth").innerHTML="Аккаунт был заблокирован администрацией сайта")})).catch((function(e){console.log(e)}))}},{key:"registration",value:function(){var e={login:document.getElementById("registration_login").value,email:document.getElementById("registration_email").value,password:document.getElementById("registration_password").value},t=document.getElementById("registration_two_password").value;e.password===t?fetch("/api/registration",{method:"POST",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){200===e.status.code?window.location.href=e.data.location:3002===e.status.code?document.getElementById("error_registration").innerHTML="Такой логин или эл. почта уже есть":3003===e.status.code&&(document.getElementById("error_registration").innerHTML="Не все поля были заполнены")})).catch((function(e){console.log(e)})):document.getElementById("error_registration").innerHTML="Пароли не совпадают"}},{key:"componentDidMount",value:function(){var e=this;fetch("/api/status_platform",{method:"GET"}).then((function(e){return e.json()})).then((function(t){200===t.status.code&&e.setState({countUsers:t.data.count_user_to_day,countNotes:t.data.count_notes,loadData:!0})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return window.outerWidth<=768?(console.log("mobile"),o().createElement("div",{className:"content-wall-views"},o().createElement("div",{className:"wrapper-page-about"},o().createElement("div",{className:"wrapper-about"},o().createElement("div",{className:"about-text"},o().createElement("p",null,o().createElement("b",null,"DevCodeMyLife")," - это проект для разработчиков, которым периодически приходится искать код в интернете, чтобы решить какую-либо проблему. Просмотрев бесконечное число форумов, ты наконец-то находишь то, что тебе нужно, внедряешь и забываешь, где ты это находил.",o().createElement("br",null),o().createElement("br",null),"В какой-то момент ты снова сталкиваешься с подобной проблемой. Чтобы не лезть снова в проект или искать в интернете, ты всегда можешь запостить код здесь, используя Markdown, и никогда не потеряешь полезную часть кода.",o().createElement("br",null),"Так же ты сможешь помочь другим, если твой код окажется полезным, люди будут чаще его находить по релевантным запросам на нашей площадке.")))),o().createElement("div",{className:"auth-box-list"},o().createElement("div",{className:"auth-wrapper"},o().createElement("div",{className:"auth-view-box"},o().createElement("div",{className:"auth-box-title"},o().createElement("div",{className:"title-span-auth"},"Вход через сторонние сервисы")),o().createElement("div",{className:"auths-list"},o().createElement("div",{className:"button-auth github",onClick:function(){window.location.href="https://github.com/login/oauth/authorize?client_id=7262f0da224a3673dee9&redirect_uri=http://devcodemylife.tech/api/oauth/github/redirect&scope=email&state=asiud88as7d&login=devcodemylife&allow_signup=true"}},o().createElement("img",{className:"auth-logo",src:ce,alt:"github"}))))),o().createElement("div",{className:"auth-wrapper"},o().createElement("div",{className:"auth-view-box"},o().createElement("div",{className:"auth-box-title"},o().createElement("div",{className:"title-span-auth"},"Вход")),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",placeholder:"Логин",type:"text",id:"auth_login"})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",placeholder:"Пароль",type:"password",id:"auth_password"})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("div",{className:"button-default",onClick:function(){e.auth()}},"Войти")),o().createElement("div",{className:"error-wrapper center red",id:"error_auth"}))),o().createElement("div",{className:"auth-wrapper"},o().createElement("div",{className:"auth-view-box"},o().createElement("div",{className:"auth-box-title"},o().createElement("div",{className:"title-span-auth"},"Если Вы у нас впервые"),o().createElement("div",{className:"title-span-auth-small"},"Пройдите легкую регистрацию")),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",maxLength:28,placeholder:"Логин",type:"text",id:"registration_login"})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",maxLength:30,placeholder:"Эл. почта",type:"text",id:"registration_email"})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",placeholder:"Пароль",type:"password",id:"registration_password"})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",placeholder:"Повторите пароль",type:"password",id:"registration_two_password"})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("div",{className:"button-default",onClick:function(){e.registration()}},"Зарегистрироваться")),o().createElement("div",{className:"error-wrapper center red",id:"error_registration"})))),this.state.loadData?o().createElement("div",{className:"view-status"},o().createElement("div",{className:"wrapper-status"},o().createElement("div",{className:"auth-box-title"},"Статистика платформы"),o().createElement("div",{className:"auths-list"},o().createElement("p",null,o().createElement("span",{className:"test-stat"},"Событий сегодня:")," ",o().createElement("span",{className:"green"},this.state.countUsers),o().createElement("br",null),o().createElement("span",{className:"test-stat"},"Созданных заметок всего:")," ",o().createElement("span",{className:"green"},this.state.countNotes),o().createElement("br",null))))):o().createElement("div",{className:"auth-wrapper"},o().createElement("div",{className:"auth-view-box",style:{display:"flex",justifyContent:"center",alignItems:"center"}},o().createElement("div",{className:"loader"}))))):(console.log("desktop"),o().createElement("div",{style:{display:"flex"}},o().createElement("div",{className:"content-wall-views"},o().createElement("div",{className:"wrapper-page-about"},o().createElement("div",{className:"wrapper-about"},o().createElement("div",{className:"about-text"},o().createElement("p",null,o().createElement("b",null,"DevCodeMyLife")," - это проект для разработчиков, которым периодически приходится искать код в интернете, чтобы решить какую-либо проблему. Просмотрев бесконечное число форумов, ты наконец-то находишь то, что тебе нужно, внедряешь и забываешь, где ты это находил.",o().createElement("br",null),o().createElement("br",null),"В какой-то момент ты снова сталкиваешься с подобной проблемой. Чтобы не лезть снова в проект или искать в интернете, ты всегда можешь запостить код здесь, используя Markdown, и никогда не потеряешь полезную часть кода.",o().createElement("br",null),"Так же ты сможешь помочь другим, если твой код окажется полезным, люди будут чаще его находить по релевантным запросам на нашей площадке.")))),this.state.loadData?o().createElement("div",{className:"view-status"},o().createElement("div",{className:"wrapper-status"},o().createElement("div",{className:"auth-box-title"},"Статистика платформы"),o().createElement("div",{className:"auths-list"},o().createElement("p",null,o().createElement("span",{className:"test-stat"},"Событий сегодня:")," ",o().createElement("span",{className:"green"},this.state.countUsers),o().createElement("br",null),o().createElement("span",{className:"test-stat"},"Созданных заметок всего:")," ",o().createElement("span",{className:"green"},this.state.countNotes),o().createElement("br",null))))):o().createElement("div",{className:"auth-wrapper"},o().createElement("div",{className:"auth-view-box",style:{display:"flex",justifyContent:"center",alignItems:"center"}},o().createElement("div",{className:"loader"})))),o().createElement("div",{className:"auth-box-list"},o().createElement("div",{className:"auth-wrapper"},o().createElement("div",{className:"auth-view-box"},o().createElement("div",{className:"auth-box-title"},o().createElement("div",{className:"title-span-auth"},"Вход через сторонние сервисы")),o().createElement("div",{className:"auths-list"},o().createElement("div",{className:"button-auth github",onClick:function(){window.location.href="https://github.com/login/oauth/authorize?client_id=7262f0da224a3673dee9&redirect_uri=http://devcodemylife.tech/api/oauth/github/redirect&scope=email&state=asiud88as7d&login=devcodemylife&allow_signup=true"}},o().createElement("img",{className:"auth-logo",src:ce,alt:"github"}))))),o().createElement("div",{className:"auth-wrapper"},o().createElement("div",{className:"auth-view-box"},o().createElement("div",{className:"auth-box-title"},o().createElement("div",{className:"title-span-auth"},"Вход")),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",placeholder:"Логин",type:"text",id:"auth_login"})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",placeholder:"Пароль",type:"password",id:"auth_password"})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("div",{className:"button-default",onClick:function(){e.auth()}},"Войти")),o().createElement("div",{className:"error-wrapper center red",id:"error_auth"}))),o().createElement("div",{className:"auth-wrapper"},o().createElement("div",{className:"auth-view-box"},o().createElement("div",{className:"auth-box-title"},o().createElement("div",{className:"title-span-auth"},"Если Вы у нас впервые"),o().createElement("div",{className:"title-span-auth-small"},"Пройдите легкую регистрацию")),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",maxLength:28,placeholder:"Логин",type:"text",id:"registration_login"})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",maxLength:30,placeholder:"Эл. почта",type:"text",id:"registration_email"})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",placeholder:"Пароль",type:"password",id:"registration_password"})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",placeholder:"Повторите пароль",type:"password",id:"registration_two_password"})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("div",{className:"button-default",onClick:function(){e.registration()}},"Зарегистрироваться")),o().createElement("div",{className:"error-wrapper center red",id:"error_registration"}))))))}}])&&ue(t.prototype,a),i}(l.Component),ve=require("react-image-crop");var he=a.n(ve);function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}require("react-image-crop/dist/ReactCrop.css"),require("prop-types");var ye=["node","inline","className","children"];function Ee(){return Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ee.apply(this,arguments)}function we(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(e,t){return be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},be(e,t)}function Ne(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?ke(e):t}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_e(e)}function Se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Oe=a(344),Ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(i,e);var t,a,n,r,l=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_e(n);if(r){var a=_e(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return Ne(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Se(ke(t=l.call(this,e)),"getPreferredColorScheme",(function(){var e;null!==(e=window)&&void 0!==e&&e.matchMedia("(prefers-color-scheme: dark)").matches?t.setState({isDark:"dark"}):t.setState({isDark:"light"})})),Se(ke(t),"components",{code:function(e){e.node;var t=e.inline,a=e.className,n=e.children,r=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,ye),l=/language-(\w+)/.exec(a||"");return!t&&l?o().createElement(k.Prism,Ee({wrapLongLines:!1,language:l[1],PreTag:"div",children:String(n).replace(/\n$/,"")},r)):o().createElement("code",Ee({className:a},r),n)}}),Se(ke(t),"handleChangeTextarea",(function(e){""===e.target.value?t.setState({textNews:"..."}):t.setState({textNews:e.target.value})})),Se(ke(t),"handleChangeTitle",(function(e){t.setState({rewriteTitle:e.target.value})})),Se(ke(t),"handleChangeInput",(function(e){""===e.target.value?t.setState({heading:"Текст заголовка"}):t.setState({heading:e.target.value})})),Se(ke(t),"newInputText",(function(e){t.setState({clicked_new_post:!0,show_textarea:!0,showPreview:!0})})),Se(ke(t),"getLastVisit",(function(e){return Math.floor(e/60)})),Se(ke(t),"createChat",(function(e){t.setState({clickCreateDialog:!0});var a={to_uid:Number(t.state.id)};fetch("/api/chat",{method:"POST",body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){var t;console.log(e),0===e.status.code?window.location.href="/messages?cid=".concat(e.data):p.toast.error((null===(t=e.status)||void 0===t?void 0:t.message)+" - Попробуйте позже",{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0})})).catch((function(e){p.toast.error(e+" - Попробуйте позже",{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0})}))})),Se(ke(t),"onKeyDown",(function(e){if(9===e.keyCode){e.preventDefault();var a=e.target,n=a.selectionStart,r=a.selectionEnd;t.setState((function(e){return{lyrics:e.lyrics.substring(0,n)+"\t"+e.lyrics.substring(r)}}),(function(){t.textAreaRef.current.selectionStart=t.textAreaRef.current.selectionEnd=n+1}))}})),Se(ke(t),"uploading",(function(e){t.setState({file:e.target.files[0]})})),Se(ke(t),"uploadPhotoAction",(function(e){e.preventDefault();var a=new FileReader,n=e.target.files[0];a.onloadend=function(){t.setState({file:n,src:a.result,showCrop:!0})},a.readAsDataURL(n),console.log(n)})),Se(ke(t),"uploadCoverAction",(function(e){e.preventDefault();var a=new FileReader,n=e.target.files[0];a.onloadend=function(){},a.readAsDataURL(n);var r=p.toast.loading("Подождите, фотография обрабатывается"),l=new FormData;l.append("data",n),l.append("width","1000"),l.append("height","420"),t.cancelCrop(),p.toast.update(r,{render:"Фотография отправлена на сервер",type:"default",isLoading:!0}),fetch("/api/upload_image",{method:"POST",body:l}).then((function(e){return e.json()})).then((function(e){console.log(e),0===e.status.code?(t.setState({coverUpload:null==e?void 0:e.data[0].url_preview}),p.toast.update(r,{render:"Фотография успешно обновлена",type:"success",isLoading:!1,autoClose:5e3,hideProgressBar:!0})):p.toast.update(r,{render:"Сервер не смог обработать фотографию",type:"error",isLoading:!1,autoClose:5e3,hideProgressBar:!0})})).catch((function(e){t.setState({loadImage:!1}),p.toast.update(r,{render:e,type:"error",isLoading:!1,autoClose:5e3,hideProgressBar:!0})}))})),Se(ke(t),"onCropChange",(function(e,a){t.setState({crop:e})})),Se(ke(t),"onCropComplete",(function(e){t.setState({cropImage:e}),console.log(e)})),Se(ke(t),"onImageLoaded",(function(e){t.setState({imageRef:e})})),t.state={name:"React"},t.state={error:!1,isLoaded:!1,mainFeed:[],showPreview:!1,textNews:"...",heading:"...",prevState:null,clicked_new_post:!1,show_textarea:!1,id:0,data:[],notUser:!1,close:!1,load:!1,rewriteMode:!1,rewriteValue:null,rewriteTitle:null,currentDateTime:(new Date).getTime(),isDark:"light",file:null,imagePreviewUrl:null,store:t.props.store,crop:{unit:"px",x:0,y:0,width:300,height:300,aspect:1},cropCover:{unit:"px",x:0,y:0,width:735,height:200,aspect:3.675},cropImage:null,showCrop:!1,imageRef:null,idPage:t.props.id,loadImage:!1,clickCreateDialog:!1,isCall:!1,coverUpload:null,src_cover:null,imageCropCover:!1},t.state.store.subscribe((function(){t.setState(t.state.store.getState()),t.updateStateUser()})),t}return t=i,a=[{key:"updateStateUser",value:function(){var e=this,t=this.state.store.getState();fetch("/api/user/".concat(t.history.id),{method:"GET"}).then((function(e){return e.json()})).then((function(a){0===a.status.code&&a.data.length>0?e.setState({isLoaded:!0,id:t.history.id,result:a.data,mainFeed:a.feed,notUser:!1}):e.setState({isLoaded:!1,result:{},notUser:!0,error:!0})})).catch((function(t){e.setState({isLoaded:!1,error:!0,result:{},notUser:!0})}))}},{key:"deleteFeed",value:function(e){var t=this;fetch("/api/feed/".concat(e),{method:"DELETE",body:JSON.stringify({})}).then((function(e){return e.json()})).then((function(e){var a=t.state.store.getState(),n="/api/user/".concat(a.history.id);fetch(n,{method:"GET"}).then((function(e){return e.json()})).then((function(e){0===e.status.code&&e.data.length>0?(t.cancel(),t.setState({isLoaded:!0,id:a.history.id,result:e.data,mainFeed:e.feed,notUser:!1})):t.setState({isLoaded:!1,result:{},notUser:!0,error:!0})})).catch((function(e){t.setState({isLoaded:!1,error:!0,result:{},notUser:!0}),console.log(e)}))})).catch((function(e){t.setState({auth:!1,load:!0})}))}},{key:"like",value:function(e){var t={feeds_uuid:e};fetch("/api/like",{method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){0===t.status.code&&(console.log(t),document.getElementById(e).innerHTML=t.data.count)})).catch((function(e){console.log(e)}))}},{key:"previewClick",value:function(){this.setState({showPreview:!this.state.showPreview})}},{key:"rewriteFeed",value:function(e,t,a,n,r){this.setState({rewriteUUID:e,rewriteValue:t,rewriteTitle:a,rewriteMode:!0,clicked_new_post:!0,show_textarea:!0,close:n,showPreview:!0,coverUpload:r})}},{key:"componentDidMount",value:function(){var e=this;this.getPreferredColorScheme(),window.matchMedia("(prefers-color-scheme: dark)").onchange=function(t){e.getPreferredColorScheme()};var t=this.state.store.getState(),a="/api/user/".concat(t.history.id);fetch(a,{method:"GET"}).then((function(e){return e.json()})).then((function(a){0===a.status.code&&a.data.length>0?e.setState({isLoaded:!0,id:t.history.id,result:a.data,mainFeed:a.feed,notUser:!1}):e.setState({isLoaded:!1,result:{},notUser:!0,error:!0})})).catch((function(t){e.setState({isLoaded:!1,error:!0,result:{},notUser:!0})}))}},{key:"cancel",value:function(){this.setState({clicked_new_post:!1,show_textarea:!1,rewriteValue:null,showPreview:!1,rewriteMode:!1,textNews:"...",coverUpload:null})}},{key:"saveFeed",value:function(){var e=this,t={title:document.getElementById("text_title").value,value:document.getElementById("text_news").value,cover_path:this.state.coverUpload,close:this.state.close};this.setState({clicked_new_post:!1,show_textarea:!1,rewriteValue:null,showPreview:!1,rewriteMode:!1,textNews:"..."}),fetch("/api/feed/".concat(this.state.rewriteUUID),{method:"PUT",body:JSON.stringify({value:t.value,close:t.close,title:t.title,cover_path:t.cover_path})}).then((function(e){return e.json()})).then((function(t){var a=e.state.store.getState(),n="/api/user/".concat(a.history.id);fetch(n,{method:"GET"}).then((function(e){return e.json()})).then((function(t){0===t.status.code&&t.data.length>0?e.setState({isLoaded:!0,id:a.history.id,result:t.data,mainFeed:t.feed,notUser:!1}):e.setState({isLoaded:!1,result:{},notUser:!0,error:!0})})).catch((function(t){e.setState({isLoaded:!1,error:!0,result:{},notUser:!0}),console.log(t)}))})).catch((function(e){console.log(e)}))}},{key:"feedNew",value:function(){var e=this,t={title:document.getElementById("text_title").value,value:document.getElementById("text_news").value,cover_path:this.state.coverUpload,close:this.state.close};t.value.length>1&&(this.setState({clicked_new_post:!1,show_textarea:!1,rewriteValue:null,showPreview:!1}),fetch("/api/feed",{method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){0===t.status.code&&fetch("/api/authentication",{method:"POST",body:JSON.stringify({finger:window.localStorage.getItem("finger")})}).then((function(e){return e.json()})).then((function(t){0===t.status.code?e.setState({auth:!0,data:t.data,feed:t.feed,load:!0,token:t.token}):(e.sendLogs(t.status.message),e.delete_cookie("access_token"));var a=e.state.store.getState(),n="/api/user/".concat(a.history.id);fetch(n,{method:"GET"}).then((function(e){return e.json()})).then((function(t){0===t.status.code&&t.data.length>0?e.setState({isLoaded:!0,id:a.history.id,result:t.data,mainFeed:t.feed,notUser:!1}):e.setState({isLoaded:!1,result:{},notUser:!0,error:!0})})).catch((function(t){e.setState({isLoaded:!1,error:!0,result:{},notUser:!0}),console.log(t)}))})).catch((function(t){e.setState({auth:!1,load:!0})}))})).catch((function(e){console.log(e)})))}},{key:"unixToDateTime",value:function(e){return new Date(1e3*e).toLocaleString()}},{key:"uploadClick",value:function(){document.getElementById("upload_file_input").click()}},{key:"uploadClickCover",value:function(){document.getElementById("upload_file_input_cover").click()}},{key:"makeUpload",value:function(){var e=this,t=p.toast.loading("Подождите, фотография обрабатывается"),a=new FormData,n=Math.floor(this.state.imageRef.naturalWidth/Number(this.state.imageRef.width)),r=Math.floor(this.state.imageRef.naturalHeight/Number(this.state.imageRef.height));console.log(this.state.imageRef.naturalWidth,this.state.imageRef.naturalHeight,this.state.crop.x*n,this.state.crop.y*r);var l=this.state.crop.x*n,o=this.state.crop.y*r,i=this.state.crop.width*n,c=this.state.crop.height*r;console.log(l,o,i,c),a.append("data",this.state.file),a.append("x",l.toString()),a.append("y",o.toString()),a.append("x_",i),a.append("y_",c),this.cancelCrop(),p.toast.update(t,{render:"Фотография отправлена на сервер",type:"default",isLoading:!0}),fetch("/api/upload_main_photo",{method:"POST",body:a}).then((function(e){return e.json()})).then((function(a){console.log(a),0===a.status.code?(e.setState({imagePreviewUrl:null==a?void 0:a.data[0].url_preview}),p.toast.update(t,{render:"Фотография успешно обновлена",type:"success",isLoading:!1,autoClose:5e3,hideProgressBar:!0})):p.toast.update(t,{render:"Сервер не смог обработать фотографию",type:"error",isLoading:!1,autoClose:5e3,hideProgressBar:!0})})).catch((function(a){e.setState({loadImage:!1}),p.toast.update(t,{render:a,type:"error",isLoading:!1,autoClose:5e3,hideProgressBar:!0})}))}},{key:"cancelCrop",value:function(){this.setState({crop:{unit:"px",x:130,y:50,width:300,height:300,aspect:1},cropImage:null,showCrop:!1,imageRef:null})}},{key:"render",value:function(){var e,t,a,n,r,l,i,c,s,u,d,m,p,v=this,h=this.state,g=h.isLoaded,y=h.textNews,E=h.mainFeed,w=h.clicked_new_post,b=this.state.store.getState();return b.components.settings.main_page?o().createElement("div",{style:{display:"flex"}},o().createElement("div",{className:"content-wall-views"},this.state.showCrop?o().createElement("div",{className:"pop-up"},o().createElement("div",{className:"center-view"},this.state.loadImage?o().createElement("div",{className:"loader"}):o().createElement("div",null,o().createElement(he(),{circularCrop:!0,keepSelection:!0,minWidth:300,minHeight:300,src:this.state.src,crop:this.state.crop,ruleOfThirds:!0,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange}),o().createElement("div",{className:"wrapper-bottom",style:{width:"100%",boxSizing:"border-box",padding:"20px 0"}},o().createElement("div",{className:"wrapper-flex-start"},o().createElement("div",{className:"button-default",onClick:function(){return v.cancelCrop()}},"Отмена")),o().createElement("div",{className:"wrapper-flex-end"},o().createElement("div",{className:"button-default",onClick:function(){return v.makeUpload()}},"Сохранить")))))):null,g?this.state.result[0].is_block?o().createElement("div",null,o().createElement("div",{className:"error-wrapper"},o().createElement("div",{className:"error-page"},"Страница была заблокирована администрацией сайта."))):o().createElement("div",{className:"feed-wrapper"},Number(this.state.id)===b.auth.user.data.id?o().createElement("div",{className:"feed-wrapper-item background-white"},o().createElement("div",{className:"feed-item-value"},o().createElement("div",{key:b.auth.user.data.avatar_url,className:"wrapper-data"},o().createElement("div",{key:"aksdlkasd",className:"photo-wrapper"},o().createElement("img",{key:"asdmmmmasd",src:null===(e=b.auth.user.data)||void 0===e?void 0:e.avatar_url,alt:null===(t=b.auth.user.data)||void 0===t?void 0:t.login,onClick:function(e){e.preventDefault(),window.location.href="/user/".concat(b.auth.user.data.id)}})),o().createElement("div",{className:"value-post placeholder-main-feed",id:"main_input",onClick:w?null:this.newInputText},this.state.clicked_new_post?o().createElement("div",{className:"textarea-hide"},o().createElement("input",{type:"file",name:"file",id:"upload_file_input_cover",onChange:function(e){return v.uploadCoverAction(e)},accept:"image/x-png,image/jpeg",style:{display:"none"}}),this.state.coverUpload?o().createElement("img",{src:this.state.coverUpload,alt:b.auth.user.data.login,onClick:function(){return v.uploadClickCover()},style:{cursor:"pointer",maxWidth:"634px"}}):o().createElement(o().Fragment,null,o().createElement("div",{className:"palace-upload-photo-liable",onClick:function(){return v.uploadClickCover()}},"Нажмите что бы добавить обложку")),o().createElement("div",{className:"title-view"},o().createElement("input",{className:"feed-textarea",autoFocus:!0,type:"text",id:"text_title",onChange:this.handleChangeTitle,placeholder:"Заголовок",style:{margin:"0 0 10px 0"},value:this.state.rewriteTitle})),o().createElement(K(),{className:"feed-textarea",onChange:this.handleChangeTextarea,placeholder:"Что у Вас нового?",id:"text_news"},this.state.rewriteMode?this.state.rewriteValue:"")):o().createElement("div",{className:"fake-textarea"},"Что у Вас нового?"))),this.state.clicked_new_post?o().createElement("div",{className:"wrapper-flex-end create-feed-wrapper-button"},o().createElement("div",{className:"button-default-icon",onClick:function(){v.setState((function(e){return{close:!e.close}}))}},b.auth.user.data.privat_post||this.state.close?o().createElement("svg",{className:"svg-close-view",fill:"#000000",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"50px",height:"50px"},o().createElement("path",{fill:"none",className:"svg-close",stroke:"#000000",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2",d:"M9 49c-1.1 0-2-.9-2-2V23c0-1.1.9-2 2-2h32c1.1 0 2 .9 2 2v24c0 1.1-.9 2-2 2H9zM36 21c0 0 0-4.9 0-6 0-6.1-4.9-11-11-11-6.1 0-11 4.9-11 11 0 1.1 0 6 0 6"}),o().createElement("path",{d:"M28,33c0-1.7-1.3-3-3-3c-1.7,0-3,1.3-3,3c0,0.9,0.4,1.7,1,2.2V38c0,1.1,0.9,2,2,2c1.1,0,2-0.9,2-2v-2.8C27.6,34.7,28,33.9,28,33z"})):o().createElement("svg",{className:"svg-close-view",fill:"#000000",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"50px",height:"50px"},o().createElement("path",{fill:"none",className:"svg-close",stroke:"#000000",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2",d:"M9 49c-1.1 0-2-.9-2-2V23c0-1.1.9-2 2-2h32c1.1 0 2 .9 2 2v24c0 1.1-.9 2-2 2H9zM34.6 13.1c0 0-1.1-3.6-1.3-4.3-1.8-5.8-8-9.1-13.8-7.3-5.8 1.8-9.1 8-7.3 13.8C12.6 16.4 14 21 14 21"}),o().createElement("path",{d:"M28,33c0-1.7-1.3-3-3-3c-1.7,0-3,1.3-3,3c0,0.9,0.4,1.7,1,2.2V38c0,1.1,0.9,2,2,2c1.1,0,2-0.9,2-2v-2.8C27.6,34.7,28,33.9,28,33z"}))),o().createElement("div",{className:"button-default",onClick:function(){return v.cancel()}},"Отмена"),this.state.rewriteMode?o().createElement("div",{className:"button-default",onClick:function(){v.deleteFeed(v.state.rewriteUUID)}},"Удалить"):null,this.state.rewriteMode?o().createElement("div",{className:"button-default",onClick:function(){return v.saveFeed()}},"Сохранить"):o().createElement("div",{className:"button-default",onClick:function(){return v.feedNew()}},"Опубликовать")):null,this.state.showPreview?o().createElement(o().Fragment,null,o().createElement("div",{className:"preview-news preview_swap"},o().createElement("div",{className:"feed-wrapper-item",style:{boxShadow:"none"}},o().createElement("div",{className:"feed-item-value"},o().createElement("div",{className:"wrapper-data"},o().createElement(H(),{className:"value-post",remarkPlugins:[Oe],components:this.components},y)))))):null)):null,(null==E?void 0:E.length)>0?null==E?void 0:E.map((function(e){return o().createElement("div",{key:null==e?void 0:e.ID,className:"feed-wrapper-item"},o().createElement(f.Link,{style:{textDecoration:"none"},href:"/post?uuid=".concat(null==e?void 0:e.ID)},""!==(null==e?void 0:e.cover_path)?o().createElement("img",{className:"cover-feed",src:e.cover_path,alt:e.title}):null,o().createElement("div",{className:"feed-item-value"},o().createElement("div",{key:"asldk",className:"wrapper-data"},o().createElement(f.Link,{href:"/user/".concat(null==e?void 0:e.uid)},o().createElement("div",{key:"aksdlkasd",className:"photo-wrapper"},b.auth.user.data.id===Number(v.state.id)?Math.floor((new Date).getTime()/1e3)-Math.floor(new Date(b.auth.user.data.last_active_at).getTime()/1e3)>120?null:o().createElement("div",{className:"online_user"}):Math.floor((new Date).getTime()/1e3)-Math.floor(new Date(v.state.result[0].last_active_at).getTime()/1e3)>120?null:o().createElement("div",{className:"online_user"}),o().createElement("img",{key:"asdmmmmasd",src:null==e?void 0:e.photo,alt:null==e?void 0:e.user}))),o().createElement("div",{className:"value-post"},o().createElement("div",{className:"feed-item-title"},o().createElement(f.Link,{href:"/user/".concat(null==e?void 0:e.uid)},o().createElement("div",{className:"link-user"},null==e?void 0:e.user)),o().createElement("div",{className:"feed-item-datetime"},v.unixToDateTime(null==e?void 0:e.date_time)))),Number(v.state.id)===b.auth.user.data.id?o().createElement("div",{className:"button-default-icon-disable hide-border"},null!=e&&e.close?o().createElement("svg",{className:"svg-close-view",fill:"#000000",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"50px",height:"50px"},o().createElement("path",{fill:"none",className:"svg-close",stroke:"#000000",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2",d:"M9 49c-1.1 0-2-.9-2-2V23c0-1.1.9-2 2-2h32c1.1 0 2 .9 2 2v24c0 1.1-.9 2-2 2H9zM36 21c0 0 0-4.9 0-6 0-6.1-4.9-11-11-11-6.1 0-11 4.9-11 11 0 1.1 0 6 0 6"}),o().createElement("path",{d:"M28,33c0-1.7-1.3-3-3-3c-1.7,0-3,1.3-3,3c0,0.9,0.4,1.7,1,2.2V38c0,1.1,0.9,2,2,2c1.1,0,2-0.9,2-2v-2.8C27.6,34.7,28,33.9,28,33z"})):o().createElement("svg",{className:"svg-close-view",fill:"#000000",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"50px",height:"50px"},o().createElement("path",{fill:"none",className:"svg-close",stroke:"#000000",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2",d:"M9 49c-1.1 0-2-.9-2-2V23c0-1.1.9-2 2-2h32c1.1 0 2 .9 2 2v24c0 1.1-.9 2-2 2H9zM34.6 13.1c0 0-1.1-3.6-1.3-4.3-1.8-5.8-8-9.1-13.8-7.3-5.8 1.8-9.1 8-7.3 13.8C12.6 16.4 14 21 14 21"}),o().createElement("path",{d:"M28,33c0-1.7-1.3-3-3-3c-1.7,0-3,1.3-3,3c0,0.9,0.4,1.7,1,2.2V38c0,1.1,0.9,2,2,2c1.1,0,2-0.9,2-2v-2.8C27.6,34.7,28,33.9,28,33z"}))):null),o().createElement("div",{key:"asldk",className:"wrapper-data"},o().createElement("div",{className:"title-feed"},null==e?void 0:e.title)))),o().createElement("div",{className:"wrapper-bottom"},o().createElement("div",{className:"like_wrapper wrapper-flex-start"},o().createElement("div",{className:"like",onClick:function(){return v.like(null==e?void 0:e.ID)}},o().createElement("div",{className:"like-item"},"light"===v.state.isDark?o().createElement("img",{src:_,alt:"like"}):o().createElement("img",{src:C,alt:"like"})),o().createElement("div",{className:"like-text"},o().createElement("span",{className:"like-count",id:null==e?void 0:e.ID},null==e?void 0:e.count_like))),o().createElement("div",{className:"like"},o().createElement("div",{className:"like-item"},"light"===v.state.isDark?o().createElement("img",{src:S,alt:"like"}):o().createElement("img",{src:O,alt:"like"})),o().createElement("div",{className:"like-text"},o().createElement("span",{className:"like-count"},null==e?void 0:e.look_count))),Number(v.state.id)===b.auth.user.data.id?o().createElement("div",{className:"like",onClick:function(){v.rewriteFeed(null==e?void 0:e.ID,null==e?void 0:e.value,null==e?void 0:e.title,null==e?void 0:e.close,e.cover_path)}},o().createElement("div",{className:"like-text"},o().createElement("span",{className:"like-count"},"Изменить"))):null),o().createElement("div",{className:"like_wrapper wrapper-flex-end"},null!=e&&e.tag?o().createElement("div",{className:"tags-type"},"#",null==e?void 0:e.tag):null)))})):Number(this.state.id)===b.auth.user.data.id?o().createElement("div",{className:"error-wrapper"},o().createElement("div",{className:"error-page"},"Напишите что-нибудь полезное для сообщества или для себя.")):o().createElement("div",{className:"error-wrapper"},o().createElement("div",{className:"error-page"},this.state.result[0].login," пока ничего не написал."))):this.state.notUser&&b.auth.user.isAuth?o().createElement("div",null,o().createElement("div",{className:"error-wrapper"},o().createElement("div",{className:"error-page"},"Такого пользователя не существует"))):b.auth.user.isAuth?o().createElement("div",{className:"feed-wrapper",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},o().createElement("div",{className:"loader"})):o().createElement("div",null,o().createElement("div",{className:"error-wrapper"},o().createElement("div",{className:"error-page"},"Авторизуйтесь чтобы просматривать профили пользователей.")))),o().createElement("div",{className:"tags-view"},g?o().createElement("div",{className:"tags-box"},o().createElement("div",{className:"main-place-photo-column "},o().createElement("input",{type:"file",name:"file",id:"upload_file_input",onChange:function(e){return v.uploadPhotoAction(e)},accept:"image/x-png,image/jpeg",style:{display:"none"}}),Number(this.state.id)===b.auth.user.data.id?this.state.imagePreviewUrl?o().createElement("img",{src:this.state.imagePreviewUrl,alt:b.auth.user.data.login,onClick:function(){return v.uploadClick()},style:{cursor:"pointer"}}):o().createElement("img",{src:b.auth.user.data.avatar_url,alt:b.auth.user.data.login,onClick:function(){return v.uploadClick()},style:{cursor:"pointer"}}):o().createElement("img",{src:this.state.result[0].avatar_url,alt:this.state.result[0].login,style:{cursor:"default"}})),o().createElement("div",{className:"main-place-info-column "},o().createElement("div",{className:"main-place date_active"},b.auth.user.data.id===Number(this.state.id)?Math.floor((new Date).getTime()/1e3)-Math.floor(new Date(b.auth.user.data.last_active_at).getTime()/1e3)>120?Math.floor((new Date).getTime()/1e3)-Math.floor(new Date(b.auth.user.data.last_active_at).getTime()/1e3)>60?o().createElement("span",{className:"info_status"},"Последняя активность была ",new Date(b.auth.user.data.last_active_at).toLocaleString()):o().createElement("span",{className:"info_status"},"Последняя активность была ",this.getLastVisit(Math.floor((new Date).getTime()/1e3)-Math.floor(new Date(b.auth.user.data.last_active_at).getTime()/1e3))," минут назад."):o().createElement("span",{className:"info_status"},"Сейчас на сайте"):Math.floor((new Date).getTime()/1e3)-Math.floor(new Date(this.state.result[0].last_active_at).getTime()/1e3)>120?Math.floor((new Date).getTime()/1e3)-Math.floor(new Date(this.state.result[0].last_active_at).getTime()/1e3)>60?o().createElement("span",{className:"info_status"},"Последняя активность была ",new Date(this.state.result[0].last_active_at).toLocaleString()):o().createElement("span",{className:"info_status"},"Последняя активность была ",this.getLastVisit(Math.floor((new Date).getTime()/1e3)-Math.floor(new Date(this.state.result[0].last_active_at).getTime()/1e3))," минут назад."):o().createElement("span",{className:"info_status"},"Сейчас на сайте")),o().createElement(J.Helmet,null,b.auth.user.data.id===Number(this.state.id)?o().createElement("title",null,b.auth.user.data.login," | DevCodeMyLife"):o().createElement("title",null,this.state.result[0].login," | DevCodeMyLife")),o().createElement("div",{className:"main-place name"},b.auth.user.data.id===Number(this.state.id)?null!==(a=b.auth.user.data)&&void 0!==a&&a.name?" "+b.auth.user.data.name+" "+b.auth.user.data.last_name:" "+b.auth.user.data.login:null!==(n=this.state.result[0])&&void 0!==n&&n.name?" "+this.state.result[0].name+" "+this.state.result[0].last_name:" "+this.state.result[0].login),o().createElement("div",{className:"main-place"},"Email:",Number(this.state.id)===b.auth.user.data.id?null!==(r=b.auth.user.data)&&void 0!==r&&r.email?" "+b.auth.user.data.email:" нет":" Скрыт либо не задан"),o().createElement("div",{className:"main-place"},"Компания:",Number(this.state.id)===b.auth.user.data.id?null!==(l=b.auth.user.data)&&void 0!==l&&l.company?" "+b.auth.user.data.company:" нет":null!==(i=this.state.result[0])&&void 0!==i&&i.company?" "+this.state.result[0].company:" нет"),o().createElement("div",{className:"main-place"},"Локация:",Number(this.state.id)===b.auth.user.data.id?null!==(c=b.auth.user.data)&&void 0!==c&&c.location?" "+b.auth.user.data.location:" нет":null!==(s=this.state.result[0])&&void 0!==s&&s.location?" "+this.state.result[0].location:" нет"),o().createElement("div",{className:"main-place"},"Профиль GitHub:",Number(this.state.id)===b.auth.user.data.id?null!==(u=b.auth.user.data)&&void 0!==u&&u.html_url?o().createElement("a",{className:"link_github",target:"_blank",href:b.auth.user.data.html_url,rel:"noreferrer"}," ",b.auth.user.data.login):" нет":null!==(d=this.state.result[0])&&void 0!==d&&d.html_url?o().createElement("a",{className:"link_github",target:"_blank",href:this.state.result[0].html_url,rel:"noreferrer"}," ",this.state.result[0].login):" нет"),o().createElement("div",{className:"main-place"},"Ссылка на резюме:",Number(this.state.id)===b.auth.user.data.id?null!==(m=b.auth.user.data)&&void 0!==m&&m.link_summary?o().createElement("a",{className:"link_github",target:"_blank",href:b.auth.user.data.link_summary,rel:"noreferrer"}," ",b.auth.user.data.login):" нет":null!==(p=this.state.result[0])&&void 0!==p&&p.link_summary?o().createElement("a",{className:"link_github",target:"_blank",href:this.state.result[0].link_summary,rel:"noreferrer"}," ",this.state.result[0].login):" нет"),o().createElement("div",{className:"main-place"},Number(this.state.id)!==b.auth.user.data.id?this.state.clickCreateDialog?o().createElement("div",null,o().createElement("div",{className:"loader-small"})):o().createElement("div",{className:"button-default",style:{width:"100%",boxSizing:"border-box"},onClick:this.createChat},"Написать сообщение"):null))):this.state.notUser&&b.auth.user.isAuth?null:b.auth.user.isAuth?o().createElement("div",{className:"loader-wrapper feed-wrapper"},o().createElement("div",{className:"loader-small"})):null)):o().createElement("div",{className:"content-wall-views"},o().createElement("div",{className:"feed-wrapper"},o().createElement("div",{className:"main-place-wrapper"},o().createElement("p",null,"В разделе Профилей ведутся технические работы."))))}}],a&&we(t.prototype,a),i}(l.Component);const xe=Ce,Te=a.p+"79f1fc7e559a3564eb15acc95726812e.png",Pe=a.p+"29af39577712532a5c7641f2f9ed71df.png",je=a.p+"cc0a5518c9c63592453b39a00d7d261a.mp3";var Le=a(344),De=a.n(Le);function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}a.p,a.p;var Ie=["node","inline","className","children"];function Me(e,t,a,n,r,l,o){try{var i=e[l](o),c=i.value}catch(e){return void a(e)}i.done?t(c):Promise.resolve(c).then(n,r)}function Be(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function o(e){Me(l,n,r,o,i,"next",e)}function i(e){Me(l,n,r,o,i,"throw",e)}o(void 0)}))}}function Ae(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return Ue(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ue(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw l}}}}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Fe(){return Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Fe.apply(this,arguments)}function He(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ge(e,t){return Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ge(e,t)}function Je(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?qe(e):t}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ke(e)}function Ve(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(h,e);var t,a,n,r,l,i,c,s,u,d,m,v=(d=h,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ke(d);if(m){var a=Ke(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return Je(this,e)});function h(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),Ve(qe(t=v.call(this,e)),"getPreferredColorScheme",(function(){var e;null!==(e=window)&&void 0!==e&&e.matchMedia("(prefers-color-scheme: dark)").matches?t.setState({isDark:"dark"}):t.setState({isDark:"light"})})),Ve(qe(t),"messagesEndRef",o().createRef()),Ve(qe(t),"videoMain",o().createRef()),Ve(qe(t),"videoPeer",o().createRef()),Ve(qe(t),"localStream",null),Ve(qe(t),"streamConstraints",{audio:!0,video:!1}),Ve(qe(t),"offerOptions",{offerToReceiveAudio:1,offerToReceiveVideo:0}),Ve(qe(t),"createMessage",(function(e){t.setState({_createMessage:!0})})),Ve(qe(t),"allMessage",(function(e){t.setState({_createMessage:!1}),t.state.cent_channel&&t.state.cid&&(t.state.cent_channel.unsubscribe(),t.state.cent_channel.removeAllListeners()),e&&window.history.pushState({urlPath:"/messages"},"","/messages"),fetch("/api/chat",{method:"GET"}).then((function(e){return e.json()})).then((function(e){var a;0===(null==e||null===(a=e.status)||void 0===a?void 0:a.code)&&t.setState({chats:null==e?void 0:e.data,load:!0,loader:!1})})).catch((function(e){console.log(e)}))})),Ve(qe(t),"sendMessageButton",(function(e){var a=t.state.store.getState(),n=qe(t),r={value:document.getElementById("message_chat").value,c_id:t.state.cid},l=document.getElementById("message_chat").value;if(n.clearInput(document.getElementById("message_chat")),r.value.length>0&&r.value.search(/[a-zA-Zа-яА-Я0-9]/i)>-1){var o={created_at:(new Date).getTime(),c_id:t.state.cid,value:l,avatar_url:a.auth.user.data.avatar_url,uid:a.auth.user.data.id,date_time:Math.round((new Date).getTime()/1e3),login:a.auth.user.data.login};t.state.messages.push(o),t.setState({messages:t.state.messages}),t.scrollToBottom(),fetch("/api/messages",{method:"POST",body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){t.read(t.state.cid),t.scrollToBottom()})).catch((function(e){console.log(e)}))}})),Ve(qe(t),"sendMessage",(function(e){var a=t.state.store.getState(),n=qe(t),r={value:e.target.value,c_id:t.state.cid},l=e.target.value;if(t.state.cent_channel&&t.state.cent_channel.publish({input:{typing:a.auth.user.data.login}}).then((function(){}),(function(e){})),13!==e.keyCode&&t.setState({stateCode:e.keyCode}),13===e.keyCode&&16!==t.state.stateCode&&l.length>0){t.setState({stateCode:0});var o={created_at:(new Date).getTime(),c_id:t.state.cid,value:l,avatar_url:a.auth.user.data.avatar_url,uid:a.auth.user.data.id,date_time:Math.round((new Date).getTime()/1e3),login:a.auth.user.data.login};t.state.messages.push(o),t.setState({messages:t.state.messages}),t.scrollToBottom(),e.preventDefault(),n.clearInput(e.target),r.value.length>0&&fetch("/api/messages",{method:"POST",body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){t.read(t.state.cid)})).catch((function(e){console.log(e)}))}})),Ve(qe(t),"components",{code:function(e){e.node;var t=e.inline,a=e.className,n=e.children,r=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,Ie),l=/language-(\w+)/.exec(a||"");return!t&&l?o().createElement(k.Prism,Fe({wrapLongLines:!1,language:l[1],PreTag:"div",children:String(n).replace(/\n$/,"")},r)):o().createElement("code",Fe({className:a},r),n)}}),Ve(qe(t),"changerPage",(function(){var e=new URLSearchParams(window.location.search).get("cid");e&&(t.setState({cid:e}),t.openDialog(e)),t.allMessage()})),Ve(qe(t),"scrollToBottom",(function(){t.messagesEndRef.current.scrollIntoView({behavior:"smooth"})}));var a=window.AudioContext||window.webkitAudioContext;return t.state={cent:null,_createMessage:!1,chats:[],messages:[],dialog:!1,cid:null,cent_channel:null,typing:null,context:new a,audio:new Audio(je),loadCent:!1,messagesCount:0,load:!1,data:null,dialogTitle:null,loader:!0,store:t.props.store,openCall:!1,isDark:"light",uidUserPeer:0,am:!1,stateCode:0,lastTimeToLive:null},t.state.store.subscribe((function(){t.setState(t.state.store.getState()),t.updateState()})),t.pc1=null,t.pc2=null,t}return t=h,a=[{key:"unixToDateTime",value:function(e){return new Date(e).toLocaleString()}},{key:"clearInput",value:function(e){e.value=e.value.replace(/[\n\r]/g,""),e.value="",e.style.height="50px"}},{key:"updateState",value:function(){var e=this;if(this.state.dialog){var t="/api/message/".concat(this.state.cid);fetch(t,{method:"GET"}).then((function(e){return e.json()})).then((function(t){var a;if(0===(null==t||null===(a=t.status)||void 0===a?void 0:a.code)){if(e.setState({messages:t.data.sort((function(e,t){return Math.round(1e3*new Date(e.created_at).getTime())>Math.round(1e3*new Date(t.created_at).getTime())?1:-1})),dialog:!0,cid:e.state.cid,dialogTitle:null==t?void 0:t.title_dialog,linkUser:null==t?void 0:t.id_user,loader:!1}),document.getElementById("chats-list")){var n,r=Ae(document.getElementById("chats-list").children);try{for(r.s();!(n=r.n()).done;)n.value.classList.remove("hover-message-dialog")}catch(e){r.e(e)}finally{r.f()}}else setTimeout((function(){if(document.getElementById("chats-list")){var e,t=Ae(document.getElementById("chats-list").children);try{for(t.s();!(e=t.n()).done;)e.value.classList.remove("hover-message-dialog")}catch(e){t.e(e)}finally{t.f()}}}),600);var l,o=Ae(document.getElementById("chats-list").children);try{for(o.s();!(l=o.n()).done;){var i=l.value;i.getAttribute("id")===e.state.cid&&i.classList.add("hover-message-dialog")}}catch(e){o.e(e)}finally{o.f()}}})).catch((function(e){console.log(e)})),this.allMessage()}}},{key:"openDialog",value:function(e){var t=this,a=this.state.store.getState(),n=this,r="/api/message/".concat(e);window.history.pushState({urlPath:"/messages?cid=".concat(e)},"","/messages?cid=".concat(e));var l=a.centrifuge.object.subscribe(e,function(){var e=Be(regeneratorRuntime.mark((function e(t){var r,l,o,i,c,s,u,d,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.state.messages,(null===(r=t.data)||void 0===r||null===(l=r.input)||void 0===l?void 0:l.typing)!==a.auth.user.data.login&&null!==(c=t.data)&&void 0!==c&&null!==(s=c.input)&&void 0!==s&&s.typing){n.setState({typing:"".concat(null==t||null===(u=t.data)||void 0===u||null===(d=u.input)||void 0===d?void 0:d.typing," набирает сообщение.")});try{document.getElementById("hide-typing").style.display="block",setTimeout((function(){document.getElementById("hide-typing").style.display="none"}),5e3)}catch(e){console.error(e)}}null!=t&&null!==(o=t.data)&&void 0!==o&&o.login&&((null==t||null===(m=t.data)||void 0===m?void 0:m.login)!==a.auth.user.data.login&&n.state.context.resume().then((function(){n.state.audio.play()})),t.data.uid!==a.auth.user.data.id&&(i.push(null==t?void 0:t.data),n.setState({messages:i}),n.scrollToBottom()));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());this.setState({cent_channel:l}),fetch(r,{method:"GET"}).then((function(e){return e.json()})).then((function(a){var n;if(0===(null==a||null===(n=a.status)||void 0===n?void 0:n.code)){if(t.setState({messages:a.data.sort((function(e,t){return Math.round(1e3*new Date(e.created_at).getTime())>Math.round(1e3*new Date(t.created_at).getTime())?1:-1})),dialog:!0,cid:e,dialogTitle:null==a?void 0:a.title_dialog,linkUser:null==a?void 0:a.id_user,avatar:null==a?void 0:a.avatar,lastTimeToLive:null==a?void 0:a.last_time_to_live,loader:!1,load:!0}),t.scrollToBottom(),document.getElementById("chats-list")){var r,l=Ae(document.getElementById("chats-list").children);try{for(l.s();!(r=l.n()).done;)r.value.classList.remove("hover-message-dialog")}catch(e){l.e(e)}finally{l.f()}}else setTimeout((function(){if(document.getElementById("chats-list")){var e,t=Ae(document.getElementById("chats-list").children);try{for(t.s();!(e=t.n()).done;)e.value.classList.remove("hover-message-dialog")}catch(e){t.e(e)}finally{t.f()}}}),600);var o,i=Ae(document.getElementById("chats-list").children);try{for(i.s();!(o=i.n()).done;){var c=o.value;c.getAttribute("id")===e&&c.classList.add("hover-message-dialog")}}catch(e){i.e(e)}finally{i.f()}}})).catch((function(e){console.log(e)}))}},{key:"read",value:function(e){var t=this,a="/api/message/read/".concat(e);fetch(a,{method:"PUT",body:JSON.stringify({})}).then((function(e){return e.json()})).then((function(e){})).catch((function(e){p.toast.error(e+" - Попробуйте позже",{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0}),t.setState({auth:!1,load:!0})}))}},{key:"getMediaStream",value:(u=Be(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.store.getState(),void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.GetUserMedia;return t?new Promise((function(a,n){t.call(navigator,e,a,n)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),e.next=5,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 5:return this.localStream=e.sent,this.state.store.dispatch({type:"ACTION_SET_STREAM",value:this.localStream}),this.state.am||this.state.cent_channel.publish({type:"ready",uid:this.state.uidUserPeer}).then((function(){}),(function(e){})),e.next=10,this.openCall(t.stream);case 10:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"textToHTML",value:function(e){var t=document.createElement("div");return t.innerHTML=e,t}},{key:"componentDidMount",value:function(){var e=this;this.getPreferredColorScheme(),window.matchMedia("(prefers-color-scheme: dark)").onchange=function(t){e.getPreferredColorScheme()},this.changerPage()}},{key:"start",value:(s=Be(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({openCall:!this.state.openCall}),e.next=3,this.getMediaStream();case 3:console.log(this.state.uidUserPeerMainUUID);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"call",value:(c=Be(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMediaStream();case 2:fetch("/api/call/".concat(t),{method:"GET"}).then((function(e){return e.json()})).then((function(e){a.state.store.dispatch({type:"ACTION_SET_CALL",value:{status:"Ждем ответа",state:!0,audio:new Audio,cc:e.data.cc}}),a.state.store.dispatch({type:"ACTION_SET_AM",value:!0})}));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"openCall",value:(i=Be(regeneratorRuntime.mark((function e(t){var a,n,r,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.state.store.getState(),n=Ae(t.getTracks());try{for(n.s();!(r=n.n()).done;)l=r.value,a.webRTC.pc.addTrack(l,t)}catch(e){n.e(e)}finally{n.f()}case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"createOffer",value:(l=Be(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,a=this.state.store.getState(),e.prev=2,e.next=5,a.webRTC.pc.createOffer();case 5:return n=e.sent,e.next=8,a.webRTC.pc.setLocalDescription(n);case 8:console.log("create offer",n),this.state.cent_channel.publish({type:"offer",offer:a.webRTC.pc.localDescription,uid:t.state.uidUserPeer}).then((function(){}),(function(e){})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,12]])}))),function(){return l.apply(this,arguments)})},{key:"onOffer",value:(r=Be(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.store.getState(),n=this,e.next=4,a.webRTC.pc.setRemoteDescription(t);case 4:if("stable"===a.webRTC.pc.signalingState){e.next=14;break}return e.next=7,a.webRTC.pc.createAnswer();case 7:return r=e.sent,e.next=10,a.webRTC.pc.setLocalDescription(r);case 10:console.log(a.webRTC.pc.localDescription),this.state.cent_channel.publish({type:"answer",answer:a.webRTC.pc.localDescription,uid:n.state.uidUserPeer}).then((function(){}),(function(e){})),e.next=14;break;case 14:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"convertNewLinesToBr",value:function(e){return e.replace(/(?:\r\n|\r|\n)/g,"<br />")}},{key:"getUserMedia_success",value:function(e){this.videoMain.current.srcObject=new MediaStream(e),this.videoMain.current.play(),this.localStream=e}},{key:"getUserRemote",value:function(e){console.log(e),this.videoPeer.current.srcObject=new MediaStream(e),this.videoPeer.current.play(),this.localStream=e}},{key:"getUserMedia_click",value:(n=Be(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia(this.streamConstraints);case 2:t=e.sent,this.getUserMedia_success(t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"time2TimeAgo",value:function(e){var t=new Date,a=Math.floor(t.getTime()/1e3)-new Date(e).getTime()/1e3;return a>172800?"Был(а) больше 5 дней назад":a>86400?"Был(а) вчера":a>3600?"Был(а) 5 часов назад":a>1800?"Был(а) полчаса назад":a>60?"Был(а) "+Math.floor(a/60)+" минут назад":a<60?"Online":void 0}},{key:"render",value:function(){var e,t=this,a=this.state.store.getState();return this.state.load?a.components.settings.messenger||"admin"===a.auth.user.scope?o().createElement(o().Fragment,null,o().createElement("div",{className:"content-wall-views"},o().createElement("div",{className:"wrapper-content-default"},this.state.loader?o().createElement("div",{className:"wrapper-chats-main"},o().createElement("div",{className:"lable-dialogs-list"},"Все чаты"),o().createElement("div",{className:"chats-list"})):0===this.state.chats.length?o().createElement("div",{className:"wrapper-chats-main"},o().createElement("div",{className:"lable-dialogs-list"},"Все чаты"),o().createElement("div",{className:"chats-list"},o().createElement("div",{className:"info-user-chat",style:{color:"var(--font-color)"}},"Активных чатов пока нет"))):o().createElement("div",{className:"wrapper-chats-main"},o().createElement("div",{className:"lable-dialogs-list"},"Все чаты"),o().createElement("div",{className:"chats-list",id:"chats-list"},this.state.chats.map((function(e){var a,n;return e.no_read_count?o().createElement("div",{className:"feed-wrapper-item-chat chat-flex-row hover-message-dialog",style:{marginBottom:0},onClick:function(){return t.openDialog(e.c_id)},id:e.c_id},o().createElement("div",{className:"photo-wrapper-chat"},o().createElement("img",{src:e.avatar_url,alt:e.avatar_url})),o().createElement("div",{className:"feed-item-title",style:{padding:"13px"}},o().createElement("span",{className:"test-stat"},e.login),o().createElement("div",{className:"feed-item-datetime"},(null===(a=e.last_message)||void 0===a?void 0:a.substring(0,40))+"..."))):o().createElement("div",{className:"feed-wrapper-item-chat chat-flex-row",style:{marginBottom:0},onClick:function(){return t.openDialog(e.c_id)},id:e.c_id},o().createElement("div",{className:"photo-wrapper-chat"},o().createElement("img",{src:e.avatar_url,alt:e.avatar_url})),o().createElement("div",{className:"feed-item-title",style:{padding:"13px"}},o().createElement("span",{className:"test-stat"},e.login),o().createElement("div",{className:"feed-item-datetime"},(null===(n=e.last_message)||void 0===n?void 0:n.substring(0,40))+"...")))})))),this.state.dialog?o().createElement(o().Fragment,null,o().createElement("div",{className:"wrapper-chat"},o().createElement("div",{className:"messages-control-nav"},o().createElement("div",{className:"messages-control-nav-item"},o().createElement("div",{className:"avatar-wrapper"},o().createElement(f.Link,{href:"/user/".concat(this.state.linkUser)},o().createElement("img",{src:this.state.avatar,alt:this.state.dialogTitle}))),o().createElement("div",{className:"block-title-chat"},o().createElement(f.Link,{href:"/user/".concat(this.state.linkUser)},o().createElement("div",{className:"title-dialog"},this.state.dialogTitle)),o().createElement("div",{className:"feed-item-datetime"},this.time2TimeAgo(this.state.lastTimeToLive))))),o().createElement("div",{className:"wrapper-items",id:"messages",style:{}},null===(e=this.state.messages)||void 0===e?void 0:e.map((function(e){return a.auth.user.data.id===e.uid?o().createElement("div",{className:"message-item flex-end",style:{boxShadow:"none",background:e.read?"none":"var(--not-read-message)"}},o().createElement("div",{className:"wrapper-data",style:{flexDirection:"row",borderRadius:"10px"}},o().createElement(f.Link,{href:"/user/".concat(e.uid)},o().createElement("div",{className:"photo-wrapper"},o().createElement("img",{src:e.avatar_url,alt:e.login}))),o().createElement("div",{className:"value-post"},o().createElement("div",{className:"feed-item-title"},o().createElement(f.Link,{href:"/user/".concat(null==e?void 0:e.uid)},o().createElement("div",{className:"link-user"},null==e?void 0:e.login)),o().createElement("div",{className:"feed-item-datetime"},new Date(1e3*Math.round(new Date(e.created_at).getTime()/1e3)).toLocaleString())),o().createElement(H(),{className:"value-post",remarkPlugins:[De()],components:t.components},e.value),o().createElement("div",{className:"settings-messages"})))):o().createElement("div",{className:"message-item flex-start",style:{background:e.read?"none":"var(--not-read-message)",boxShadow:"none"},onMouseEnter:function(){t.read(e.c_id)}},o().createElement("div",{className:"wrapper-data",style:{flexDirection:"row",borderRadius:"10px"}},o().createElement(f.Link,{href:"/user/".concat(e.uid)},o().createElement("div",{className:"photo-wrapper"},o().createElement("img",{src:e.avatar_url,alt:e.login}))),o().createElement("div",{className:"value-post"},o().createElement("div",{className:"feed-item-title"},o().createElement(f.Link,{href:"/user/".concat(null==e?void 0:e.uid)},o().createElement("div",{className:"link-user"},o().createElement("span",{className:"test-stat"},null==e?void 0:e.login))),o().createElement("div",{className:"feed-item-datetime"},new Date(1e3*Math.round(new Date(e.created_at).getTime()/1e3)).toLocaleString())),o().createElement(H(),{className:"value-post",remarkPlugins:[De()],components:t.components},e.value),o().createElement("div",{className:"settings-messages"}))))})),o().createElement("div",{ref:this.messagesEndRef})),o().createElement("div",{className:"view-typing-text"},o().createElement("div",{className:"typing_user",id:"typing_user"},o().createElement("div",{className:"hide-typing",id:"hide-typing"},o().createElement("div",{className:"image-icon-typing"},o().createElement("img",{src:Pe,alt:"typing"})),o().createElement("div",{className:"typing-text"},this.state.typing))),o().createElement("div",{className:"wrapper-input"},o().createElement(K(),{onKeyDown:this.sendMessage,placeholder:"Введите сообщение",autoFocus:!0,maxRows:15,id:"message_chat",style:{borderRadius:"5px"}}),o().createElement("div",{className:"send-button",onClick:this.sendMessageButton},o().createElement("img",{src:Te,alt:"send"})))))):o().createElement(o().Fragment,null,o().createElement("div",{className:"wrapper-chat"},o().createElement("div",{className:"info-user-chat"},o().createElement("div",{style:{color:"var(--font-color)"}},"Выберите чат чтобы начать общаться")))))),o().createElement("div",{className:"tags-view"})):o().createElement("div",{className:"content-wall-views"},o().createElement("div",{className:"feed-wrapper"},o().createElement("div",{className:"main-place-wrapper"},o().createElement("p",null,"В разделе Сообщений ведутся технические работы.")))):o().createElement("div",{className:"loader-wrapper feed-wrapper"},o().createElement("div",{className:"loader"}))}}],a&&He(t.prototype,a),h}(l.Component);const We=ze;function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Ye(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ze(e,t){return Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ze(e,t)}function Qe(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xe(e){return Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Xe(e)}l.Component;const et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(i,e);var t,a,n,r,l=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xe(n);if(r){var a=Xe(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return Qe(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={callBack:t.props.callBack,enable:t.props.enable},t}return t=i,(a=[{key:"switcher",value:function(){var e;this.setState((function(e){return{enable:!e.enable}})),null===(e=this.state)||void 0===e||e.callBack(this.state.enable)}},{key:"render",value:function(){var e=this;return o().createElement("div",{className:"button-switch",style:this.state.enable?{background:"#38FC93",flexDirection:"row-reverse"}:{background:"#ff8585",flexDirection:"row"}},o().createElement("div",{className:"bobble",onClick:function(){return e.switcher()}}))}}])&&Ye(t.prototype,a),i}(l.Component);function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function at(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nt(e,t){return nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nt(e,t)}function rt(e,t){return!t||"object"!==tt(t)&&"function"!=typeof t?lt(e):t}function lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){return ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ot(e)}function it(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(i,e);var t,a,n,r,l=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ot(n);if(r){var a=ot(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return rt(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),it(lt(t=l.call(this,e)),"changeSettingsTesting",(function(e){var a={testing:!e,privat_post:t.state.store.getState().auth.user.data.privat_post};fetch("/api/settings?flags=switch",{method:"PUT",body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){t.updateState()})).catch((function(e){console.log(e)}))})),it(lt(t),"changeSettingsPrivat",(function(e){var a={testing:t.state.store.getState().auth.user.data.testing,privat_post:!e};fetch("/api/settings?flags=switch",{method:"PUT",body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){t.updateState()})).catch((function(e){console.log(e)}))})),it(lt(t),"changeSettingsAdminMainPage",(function(e){var a=t.state.store.getState(),n={main_page:!e,feed:a.components.settings.feed,messenger:a.components.settings.messenger};fetch("/api/app/components",{method:"PUT",body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){t.updateState()})).catch((function(e){console.log(e)}))})),it(lt(t),"changeSettingsAdminMessengerPage",(function(e){var a=t.state.store.getState(),n={main_page:a.components.settings.messenger,feed:a.components.settings.feed,messenger:!e};fetch("/api/app/components",{method:"PUT",body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){t.updateState()})).catch((function(e){console.log(e)}))})),it(lt(t),"changeSettingsAdminFeedPage",(function(e){var a=t.state.store.getState(),n={main_page:a.components.settings.messenger,feed:!e,messenger:a.components.settings.feed};fetch("/api/app/components",{method:"PUT",body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){t.updateState()})).catch((function(e){console.log(e)}))})),it(lt(t),"getLastVisit",(function(e){return Math.floor(e/60)})),t.state={privatPost:!1,testing:!1,load:"load",login:null,name:null,lastName:null,email:null,link:null,store:t.props.store,imagePreviewUrl:null,crop:{unit:"px",x:0,y:0,width:300,height:300,aspect:1},cropImage:null,showCrop:!1,imageRef:null},t.state.store.subscribe((function(){t.setState(t.state.store.getState())})),t}return t=i,(a=[{key:"updateState",value:function(){var e=this;fetch("/api/authentication",{method:"POST",body:JSON.stringify({})}).then((function(e){return e.json()})).then((function(t){0===(null==t?void 0:t.status.code)&&(e.state.store.dispatch({type:"ACTION_CHECK_AUTH",value:{user:{isAuth:!0,data:null==t?void 0:t.data[0],feeds:null==t?void 0:t.feed,notificationCount:null==t?void 0:t.notification_count,messagesCount:null==t?void 0:t.count_message,notifications:null==t?void 0:t.notification,token:null==t?void 0:t.token,error:null}}}),fetch("/api/app/components",{method:"GET"}).then((function(e){return e.json()})).then((function(t){0===(null==t?void 0:t.status.code)&&e.state.store.dispatch({type:"ACTION_SET_COMPONENTS",value:{settings:t.data}})})))}))}},{key:"save",value:function(){var e=this,t={login:document.getElementById("login").value,name:document.getElementById("name").value,last_name:document.getElementById("last_name").value,email:document.getElementById("email").value,link:document.getElementById("link").value};fetch("/api/settings",{method:"PUT",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){"0"===t.status.code?(document.getElementById("event_save").style.color="green",document.getElementById("event_save").innerHTML="Сохранено",e.updateState()):(document.getElementById("event_save").style.color="red",document.getElementById("event_save").innerHTML="Все поля должны быть заполнены")})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;fetch("/api/app/components",{method:"GET"}).then((function(e){return e.json()})).then((function(t){0===(null==t?void 0:t.status.code)&&(e.state.store.dispatch({type:"ACTION_SET_COMPONENTS",value:{settings:t.data}}),e.setState({load:"complete"}))}))}},{key:"render",value:function(){var e,t=this,a=this.state.store.getState();return o().createElement("div",{style:{display:"flex"}},o().createElement("div",{className:"content-wall-views"},a.auth.user.isAuth?"complete"===this.state.load?o().createElement("div",{className:"feed-wrapper"},o().createElement("div",{className:"main-place-wrapper"},o().createElement("p",null,o().createElement("b",null,"Тестирование - ")," включив режим готовности тестирования, Вы подтверждаете что готовы, в случайном порядке, в любой момент времени, получить доступ к функционалу что может работать не стабильно.")),o().createElement("div",{className:"main-place-wrapper-settings"},o().createElement("div",{className:"block-settings child_settings"},o().createElement("div",{className:"key-settings"},"Публиковать заметки приватно"),o().createElement("div",{className:"value-settings"},a.auth.user.data.privat_post?o().createElement(et,{enable:!0,callBack:function(e){return t.changeSettingsPrivat(e)}}):o().createElement(et,{enable:!1,callBack:function(e){return t.changeSettingsPrivat(e)}}))),o().createElement("div",{className:"block-settings child_settings"},o().createElement("div",{className:"key-settings"},"Участвовать в тестировании"),o().createElement("div",{className:"value-settings"},a.auth.user.data.testing?o().createElement(et,{enable:!0,callBack:function(e){return t.changeSettingsTesting(e)}}):o().createElement(et,{enable:!1,callBack:function(e){return t.changeSettingsTesting(e)}})))),o().createElement("div",{className:"main-place-wrapper-settings"},o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",maxLength:"28",placeholder:"Логин",type:"text",id:"login",defaultValue:a.auth.user.data.login})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",maxLength:"28",placeholder:"Имя",type:"text",id:"name",defaultValue:a.auth.user.data.name})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",maxLength:"28",placeholder:"Фамилия",type:"text",id:"last_name",defaultValue:a.auth.user.data.last_name})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",maxLength:"30",placeholder:"Электронная почта",type:"text",id:"email",defaultValue:a.auth.user.data.email})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("input",{className:"input-default",maxLength:"60",placeholder:"Ссылка на резюме",type:"text",id:"link",defaultValue:a.auth.user.data.link_summary})),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement("div",{className:"button-default",onClick:function(){return t.save()}},"Сохранить")),o().createElement("div",{className:"error-wrapper center",id:"event_save",style:{color:"green"}})),"admin"===a.auth.user.data.scope?o().createElement("div",null,o().createElement("div",{className:"main-place-wrapper"},o().createElement("p",null,"Панель управления")),o().createElement("div",{className:"main-place-wrapper-settings"},o().createElement("div",{className:"block-settings child_settings"},o().createElement("div",{className:"key-settings"},"messenger"),o().createElement("div",{className:"value-settings"},a.components.settings.messenger?o().createElement(et,{enable:!0,callBack:function(e){t.changeSettingsAdminMessengerPage(e)}}):o().createElement(et,{enable:!1,callBack:function(e){t.changeSettingsAdminMessengerPage(e)}}))),o().createElement("div",{className:"block-settings child_settings"},o().createElement("div",{className:"key-settings"},"main_page"),o().createElement("div",{className:"value-settings"},a.components.settings.main_page?o().createElement(et,{enable:!0,callBack:function(e){t.changeSettingsAdminMainPage(e)}}):o().createElement(et,{enable:!1,callBack:function(e){t.changeSettingsAdminMainPage(e)}}))),o().createElement("div",{className:"block-settings child_settings"},o().createElement("div",{className:"key-settings"},"feed"),o().createElement("div",{className:"value-settings"},a.components.settings.feed?o().createElement(et,{enable:!0,callBack:function(e){t.changeSettingsAdminFeedPage(e)}}):o().createElement(et,{enable:!1,callBack:function(e){t.changeSettingsAdminFeedPage(e)}}))))):null):o().createElement("div",{className:"loader-wrapper feed-wrapper"},o().createElement("div",{className:"loader"})):o().createElement("div",null,o().createElement("div",{className:"error-wrapper"},o().createElement("div",{className:"error-page"},"Авторизуйтесь чтобы просматривать эту страницу.")))),o().createElement("div",{className:"tags-view"},a.auth.user.isAuth?"complete"===this.state.load?o().createElement("div",{className:"tags-box"},o().createElement("div",{className:"main-place-photo-column "},o().createElement("img",{src:a.auth.user.data.avatar_url,alt:a.auth.user.data.login,style:{cursor:"default"}})),o().createElement("div",{className:"main-place-info-column "},o().createElement("div",{className:"main-place name"},null!==(e=a.auth.user.data)&&void 0!==e&&e.name?" "+a.auth.user.data.name+" "+a.auth.user.data.last_name:" "+a.auth.user.data.login))):a.auth.user.isAuth?null:o().createElement("div",{className:"loader-wrapper feed-wrapper"},o().createElement("div",{className:"loader"})):null))}}])&&at(t.prototype,a),i}(l.Component);const st=ct,ut=require("react-currency-input-field");var dt=a.n(ut);const mt=require("react-select");var ft=a.n(mt);function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}require("@emotion/react");var vt=["node","inline","className","children"];function ht(){return ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ht.apply(this,arguments)}function gt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yt(e,t){return yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yt(e,t)}function Et(e,t){return!t||"object"!==pt(t)&&"function"!=typeof t?wt(e):t}function wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bt(e){return bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bt(e)}function Nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function kt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(a),!0).forEach((function(t){_t(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Nt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var St=[{value:"0",label:"Легко"},{value:"1",label:"Средне"},{value:"2",label:"Сложно"}],Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"var(--bg-grey)";return{alignItems:"center",display:"flex",color:"var(--font-color)",":before":{backgroundColor:e,borderRadius:10,content:'" "',display:"block",marginRight:8,height:10,width:10}}},Ct={control:function(e){return kt(kt({},e),{},{backgroundColor:"var(--bg-grey)"})},option:function(e,t){var a=t.data,n=t.isDisabled,r=(t.isFocused,t.isSelected);return kt(kt({},e),{},{color:n?"#ccc":r?"white":a.color,cursor:n?"not-allowed":"default"})},input:function(e){return kt(kt({},e),Ot())},placeholder:function(e){return kt(kt({},e),Ot())},singleValue:function(e,t){var a=t.data;return kt(kt({},e),Ot(a.color))}};const xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(i,e);var t,a,n,r,l=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bt(n);if(r){var a=bt(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return Et(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),_t(wt(t=l.call(this,e)),"handleChangeSelect",(function(e){t.setState({selectedOption:e})})),_t(wt(t),"cancelTask",(function(){t.setState({mode:null})})),_t(wt(t),"createTask",(function(e){t.setState({mode:"create"})})),_t(wt(t),"createTaskFull",(function(){var e={title:document.getElementById("title").value,complexity:t.state.selectedOption.value,value:document.getElementById("value").value,price:t.state.price};fetch("api/freelances",{method:"POST",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t.cancelTask(),fetch("api/freelances",{method:"GET"}).then((function(e){return e.json()})).then((function(e){t.setState({free:e.data,load:"continue"})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))})),_t(wt(t),"handleChange",(function(e){t.setState({dateNow:e})})),_t(wt(t),"updatePrice",(function(e,a){t.setState({price:e})})),_t(wt(t),"components",{code:function(e){e.node;var t=e.inline,a=e.className,n=e.children,r=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,vt),l=/language-(\w+)/.exec(a||"");return!t&&l?o().createElement(k.PrismAsync,ht({style,wrapLongLines:!1,language:l[1],showLineNumbers:!1,PreTag:"div",children:String(n).replace(/\n$/,"")},r)):o().createElement("code",ht({className:a},r),n)}}),t.state={mode:null,dateNow:new Date,selectedOption:null,auth:!1,freeSearch:null,load:"load",free:null,price:0},t}return t=i,(a=[{key:"componentDidMount",value:function(){var e=this;fetch("/api/authentication",{method:"POST",body:JSON.stringify({finger:window.localStorage.getItem("finger")})}).then((function(e){return e.json()})).then((function(t){0===t.status.code?(e.setState({auth:!0}),fetch("api/freelances",{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.setState({free:t.data,load:"continue"})})).catch((function(e){console.log(e)}))):e.setState({load:"notAuth"})})).catch((function(e){console.log(e)}))}},{key:"setStartDate",value:function(e){console.log(e)}},{key:"render",value:function(){var e,t,a=this;return o().createElement("div",{className:"content-wall-views"},"notAuth"===this.state.load?o().createElement("div",null,o().createElement("div",{className:"error-wrapper"},o().createElement("div",{className:"error-page"},"Авторизуйтесь чтобы просматривать эту страницу."))):o().createElement("div",null,o().createElement("div",{className:"wrapper-search wrapper-inline-block unselectable"},o().createElement("div",{className:"main-place-wrapper"},o().createElement("p",null,o().createElement("b",null,"Фриланс - ")," Здесь ты можешь взять задачи в работу либо создать свои.")),o().createElement("div",null,o().createElement("input",{placeholder:"Найдем что нибудь для Вас...",onFocus:function(){a.cancelTask()}})),o().createElement("div",{className:"tags-wrapper"},o().createElement("div",{className:"button-default-tag tags-item unselectable button-select",id:"all",action:"main"},"Все"),o().createElement("div",{className:"button-default-tag tags-item unselectable",id:"all",action:"main"},"Созданные"),o().createElement("div",{className:"button-default-tag tags-item unselectable",id:"all",action:"main"},"В ожидании"),o().createElement("div",{className:"button-default-tag tags-item unselectable",id:"all",action:"main"},"В исполнении"),"create"===this.state.mode?null:o().createElement("div",{className:"button-default-tag tags-item unselectable",style:{background:"#4cb463",color:"#fff"},id:"all",action:"create",onClick:this.createTask},"Создать задачу")),"create"===this.state.mode?o().createElement("div",{className:"wrapper-white-default"},o().createElement("div",{className:"auth-box-title"},o().createElement("div",{className:"title-span-auth"},"Задача")),o().createElement("div",{className:"wrapper-bottom"},o().createElement("div",{className:"wrapper-flex-start"},o().createElement("input",{autoFocus:!0,className:"input-default",id:"title",placeholder:"Заголовок",type:"text"})),o().createElement("div",{className:"wrapper-flex-end-margin"},o().createElement(ft(),{id:"complexity",placeholder:"Сложность",className:"selected-box",value:this.state.selectedOption,onChange:this.handleChangeSelect,options:St,styles:Ct}))),o().createElement("div",{className:"wrapper-input fix_wrapper"},o().createElement(K(),{id:"value",minRows:12,placeholder:"Описание задачи",style:{borderRadius:"5px"}})),o().createElement("div",{className:"wrapper-bottom"},o().createElement("div",{className:"wrapper-flex-start"},o().createElement(dt(),{id:"price",className:"input-default",intlConfig:{locale:"ru-RU",currency:"RUB"},name:"price",placeholder:"Стоимость",maxLength:6,defaultValue:0,decimalsLimit:2,onValueChange:function(e,t){return a.updatePrice(e,t)},style:{width:"220px"}})),o().createElement("div",{className:"wrapper-flex-end-margin"},o().createElement("div",{className:"button-default",onClick:function(){a.cancelTask()}},"Отменить"),o().createElement("div",{className:"button-default",onClick:this.createTaskFull},"Опубликовать")))):null),"load"===this.state.load?o().createElement("div",{className:"loader-wrapper feed-wrapper"},o().createElement("div",{className:"loader"})):"error"===this.state.load?o().createElement("div",null,o().createElement("div",{className:"not_news"},"Ошибка соединеия с сервером. Попробуйте поздее.")):"onFocusSearch"===this.state.load?o().createElement("div",{className:"feed-wrapper"},o().createElement("div",{className:"not_news"},"Начните вводить и мы начнем искать...")):"onSearchError"===this.state.load?o().createElement("div",{className:"feed-wrapper"},o().createElement("div",{className:"not_news"},"К сожалению по Вашему запросу ничего не найдено 🙁")):"continueSearch"===this.state.load?o().createElement("div",{className:"feed-wrapper"},null===(e=this.state.freeSearch)||void 0===e?void 0:e.map((function(e){return o().createElement("div",null,e.id)}))):"continue"===this.state.load?o().createElement("div",{className:"feed-wrapper"},null===(t=this.state.free)||void 0===t?void 0:t.map((function(e){return o().createElement(f.Link,{style:{textDecoration:"none"},href:"/task?uuid=".concat(null==e?void 0:e.ID)},o().createElement("div",{key:e.id,className:"task-view"},o().createElement("div",{className:"task-view-flex"},o().createElement("div",{className:"image-user"},o().createElement("img",{className:"image-user-src",src:e.avatar_url,alt:e.login,onClick:function(t){t.preventDefault(),window.location.href="/user/".concat(null==e?void 0:e.user_creator_id)}})),o().createElement("div",{className:"info-user"},o().createElement("div",{className:"feed-item-title"},o().createElement("div",{className:"link-user"},null==e?void 0:e.title),o().createElement("div",{className:"feed-item-datetime"},(null==e||e.status,o().createElement("span",{style:{color:"green"}},"Ожидает исполнителя"))),o().createElement("div",{className:"feed-item-datetime"},0===(null==e?void 0:e.complexity)?o().createElement("span",{style:{color:"green"}},"Легко"):1===(null==e?void 0:e.complexity)?o().createElement("span",{style:{color:"orange"}},"Средне"):2===(null==e?void 0:e.complexity)?o().createElement("span",{style:{color:"red"}},"Сложно"):o().createElement("span",null,"Сложность не определенна")))),o().createElement("div",{className:"task-price"},o().createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",color:"var(--font-color)"}},"0"===(null==e?void 0:e.price)?"Вознаграждение не указано":parseInt(null==e?void 0:e.price).toLocaleString("ru")+" ₽")))))}))):null))}}])&&gt(t.prototype,a),i}(l.Component);function Tt(e){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tt(e)}function Pt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jt(e,t){return jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jt(e,t)}function Lt(e,t){return!t||"object"!==Tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Dt(e)}var Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(i,e);var t,a,n,r,l=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dt(n);if(r){var a=Dt(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return Lt(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={store:t.props.store},t.state.store.subscribe((function(){t.setState(t.state.store.getState())})),t}return t=i,a=[{key:"componentDidMount",value:function(){}},{key:"callExecutor",value:function(e,t,a){fetch("/api/task/",{method:"POST",body:JSON.stringify({uuid:e,uid:t,flag:a})}).then((function(e){return e.json()})).then((function(e){e.status.code,console.log(e)})).catch((function(e){console.log(e)}))}},{key:"checkNotification",value:function(e,t){fetch("/api/notification",{method:"PUT",body:JSON.stringify({feeds_uuid:e,addr:t})}).then((function(e){return e.json()})).then((function(t){0===t.status.code&&(window.location.href="/post?uuid=".concat(e))})).catch((function(e){console.log(e)}))}},{key:"unixToDateTime",value:function(e){return new Date(1e3*e).toLocaleString()}},{key:"render",value:function(){var e,t,a=this,n=this.state.store.getState();return o().createElement("div",{className:"content-wall-views"},o().createElement("div",{className:"wrapper-feed"},o().createElement("div",{className:"feed-wrapper"},null!==(e=n.auth.user.notifications)&&void 0!==e&&e.length?null===(t=n.auth.user.notifications)||void 0===t?void 0:t.map((function(e){return null!=e&&e.is_look?null:o().createElement("div",{className:"notifications-item background-white"},o().createElement("div",{className:"info-notification-item feed-item-datetime"},a.unixToDateTime(null==e?void 0:e.date_time)),o().createElement("div",{className:"info-notification-item"},"post"===(null==e?void 0:e.types)?null!=e&&e.user_event_action?o().createElement("div",null,o().createElement("span",{className:"link-user",onClick:function(t){t.preventDefault(),window.location.href="/user/".concat(null==e?void 0:e.uwuid)}},null==e?void 0:e.user_event_action),o().createElement("span",null," посмотрел Вашу заметку")):o().createElement("div",null,o().createElement("span",null,"Неавторизованный пользователь посмотрел Вашу заметку")):"comment"===(null==e?void 0:e.types)?o().createElement("div",null,o().createElement("span",{className:"link-user",onClick:function(t){t.preventDefault(),window.location.href="/user/".concat(null==e?void 0:e.uwuid)}},null==e?void 0:e.user_event_action),o().createElement("span",null," оставил новый комментарий")):"task"===(null==e?void 0:e.types)?o().createElement("div",null,o().createElement("span",{className:"link-user",onClick:function(t){t.preventDefault(),window.location.href="/user/".concat(null==e?void 0:e.uwuid)}},null==e?void 0:e.user_event_action),o().createElement("span",null," хочет выполнить ",o().createElement("a",{target:"_blank",className:"link-user",href:"/task?uuid=".concat(null==e?void 0:e.feeds_uuid)},"задачу"))):null),"task"===(null==e?void 0:e.types)?o().createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem"}},o().createElement("div",{className:"button-default",onClick:function(){return a.callExecutor(e.feeds_uuid,null==e?void 0:e.uwuid,!0)}},"Отклонить"),o().createElement("div",{className:"button-default",onClick:function(){return a.callExecutor(e.feeds_uuid,null==e?void 0:e.uwuid,!1)}},"Отдать в работу")):o().createElement("div",{className:"info-notifications-item"},o().createElement("div",{className:"button-default",onClick:function(){return a.checkNotification(e.feeds_uuid,e.addr)}},"Перейти к заметке")))})):o().createElement("div",{className:"error-wrapper"},o().createElement("div",{className:"error-page"},"Новых событий пока нет.")))))}}],a&&Pt(t.prototype,a),i}(l.Component);const It=Rt;function Mt(e){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}function Bt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function At(e,t){return At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},At(e,t)}function Ut(e,t){return!t||"object"!==Mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ft(e){return Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ft(e)}const Ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}(i,e);var t,a,n,r,l=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ft(n);if(r){var a=Ft(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return Ut(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={},t}return t=i,(a=[{key:"render",value:function(){return o().createElement("div",{className:"content-wall-views"},o().createElement("div",{className:"wrapper-feed"},o().createElement("div",{className:"feed-wrapper"},o().createElement("div",{className:"main-place-wrapper"},o().createElement("p",null,o().createElement("b",null,"Команды - ")," это раздел где можно присоединится к уже существующей команде единомышленников или создать свою.",o().createElement("br",null),"Раздел пока в разработке, поэтому здесь ничего нет.")))))}}])&&Bt(t.prototype,a),i}(l.Component),Gt=(require("react-toastify/dist/ReactToastify.css"),a.p+"8b248dacb3acbce45404f931369ce1c5.png"),Jt=a.p+"bdc6307d8dd351084cc8bf99bad0ddda.png",qt=a.p+"6a2343046af14d5d9b5e0e301cc30aa5.png",Kt=a.p+"7135f125a809e97a87049ba70d329fe8.png",Vt=a.p+"5aef9798d871c0e57497f0c497e0447e.png",zt=a.p+"18b72a5e739da6f8267ece2fbf3fab16.png",Wt=a.p+"abee6d9efaa8c3e925ef1dca4d3a5d45.png",$t=a.p+"a2c0b65ceb85628b1120ef8e45b9b603.png",Yt=a.p+"d1a95ac5340727dcdf5ab03362785e55.png",Zt=a.p+"ed17ec51f4947f65d140dd82d30e2754.png",Qt=a.p+"955f997bd5de03e787cabb5f17d1b9ca.png",Xt=a.p+"051dd92f34fcd71aeb8550c71252f47f.png";function ea(e){return ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ea(e)}function ta(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aa(e,t){return aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},aa(e,t)}function na(e,t){return!t||"object"!==ea(t)&&"function"!=typeof t?ra(e):t}function ra(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function la(e){return la=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},la(e)}function oa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aa(e,t)}(i,e);var t,a,n,r,l=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=la(n);if(r){var a=la(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return na(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),oa(ra(t=l.call(this,e)),"updateHistory",(function(e){t.state.store.dispatch({type:"ACTION_UPDATE_HISTORY",value:{path:null,id:e}})})),oa(ra(t),"getPreferredColorScheme",(function(){var e;null!==(e=window)&&void 0!==e&&e.matchMedia("(prefers-color-scheme: dark)").matches?t.setState({isDark:"dark"}):t.setState({isDark:"light"})})),t.state={load:!1,isDark:"light",store:t.props.store},t.state.store.subscribe((function(){t.setState(t.state.store.getState())})),t}return t=i,(a=[{key:"componentDidMount",value:function(){var e=this;this.getPreferredColorScheme(),window.matchMedia("(prefers-color-scheme: dark)").onchange=function(t){e.getPreferredColorScheme()},this.setState({load:!0})}},{key:"render",value:function(){var e=this.state.store.getState();return e.auth.user.isAuth?o().createElement("div",{className:"wrapper-vertical-nav"},this.state.load?o().createElement("div",null,o().createElement("div",{className:"nav-item"},o().createElement(f.Link,{className:"nav-value",href:"/user/".concat(e.auth.user.data.id)},o().createElement("div",{className:"icon-image"},"light"===this.state.isDark?o().createElement("img",{src:Kt,alt:"Ваша страница"}):o().createElement("img",{src:Xt,alt:"Ваша страница"})),o().createElement("div",{className:"nav-value"},"Моя страница"))),o().createElement("div",{className:"nav-item"},e.auth.user.messagesCount?o().createElement("div",{className:"counter-notification",id:"counter_notification",path:"/messages"},e.auth.user.messagesCount>10?"10+":e.auth.user.messagesCount):null,o().createElement(f.Link,{className:"nav-value",href:"/messages"},o().createElement("div",{className:"icon-image"},"light"===this.state.isDark?o().createElement("img",{src:Vt,alt:"Мессенджер"}):o().createElement("img",{src:zt,alt:"Мессенджер"})),o().createElement("div",{className:"nav-value"},"Мессенджер"))),o().createElement("div",{className:"nav-item"},o().createElement(f.Link,{className:"nav-value",href:"/feeds"},o().createElement("div",{className:"icon-image"},"light"===this.state.isDark?o().createElement("img",{src:Gt,alt:"Заметки"}):o().createElement("img",{src:Jt,alt:"Заметки"})),o().createElement("div",{className:"nav-value"},"Новости"))),o().createElement("div",{className:"nav-item"},o().createElement(f.Link,{className:"nav-value",href:"/people"},o().createElement("div",{className:"icon-image"},"light"===this.state.isDark?o().createElement("img",{src:Wt,alt:"Люди"}):o().createElement("img",{src:$t,alt:"Люди"})),o().createElement("div",{className:"nav-value"},"Люди"))),o().createElement("div",{className:"nav-item"},e.auth.user.notificationCount?o().createElement("div",{className:"counter-notification",id:"counter_notification",path:"/notification"},e.auth.user.notificationCount>10?"10+":e.auth.user.notificationCount):null,o().createElement(f.Link,{className:"nav-value",href:"/notification"},o().createElement("div",{className:"icon-image"},"light"===this.state.isDark?o().createElement("img",{src:Yt,alt:"События"}):o().createElement("img",{src:Zt,alt:"События"})),o().createElement("div",{className:"nav-value"},"Уведомления"))),e.auth.user.data.testing?o().createElement("div",null,o().createElement("div",{className:"nav-item"},o().createElement(f.Link,{className:"nav-value",href:"/freelances"},o().createElement("div",{className:"icon-image"},"light"===this.state.isDark?o().createElement("img",{src:V,alt:"Задачи"}):o().createElement("img",{src:qt,alt:"Задачи"})),o().createElement("div",{className:"nav-value"},"Фриланс")))):null):o().createElement("div",{className:"loader-flex"},o().createElement("div",{className:"loader-small"}))):"/"!==window.location.pathname?o().createElement("div",{className:"wrapper-vertical-nav"},this.state.load?o().createElement("div",{className:"nav-item"},o().createElement(f.Link,{className:"nav-value",href:"/"},o().createElement("div",{className:"icon-image"},o().createElement("img",{src:Qt,alt:"messages"})),o().createElement("div",{className:"nav-value"},"Войти"))):o().createElement("div",{className:"loader-flex"},o().createElement("div",{className:"loader-small"}))):null}}])&&ta(t.prototype,a),i}(l.Component);function ca(e){return ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ca(e)}function sa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ua(e,t){return ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ua(e,t)}function da(e,t){return!t||"object"!==ca(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ma(e){return ma=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ma(e)}const fa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ua(e,t)}(i,e);var t,a,n,r,l=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ma(n);if(r){var a=ma(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return da(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={},t}return t=i,(a=[{key:"render",value:function(){return o().createElement("div",{className:"content-wall-views"},o().createElement("div",{className:"feed-wrapper"},o().createElement("div",{className:"block-preview-main"},o().createElement("div",{className:"image-main-developer"},o().createElement("img",{className:"main-developer-photos",src:"https://avatars.githubusercontent.com/u/29627450?v=4",alt:"Андрей Шмелев-Шампанов"})),o().createElement("div",{className:"message-info"},o().createElement("p",null,"Привет и добро пожаловать к нам."),o().createElement("div",{className:"m-small-bobble"}),o().createElement("div",{className:"s-small-bobble"})))))}}])&&sa(t.prototype,a),i}(l.Component),pa=a.p+"3ff4331f535f9f479413205daa68859b.png";function va(e){return va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},va(e)}function ha(e){return function(e){if(Array.isArray(e))return ga(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ga(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ga(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ga(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function ya(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ea(e,t){return Ea=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ea(e,t)}function wa(e,t){return!t||"object"!==va(t)&&"function"!=typeof t?ba(e):t}function ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Na(e){return Na=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Na(e)}function ka(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var _a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ea(e,t)}(i,e);var t,a,n,r,l=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Na(n);if(r){var a=Na(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return wa(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),ka(ba(t=l.call(this,e)),"allUsers",(function(e){document.getElementById("search_users").value="",e.target.classList.add("button-select"),fetch("api/user",{method:"GET"}).then((function(e){return e.json()})).then((function(e){t.setState({users:e.data,load:"continue"})})).catch((function(e){console.log(e)}))})),ka(ba(t),"downPage",(function(){if("/people"===window.location.pathname){var e=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);if(window.scrollY>=e-100-innerHeight&&!t.state.scrollDown){t.setState({scrollDown:!0});var a=t.state.store.getState(),n=a.people.length;t.setState({last_count_users:n}),fetch("api/user/pagination/".concat(n),{method:"GET"}).then((function(e){return e.json()})).then((function(e){if(0===e.data.length)t.setState({small_louder_show:!1});else{var n=[].concat(ha(a.people),ha(e.data));t.state.store.dispatch({type:"ACTION_UPDATE_PEOPLE",value:n})}t.setState({load:"continue"})})).catch((function(e){console.log(e)})),setTimeout((function(){t.setState({scrollDown:!1})}),1e3)}}})),ka(ba(t),"focusSearch",(function(){t.setState({load:"onFocusSearch"})})),ka(ba(t),"changeSearch",(function(e){fetch("api/user?q=".concat(e.target.value),{method:"GET"}).then((function(e){return e.json()})).then((function(e){e.data.length?t.setState({usersSearch:e.data,load:"continueSearch"}):t.setState({usersSearch:e.data,load:"onSearchError"})})).catch((function(e){console.log(e)}))})),ka(ba(t),"blurSearch",(function(){})),t.state={load:"load",users:null,usersSearch:null,error:null,scrollDown:!1,last_count_users:0,small_louder_show:!0,store:t.props.store},t.state.store.subscribe((function(){t.setState(t.state.store.getState())})),t}return t=i,a=[{key:"componentDidMount",value:function(){var e=this;window.onscroll=this.downPage,fetch("/api/authentication",{method:"POST",body:JSON.stringify({finger:window.localStorage.getItem("finger")})}).then((function(e){return e.json()})).then((function(t){0===t.status.code?(e.setState({auth:!0}),fetch("api/user",{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.state.store.dispatch({type:"ACTION_UPDATE_PEOPLE",value:t.data}),e.setState({load:"continue"})})).catch((function(e){console.log(e)}))):e.setState({load:"notAuth"})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e,t,a=this.state.store.getState();return o().createElement("div",null,o().createElement("div",{className:"content-wall-views"},"notAuth"===this.state.load?o().createElement("div",null,o().createElement("div",{className:"error-wrapper"},o().createElement("div",{className:"error-page"},"Авторизуйтесь чтобы просматривать эту страницу."))):o().createElement("div",null,o().createElement("div",{className:"wrapper-search wrapper-inline-block unselectable"},o().createElement("div",null,o().createElement("input",{placeholder:"Начните вводить...",id:"search_users",onFocus:this.focusSearch,onBlur:this.blurSearch,onChange:this.changeSearch})),o().createElement("div",{className:"tags-wrapper"},o().createElement("div",{className:"button-default-tag tags-item unselectable button-select",id:"all_users",action:"all",onClick:this.allUsers},"Все"))),"load"===this.state.load?o().createElement("div",{className:"loader-wrapper feed-wrapper"},o().createElement("div",{className:"loader"})):"error"===this.state.load?o().createElement("div",null,o().createElement("div",{className:"not_news"},"Ошибка соединения с сервером. Попробуйте позднее.")):"onFocusSearch"===this.state.load?o().createElement("div",{className:"feed-wrapper"},o().createElement("div",{className:"not_news"},"Начните вводить и мы начнем искать...")):"onSearchError"===this.state.load?o().createElement("div",{className:"feed-wrapper"},o().createElement("div",{className:"not_news"},"К сожалению по Вашему запросу ничего не найдено 🙁")):"continueSearch"===this.state.load?o().createElement("div",{className:"feed-wrapper"},null===(e=this.state.usersSearch)||void 0===e?void 0:e.map((function(e){return o().createElement("div",{key:e.id,className:"users-view"},o().createElement(f.Link,{href:"/user/".concat(null==e?void 0:e.id)},o().createElement("div",{className:"image-user"},o().createElement("img",{className:"image-user-src-people",src:e.avatar_url,alt:e.login}))),o().createElement("div",{className:"info-user"},o().createElement("div",{className:"feed-item-title"},o().createElement(f.Link,{href:"/user/".concat(null==e?void 0:e.id)},o().createElement("div",{className:"link-user"},null==e?void 0:e.login))),o().createElement("div",{className:"more-info"},o().createElement("div",{className:"more-info-value"},"Компания:",null!=e&&e.company?" "+e.company:" не указана"),o().createElement("div",{className:"more-info-value"},"Локация:",null!=e&&e.location?" "+e.location:" не указана"))))}))):"continue"===this.state.load?o().createElement("div",{className:"feed-wrapper"},null===(t=a.people)||void 0===t?void 0:t.map((function(e){return o().createElement("div",{key:e.id,className:"users-view"},o().createElement(f.Link,{href:"/user/".concat(null==e?void 0:e.id)},o().createElement("div",{className:"image-user"},o().createElement("img",{className:"image-user-src-people",src:e.avatar_url,alt:e.login}))),o().createElement("div",{className:"info-user"},o().createElement("div",{className:"feed-item-title"},o().createElement(f.Link,{href:"/user/".concat(null==e?void 0:e.id)},o().createElement("div",{className:"link-user"},null==e?void 0:e.login))),o().createElement("div",{className:"more-info"},o().createElement("div",{className:"more-info-value"},"Компания:",null!=e&&e.company?" "+e.company:" не указана"),o().createElement("div",{className:"more-info-value"},"Локация:",null!=e&&e.location?" "+e.location:" не указана"))))})),this.state.small_louder_show?o().createElement("div",{className:"loader-wrapper feed-wrapper"},o().createElement("div",{className:"loader-small"})):o().createElement("div",{className:"loader-wrapper feed-wrapper"},o().createElement("div",null,"Больше показать нечего"))):null)),o().createElement("div",{className:"tags-view"}))}}],a&&ya(t.prototype,a),i}(l.Component);const Sa=_a;var Oa={auth:{user:{isAuth:!1,data:null,feeds:null,notificationCount:0,messagesCount:0,notifications:null,token:null,error:null}},centrifuge:{object:null},history:{path:null,id:null},components:{settings:{main_page:!0,messenger:!0,feed:!0}},webRTC:{pc:null},status_call:"connecting",call:{state:!1,audio:null},stream:null,am:!1,people:[],notification_user:{}};function Ca(e){return Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ca(e)}var xa=["node","inline","className","children"];function Ta(){return Ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ta.apply(this,arguments)}function Pa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ja(e,t){return ja=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ja(e,t)}function La(e,t){return!t||"object"!==Ca(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Da(e){return Da=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Da(e)}const Ra=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ja(e,t)}(i,e);var t,a,n,r,l=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Da(n);if(r){var a=Da(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return La(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={},t.components={code:function(e){e.node;var t=e.inline,a=e.className,n=e.children,r=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,xa),l=/language-(\w+)/.exec(a||"");return!t&&l?o().createElement(k.Prism,Ta({wrapLongLines:!1,language:l[1],PreTag:"div",children:String(n).replace(/\n$/,"")},r)):o().createElement("code",Ta({className:a},r),n)}},t}return t=i,(a=[{key:"render",value:function(){return o().createElement("div",null,o().createElement("div",{className:"content-wall-views"},o().createElement("div",{className:"wrapper-about"},o().createElement("div",{className:"about-text"}))))}}])&&Pa(t.prototype,a),i}(l.Component);function Ia(e){return Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ia(e)}var Ma=["node","inline","className","children"];function Ba(){return Ba=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ba.apply(this,arguments)}function Aa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ua(e,t){return Ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ua(e,t)}function Fa(e,t){return!t||"object"!==Ia(t)&&"function"!=typeof t?Ha(e):t}function Ha(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ga(e){return Ga=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ga(e)}function Ja(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var qa=a(344),Ka=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ua(e,t)}(i,e);var t,a,n,r,l=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ga(n);if(r){var a=Ga(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return Fa(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ja(Ha(t=l.call(this,e)),"getPreferredColorScheme",(function(){var e;null!==(e=window)&&void 0!==e&&e.matchMedia("(prefers-color-scheme: dark)").matches?t.setState({isDark:"dark"}):t.setState({isDark:"light"})})),Ja(Ha(t),"handleKeyPress",(function(){document.getElementById("comments_view").scrollTop=document.getElementById("comments_view").scrollHeight})),Ja(Ha(t),"components",{code:function(e){e.node;var t=e.inline,a=e.className,n=e.children,r=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,Ma),l=/language-(\w+)/.exec(a||"");return!t&&l?o().createElement(k.Prism,Ba({wrapLongLines:!1,language:l[1],PreTag:"div",children:String(n).replace(/\n$/,"")},r)):o().createElement("code",Ba({className:a},r),n)}}),Ja(Ha(t),"actionExec",(function(e){e.target.classList.add("wait_blink"),t.setState({exec:"Ожидаем подтверждения"});var a={uuid:e.target.getAttribute("uuid")};fetch("api/notification",{method:"POST",body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){0===e.status.code&&console.log(e)})).catch((function(e){console.log(e),t.setState({isLoaded:!1,result:{}})}))})),t.state={name:"React"},t.state={error:null,isLoaded:!1,result:null,mainFeed:null,task:null,isLoadedFeed:!1,comments:null,counter:0,auth:!1,load:!1,data:null,event:null,notFeed:!1,isDark:"light",user:null,store:t.props.store,exec:"Стать исполнителем"},t.refActionExecButton=o().createRef(),t.state.store.subscribe((function(){t.setState(t.state.store.getState())})),t}return t=i,a=[{key:"like",value:function(e){var t={feeds_uuid:e};fetch("api/like",{method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){0===t.status.code&&(document.getElementById(e).innerHTML=t.data.count+" Нравиться"),console.log(t)})).catch((function(e){console.log(e)}))}},{key:"previewClick",value:function(e){var t=document.getElementsByClassName(e)[0];console.log(t),t.classList.toggle("preview_swap")}},{key:"sendComments",value:function(){var e=this,t={value:document.getElementById("text_comments").value,to_uuid:document.getElementById("place_feed").getAttribute("uuid")};""!==t.value&&fetch("api/comments",{method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){console.log(t),0===t.status.code&&(e.getTask(),document.getElementById("text_comments").value=""),console.log(t)})).catch((function(e){console.log(e)}))}},{key:"componentWillMount",value:function(){var e=this;this.getPreferredColorScheme(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(t){e.getPreferredColorScheme()})),fetch("api/authentication",{method:"POST"}).then((function(e){return e.json()})).then((function(t){0===t.status.code&&t.data.length>0&&e.setState({isLoaded:!0,auth:!0,result:t.data,data:t.data,mainFeed:t.feed,notification_count:t.notification_count,notification:t.notification,token:t.token,messagesCount:t.count_message})})).catch((function(t){console.log(t),e.setState({isLoaded:!1,result:{}})})),this.getTask()}},{key:"getTask",value:function(){var e=this,t=new URL(window.location.href).searchParams.get("uuid"),a="api/task/".concat(t,"/");""!==t&&fetch(a,{method:"GET"}).then((function(e){return e.json()})).then((function(t){0===t.status.code?e.setState({isLoadedFeed:!0,task:t.data,comments:t.comments,event:t.events,counter:t.counter,user:t.user,load:!0}):e.setState({isLoadedFeed:!1,task:t.data,comments:t.comments,counter:t.counter,load:!0,notFeed:!0})})).catch((function(t){console.log(t),e.setState({isLoaded:!1,result:{},load:!0})}))}},{key:"unixToDateTime",value:function(e){return new Date(1e3*e).toLocaleString()}},{key:"render",value:function(){var e,t,a,n=this,r=this.state.store.getState();console.log(f);var l=this.state,i=l.isLoadedFeed,c=l.task,s=l.result,u=l.comments,d=l.counter,m=l.user,f=l.event;return o().createElement("div",{style:{display:"flex"}},o().createElement("div",{className:"content-wall-views"},i?o().createElement("div",{className:"comments-view",id:"comments_view"},o().createElement("div",{className:"place-items",id:"place_feed",uuid:null==c?void 0:c.id},o().createElement(G.JsonLd,{item:{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"DevCodeMyLife",item:"https://devcodemylife.tech"},{"@type":"ListItem",position:2,name:"Фриланс",item:"https://devcodemylife.tech/freelances"},{"@type":"ListItem",position:3,name:(null==c?void 0:c.title)||(null==c||null===(e=c.value)||void 0===e?void 0:e.substring(0,30)),item:"https://devcodemylife.tech/task?uuid=".concat(null==c?void 0:c.ID)}]}}),o().createElement(J.Helmet,null,o().createElement("title",null,(null==c?void 0:c.title)||(null==c||null===(t=c.value)||void 0===t?void 0:t.substring(0,30))," | DevCodeMyLife"),o().createElement("meta",{name:"Keywords",content:"dev, code, life, messenger, социальная сеть, для разработчиков, "+(null==c?void 0:c.title)})),o().createElement("div",{className:"feed-item-value"},o().createElement("div",{key:"asldk",className:"wrapper-data"},o().createElement("div",{key:"aksdlkasd",className:"photo-wrapper"},Math.floor((new Date).getTime()/1e3)-Math.floor(new Date(null==c?void 0:c.last_active_at).getTime()/1e3)>120?null:o().createElement("div",{className:"online_user"}),o().createElement("img",{key:"asdmmmmasd",src:null==c?void 0:c.photo,alt:null==c?void 0:c.user,onClick:function(e){e.preventDefault(),window.location.href="/user/".concat(null==c?void 0:c.uid)}})),o().createElement("div",{className:"value-post"},o().createElement("div",{className:"feed-item-title"},o().createElement("div",{className:"link-user",onClick:function(e){e.preventDefault(),window.location.href="/user/".concat(null==c?void 0:c.uid)}},null==c?void 0:c.user),o().createElement("div",{className:"feed-item-datetime"},this.unixToDateTime(null==c?void 0:c.date_time))))),o().createElement("div",{className:"title-feed"},null==c?void 0:c.title),o().createElement("div",{key:"asldk",className:"wrapper-data"},o().createElement(H(),{className:"value-post",remarkPlugins:[qa],components:this.components},null==c?void 0:c.value))),o().createElement("div",{className:"wrapper-bottom"},o().createElement("div",{className:"like_wrapper wrapper-flex-start"},o().createElement("div",{className:"like",onClick:function(){return n.like(null==c?void 0:c.id)}},o().createElement("div",{className:"like-item"},"light"===this.state.isDark?o().createElement("img",{src:_,alt:"like"}):o().createElement("img",{src:C,alt:"like"})),o().createElement("div",{className:"like-text"},o().createElement("span",{className:"like-count",id:null==c?void 0:c.id},null==c?void 0:c.count_like," Нравиться"))),o().createElement("div",{className:"like"},o().createElement("div",{className:"like-item"},"light"===this.state.isDark?o().createElement("img",{src:S,alt:"like"}):o().createElement("img",{src:O,alt:"like"})),o().createElement("div",{className:"like-text"},o().createElement("span",{className:"like-count"},d," Просмотров"))),r.auth.user.isAuth&&r.auth.user.data.id!==(null==c?void 0:c.user_creator_id)&&"wait"===(null==c?void 0:c.status)?""===(null==f?void 0:f.feeds_uuid)||null!=f&&f.block||null!=f&&f.executor?""!==(null==f?void 0:f.feeds_uuid)||null!=f&&f.block||null!=f&&f.executor?""===(null==f?void 0:f.feeds_uuid)||null==f||!f.block||null!=f&&f.executor?""===(null==f?void 0:f.feeds_uuid)||null!=f&&f.block||null==f||!f.executor?null:o().createElement("div",{className:"like",onClick:this.actionExec,uuid:null==c?void 0:c.id,ref:this.refActionExecButton},o().createElement("div",{className:"like-text",uuid:null==c?void 0:c.id},o().createElement("span",{className:"like-count ready_blink",uuid:null==c?void 0:c.id},"Отправить на проверку"))):o().createElement("div",{className:"like",uuid:null==c?void 0:c.id,ref:this.refActionExecButton},o().createElement("div",{className:"like-text",uuid:null==c?void 0:c.id},o().createElement("span",{className:"like-count fail_blink",uuid:null==c?void 0:c.id},"Запрос отклонен"))):o().createElement("div",{className:"like",onClick:this.actionExec,uuid:null==c?void 0:c.id,ref:this.refActionExecButton},o().createElement("div",{className:"like-text",uuid:null==c?void 0:c.id},o().createElement("span",{className:"like-count",uuid:null==c?void 0:c.id},this.state.exec))):o().createElement("div",{className:" like",uuid:null==c?void 0:c.id,ref:this.refActionExecButton},o().createElement("div",{className:"like-text",uuid:null==c?void 0:c.id},o().createElement("span",{className:"like-count wait_blink",uuid:null==c?void 0:c.id},"Ожидаем подтверждения"))):null,o().createElement("div",{className:"like"},o().createElement("div",{className:"like-text"},"0"!==(null==c?void 0:c.price)?o().createElement("span",{className:"like-count"},parseInt(null==c?void 0:c.price).toLocaleString("ru")," руб."):o().createElement("span",{className:"like-count"},"Вознаграждение не указано")))),o().createElement("div",{className:"like_wrapper wrapper-flex-end"},null!=c&&c.tag?o().createElement("div",{className:"tags-type"},"#",null==c?void 0:c.tag):null)),this.state.isLoaded?s.map((function(e){var t;return o().createElement("div",{className:"feed-comments-wrapper-item background-white"},o().createElement("div",{className:"wrapper-comments"},o().createElement("div",{className:"comments-title bottom-line"},"Комментарии"),o().createElement("div",{className:"wall-comments"},null!==(t=n.state.comments)&&void 0!==t&&t.length?u.map((function(e){return o().createElement("div",null,o().createElement("div",{className:"feed-item-value"},o().createElement("div",{className:"feed-item-value"},o().createElement("div",{key:"asldk",className:"wrapper-data"},o().createElement("div",{key:"aksdlkasd",className:"photo-wrapper"},o().createElement("img",{key:"asdmmmmasd",src:null==e?void 0:e.photo,alt:null==e?void 0:e.user,onClick:function(t){t.preventDefault(),window.location.href="/user/".concat(null==e?void 0:e.user_id)}})),o().createElement("div",{className:"value-post"},o().createElement("div",{className:"feed-item-title"},o().createElement("div",{className:"link-user",onClick:function(t){t.preventDefault(),window.location.href="/user/".concat(null==e?void 0:e.user_id)}},null==e?void 0:e.user),o().createElement("div",{className:"feed-item-datetime"},n.unixToDateTime(null==e?void 0:e.date_time)))))),o().createElement("div",{className:"wrapper-data"},o().createElement(H(),{className:"value-post",remarkPlugins:[qa],components:n.components},null==e?void 0:e.value))))})):o().createElement("div",{className:"no-comments"},"Новых комментариев нет.")),o().createElement("div",{className:"wrapper-data"},o().createElement("div",{key:"aksdlkasd",className:"photo-wrapper"},o().createElement("img",{key:"asdmmmmasd",src:null==e?void 0:e.avatar_url,alt:null==e?void 0:e.login})),o().createElement("div",{className:"value-post placeholder-main-feed"},o().createElement(K(),{className:"feed-textarea",onChange:n.handleChangeTextarea,autoFocus:!1,placeholder:"Напишите Ваш комментарий",id:"text_comments",onKeyPress:n.handleKeyPress}))),o().createElement("div",{className:"wrapper-flex-end create-feed-wrapper-button"},o().createElement("div",{className:"button-default",onClick:function(){return n.sendComments()}},"Отправить"))))})):o().createElement("div",{className:"feed-comments-wrapper-item background-white"},o().createElement("div",{className:"wrapper-comments"},o().createElement("div",{className:"comments-title"},"Комментарии"),o().createElement("div",{className:"wall-comments"},null!==(a=this.state.comments)&&void 0!==a&&a.length?u.map((function(e){return o().createElement("div",null,o().createElement("div",{className:"feed-item-value bottom-line"},o().createElement("div",{className:"feed-item-value"},o().createElement("div",{key:"asldk",className:"wrapper-data"},o().createElement("div",{key:"aksdlkasd",className:"photo-wrapper"},o().createElement("img",{key:"asdmmmmasd",src:null==e?void 0:e.photo,alt:null==e?void 0:e.user})),o().createElement("div",{className:"value-post"},o().createElement("div",{className:"feed-item-title"},o().createElement("div",{className:"link-user",onClick:n.copyLogin},null==e?void 0:e.user),o().createElement("div",{className:"feed-item-datetime"},n.unixToDateTime(null==e?void 0:e.date_time)))))),o().createElement("div",{className:"wrapper-data"},o().createElement(H(),{className:"value-post",remarkPlugins:[qa],components:n.components},null==e?void 0:e.value))))})):o().createElement("div",{className:"no-comments"},"Новых комментариев нет.")))))):this.state.notFeed?o().createElement("div",null,o().createElement("div",{className:"error-wrapper"},o().createElement("div",{className:"error-page"},"Задача удалена либо еще не создана."))):o().createElement("div",{className:"loader-wrapper feed-wrapper"},o().createElement("div",{className:"loader"}))),o().createElement("div",{className:"tags-view"},i?o().createElement("div",{className:"tags-box"},o().createElement("div",{className:"wrapper-data"},o().createElement("div",{className:"photo-wrapper"},Math.floor((new Date).getTime()/1e3)-Math.floor(new Date(null==m?void 0:m.last_active_at).getTime()/1e3)>120?null:o().createElement("div",{className:"online_user"}),o().createElement("img",{src:null==m?void 0:m.avatar_url,alt:null==m?void 0:m.login,onClick:function(e){e.preventDefault(),window.location.href="/user/".concat(null==m?void 0:m.id)}})),o().createElement("div",{className:"value-post"},o().createElement("div",{className:"feed-item-title"},o().createElement("div",{className:"link-user",onClick:function(e){e.preventDefault(),window.location.href="/user/".concat(null==m?void 0:m.id)}},null==m?void 0:m.login)))),null!=m&&m.location?o().createElement("div",{className:"main-place"},"Локация:"," "+(null==m?void 0:m.location)):null,null!=m&&m.company?o().createElement("div",{className:"main-place"},"Компания:"," "+(null==m?void 0:m.company)):null,null!=m&&m.count_feeds?o().createElement("div",{className:"main-place"},"Количество постов:"," "+(null==m?void 0:m.count_feeds)):null,null!=m&&m.count_tasks?o().createElement("div",{className:"main-place"},"Создал задач:"," "+(null==m?void 0:m.count_tasks)):null):o().createElement("div",{className:"loader-wrapper feed-wrapper"},o().createElement("div",{className:"loader-small"}))))}}],a&&Aa(t.prototype,a),i}(l.Component);const Va=Ka;function za(e){return za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},za(e)}function Wa(e,t,a,n,r,l,o){try{var i=e[l](o),c=i.value}catch(e){return void a(e)}i.done?t(c):Promise.resolve(c).then(n,r)}function $a(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ya(e,t){return Ya=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ya(e,t)}function Za(e,t){return!t||"object"!==za(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qa(e){return Qa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qa(e)}var Xa=(0,d.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACTION_UPDATE_HISTORY":return e.history=t.value,e;case"ACTION_CHECK_AUTH":return e.auth=t.value,e;case"ACTION_SET_CENTRIFUGE":return e.centrifuge=t.value,e;case"ACTION_SET_COMPONENTS":return e.components=t.value,e;case"ACTION_SET_WEBRTC":return e.webRTC=t.value,e;case"ACTION_SET_CALL":return e.call=t.value,e;case"ACTION_SET_STATUS_CALL":return e.status_call=t.value,e;case"ACTION_SET_STREAM":return e.stream=t.value,e;case"ACTION_SET_AM":return e.am=t.value,e;case"ACTION_UPDATE_PEOPLE":return e.people=t.value,e;case"ACTION_UPDATE_NOTIFICATION_USER":return e.notification_user=t.value,e;default:return e}})),en=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ya(e,t)}(c,e);var t,a,n,r,i=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qa(n);if(r){var a=Qa(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return Za(this,e)});function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var a=window.AudioContext||window.webkitAudioContext;return(t=i.call(this,e)).state={load:!1,context:new a,audio:new Audio(je),channel:null},t.routes=(0,m.mount)({"/":(0,m.route)({title:"Добро пожаловать | DevCodeMyLife",head:o().createElement(o().Fragment,null,o().createElement("meta",{name:"description",content:"Социальная сеть для разработчиков"}),o().createElement("meta",{name:"Keywords",content:"dev, code, life, messenger, социальная сеть, для разработчиков, devcode"}),o().createElement("script",null,"console.log('[ app start ]')")),view:o().createElement(pe,null)}),"/people":(0,m.route)({title:"Люди | DevCodeMyLife",head:o().createElement(o().Fragment,null,o().createElement("meta",{name:"description",content:"Социальная сеть для разработчиков"}),o().createElement("meta",{name:"Keywords",content:"dev, code, life, messenger, социальная сеть, для разработчиков, devcode"}),o().createElement("script",null,"console.log('[ app start ]')")),view:o().createElement(Sa,{store:Xa})}),"/messages":(0,m.route)({title:"Мессенджер | DevCodeMyLife",head:o().createElement(o().Fragment,null,o().createElement("meta",{name:"description",content:"Мессенджер"}),o().createElement("meta",{name:"Keywords",content:"dev, code, life, messenger, социальная сеть, для разработчиков, devcode"}),o().createElement("script",null,"console.log('[ app start ]')")),view:o().createElement(We,{store:Xa})}),"/user/:id":(0,m.route)(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var a,n,r,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=t.params.id,Xa.dispatch({type:"ACTION_UPDATE_HISTORY",value:{path:null,id:l}}),fetch("/api/user/".concat(l),{method:"GET"}).then((function(e){return e.json()})).then((function(e){0===e.status.code&&(r=e.data[0])})).catch((function(e){console.log(e)})),e.abrupt("return",{title:"".concat(null===(a=r)||void 0===a?void 0:a.name," | DevCodeMyLife"),head:o().createElement(o().Fragment,null,o().createElement("meta",{name:"description",content:"Страница пользователя ".concat(null===(n=r)||void 0===n?void 0:n.title)}),o().createElement("meta",{name:"Keywords",content:"dev, code, life, messenger, социальная сеть, для разработчиков, devcode"}),o().createElement("script",null,"console.log('[ app start ]')")),view:o().createElement(xe,{store:Xa,id:l})});case 4:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function o(e){Wa(l,n,r,o,i,"next",e)}function i(e){Wa(l,n,r,o,i,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}()),"/feeds":(0,m.route)({title:"Новости | DevCodeMyLife",head:o().createElement(o().Fragment,null,o().createElement("meta",{name:"description",content:"Новости, у нас есть все, чего нет напиши сам."}),o().createElement("meta",{name:"Keywords",content:"dev, code, life, messenger, социальная сеть, для разработчиков, devcode"}),o().createElement("script",null,"console.log('[ app start ]')")),view:o().createElement(U,{store:Xa})}),"/post":(0,m.route)({title:"Заметка | DevCodeMyLife",head:o().createElement(o().Fragment,null,o().createElement("meta",{name:"description",content:"Заметка"}),o().createElement("script",null,"console.log('[ app start ]')")),view:o().createElement(re,{store:Xa})}),"/agreement":(0,m.route)({title:"Пользовательское соглашение | DevCodeMyLife",head:o().createElement(o().Fragment,null,o().createElement("meta",{name:"description",content:"Пользовательское соглашение"}),o().createElement("script",null,"console.log('[ app start ]')")),view:o().createElement(Ra,{store:Xa})}),"/settings":(0,m.route)({title:"Настройки | DevCodeMyLife",head:o().createElement(o().Fragment,null,o().createElement("meta",{name:"description",content:"Настройки"}),o().createElement("meta",{name:"Keywords",content:"dev, code, life, messenger, социальная сеть, для разработчиков, devcode"}),o().createElement("script",null,"console.log('[ app start ]')")),view:o().createElement(st,{store:Xa})}),"/freelances":(0,m.route)({title:"Фриланс | DevCodeMyLife",head:o().createElement(o().Fragment,null,o().createElement("meta",{name:"description",content:"Фриланс"}),o().createElement("script",null,"console.log('[ app start ]')")),view:o().createElement(xt,{store:Xa})}),"/notification":(0,m.route)({title:"События | DevCodeMyLife",head:o().createElement(o().Fragment,null,o().createElement("meta",{name:"description",content:"Оповещения"}),o().createElement("meta",{name:"Keywords",content:"dev, code, life, messenger, социальная сеть, для разработчиков, devcode"}),o().createElement("script",null,"console.log('[ app start ]')")),view:o().createElement(It,{store:Xa})}),"/teams":(0,m.route)({title:"Команды | DevCodeMyLife",head:o().createElement(o().Fragment,null,o().createElement("meta",{name:"description",content:"Команды"}),o().createElement("meta",{name:"Keywords",content:"dev, code, life, messenger, социальная сеть, для разработчиков, devcode"}),o().createElement("script",null,"console.log('[ app start ]')")),view:o().createElement(Ht,{store:Xa})}),"/how_to_use":(0,m.route)({title:"Привет! | DevCodeMyLife",head:o().createElement(o().Fragment,null,o().createElement("meta",{name:"description",content:""}),o().createElement("script",null,"console.log('[ app start ]')")),view:o().createElement(fa,{store:Xa})}),"/task":(0,m.route)({title:"Задача | DevCodeMyLife",head:o().createElement(o().Fragment,null,o().createElement("meta",{name:"description",content:"Задача"}),o().createElement("script",null,"console.log('[ app start ]')")),view:o().createElement(Va,{store:Xa})})}),t}return t=c,(a=[{key:"checkAuth",value:function(){var e=this;fetch("/api/authentication",{method:"POST",body:JSON.stringify({})}).then((function(e){return e.json()})).then((function(t){if(0===t.status.code){Xa.dispatch({type:"ACTION_CHECK_AUTH",value:{user:{isAuth:!0,data:null==t?void 0:t.data[0],feeds:null==t?void 0:t.feed,notificationCount:null==t?void 0:t.notification_count,messagesCount:null==t?void 0:t.count_message,notifications:null==t?void 0:t.notification,token:null==t?void 0:t.token,error:null}}}),Xa.dispatch({type:"ACTION_SET_WEBRTC",value:{pc:new RTCPeerConnection({iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302"]}]})}}),fetch("/api/app/components",{method:"GET"}).then((function(e){return e.json()})).then((function(e){0===(null==e?void 0:e.status.code)&&Xa.dispatch({type:"ACTION_SET_COMPONENTS",value:{settings:e.data}})}));var a=new(ie())("wss://devcodemylife.tech/cent/connection/websocket",{subscribeEndpoint:"/api/subscribe",onPrivateSubscribe:function(e){console.log(e)}});a.setToken(null==t?void 0:t.token),a.connect(),a.on("connect",(function(e){console.log("[ app connected centrifuge ]")}));var n=e;a.subscribe("".concat(null==t?void 0:t.data[0].id),(function(e){var a=Xa.getState(),r=e.data;switch(r.type){case"event":n.state.context.resume().then((function(){n.state.audio.play()})),Xa.dispatch({type:"ACTION_CHECK_AUTH",value:{user:{isAuth:!0,data:null==t?void 0:t.data[0],feeds:null==t?void 0:t.feed,notificationCount:r.count,messagesCount:a.auth.user.messagesCount,notifications:null==t?void 0:t.notification,token:null==t?void 0:t.token,error:null}}}),Xa.dispatch({type:"ACTION_UPDATE_NOTIFICATION_USER",value:p.toast}),p.toast.info("Вашу заметку посмотрели.",{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,onClick:function(){location.href="/notification"}});break;case"task_win":n.state.context.resume().then((function(){n.state.audio.play()})),fetch("/api/authentication",{method:"POST",body:JSON.stringify({})}).then((function(e){return e.json()})).then((function(e){0===(null==e?void 0:e.status.code)&&Xa.dispatch({type:"ACTION_CHECK_AUTH",value:{user:{isAuth:!0,data:null==e?void 0:e.data[0],feeds:null==e?void 0:e.feed,notificationCount:null==e?void 0:e.notification_count,messagesCount:null==e?void 0:e.count_message,notifications:null==e?void 0:e.notification,token:null==e?void 0:e.token,error:null}}})})),p.toast.info("Вы стали исполнителем задачи!",{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,onClick:function(){location.href="/notification"}});break;case"task_lose":n.state.context.resume().then((function(){n.state.audio.play()})),fetch("/api/authentication",{method:"POST",body:JSON.stringify({})}).then((function(e){return e.json()})).then((function(e){0===(null==e?void 0:e.status.code)&&Xa.dispatch({type:"ACTION_CHECK_AUTH",value:{user:{isAuth:!0,data:null==e?void 0:e.data[0],feeds:null==e?void 0:e.feed,notificationCount:null==e?void 0:e.notification_count,messagesCount:null==e?void 0:e.count_message,notifications:null==e?void 0:e.notification,token:null==e?void 0:e.token,error:null}}})})),p.toast.info("Вам отказали в выполнении задачи",{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,onClick:function(){location.href="/notification"}});break;case"comment":n.state.context.resume().then((function(){n.state.audio.play()})),Xa.dispatch({type:"ACTION_CHECK_AUTH",value:{user:{isAuth:!0,data:null==t?void 0:t.data[0],feeds:null==t?void 0:t.feed,notificationCount:r.count,messagesCount:a.auth.user.messagesCount,notifications:null==t?void 0:t.notification,token:null==t?void 0:t.token,error:null}}}),p.toast.info("Вашу заметку прокомментировали.",{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,onClick:function(){location.href="/notification"}});break;case"message":null===window.location.pathname.match(/messages/)&&(Xa.dispatch({type:"ACTION_CHECK_AUTH",value:{user:{isAuth:!0,data:null==t?void 0:t.data[0],feeds:null==t?void 0:t.feed,notificationCount:a.auth.user.notificationCount,messagesCount:r.count,notifications:null==t?void 0:t.notification,token:null==t?void 0:t.token,error:null}}}),p.toast.info("Вам пришло новое сообщение.",{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,onClick:function(){location.href="/messages"}}));break;case"update":fetch("/api/authentication",{method:"POST",body:JSON.stringify({})}).then((function(e){return e.json()})).then((function(e){0===(null==e?void 0:e.status.code)&&Xa.dispatch({type:"ACTION_CHECK_AUTH",value:{user:{isAuth:!0,data:null==e?void 0:e.data[0],feeds:null==e?void 0:e.feed,notificationCount:null==e?void 0:e.notification_count,messagesCount:null==e?void 0:e.count_message,notifications:null==e?void 0:e.notification,token:null==e?void 0:e.token,error:null}}})}))}})),Xa.dispatch({type:"ACTION_SET_CENTRIFUGE",value:{object:a}}),"/"===document.location.pathname?window.location.href="/feeds":e.setState({load:!0})}else{var r;Xa.dispatch({type:"ACTION_CHECK_AUTH",value:{user:{isAuth:!1,data:null,feeds:null,error:null==t||null===(r=t.status)||void 0===r?void 0:r.message}}}),e.setState({load:!0})}})).catch((function(e){Xa.dispatch({type:"ACTION_CHECK_AUTH",value:{user:{isAuth:!1,data:null,feeds:null,error:e}}})}))}},{key:"componentDidMount",value:function(){this.checkAuth()}},{key:"render",value:function(){var e=this;return this.state.load?o().createElement(h(),null,o().createElement("div",{className:"wrapper"},o().createElement(le.BrowserRouter,null,o().createElement(le.Switch,null,o().createElement(le.Route,{path:"/",render:function(t){var a=t.history,n=t.match;return o().createElement(f.Router,{routes:e.routes,history:a,basename:n.url},o().createElement(N,{store:Xa,load:!0}),o().createElement(p.ToastContainer,{position:"bottom-right",autoClose:2e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),o().createElement("div",{className:"wrapper-content"},o().createElement("div",{className:"content"},o().createElement("div",{id:"vertical_menu",className:"reviews-menu"},o().createElement(ia,{song:je,store:Xa}),o().createElement("div",{className:"wrapper-ad",onClick:function(){window.location.href="https://mcs.mail.ru/"}},o().createElement("div",{className:"image-ad"},o().createElement("img",{className:"image-ad-tag",src:pa,alt:"vk"})),o().createElement("div",{className:"ad-text"},"Сайт работает в облаках")),o().createElement("div",{className:"menu-nav"},o().createElement("div",{className:"menu-nav-item"},o().createElement(f.Link,{href:"/user/6"},"Поддержка")),o().createElement("div",{className:"menu-nav-item"},o().createElement(f.Link,{href:"https://t.me/devcodemylife",target:"_blank"},"Мы в Telegram")))),o().createElement(f.NotFoundBoundary,{render:function(){return o().createElement("div",{className:"content-wall-views"},o().createElement("div",{className:"error-wrapper"},o().createElement("div",{className:"error-page"},"Такой страницы не существует.")))}},o().createElement(l.Suspense,{fallback:!0},o().createElement(f.View,{store:Xa}))))))}}))))):o().createElement("div",{style:{position:"fixed",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},o().createElement("div",{className:"loader"}))}}])&&$a(t.prototype,a),c}(o().Component);const tn=en;var an=c()();an.get(["/","/feeds"],(function(e,a){var n=u().renderToNodeStream(o().createElement(tn,null)),l=t().resolve("./build/index.html");r().readFile(l,"utf8",(function(t,r){return t?(console.error("Something went wrong:",t),a.status(500).send("Oops, better luck next time!")):(console.log(e.path),a.send(r.replace('<div id="root"></div>','<div id="root">'.concat(n,"</div>"))))}))})),an.use(c().static("./build")),an.listen(80,(function(){console.log("Server is listening on port ".concat(80))}))})()})();